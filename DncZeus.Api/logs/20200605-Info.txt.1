2020-06-05 18:29:39,107 [1] INFO  Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager [(null)]  - User profile is available. Using 'C:\Users\June\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-06-05 18:29:39,722 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/swagger/index.html  
2020-06-05 18:29:39,724 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 DEBUG http://localhost:54321/  0
2020-06-05 18:29:39,763 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 41.4996ms 200 
2020-06-05 18:29:40,109 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 387.8262ms 200 text/html
2020-06-05 18:29:40,295 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/swagger/v3/swagger.json  
2020-06-05 18:29:40,709 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 413.2136ms 200 application/json;charset=utf-8
2020-06-05 18:29:52,923 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/org/list?api-version=5  
2020-06-05 18:29:52,926 [10] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:29:52,930 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 6.9646ms 204 
2020-06-05 18:29:52,937 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/org/list?api-version=5  
2020-06-05 18:29:52,954 [10] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:29:52,957 [10] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:29:53,007 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Org"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List() on controller DncZeus.Api.Controllers.Mis.OrgController (DncZeus.Api).
2020-06-05 18:29:53,757 [10] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:29:53,825 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Mis.OrgController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:29:53,987 [10] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (33ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [m].[ID], [m].[Code], [m].[Name], [m].[credate], [m].[creuser], [m].[moddate], [m].[moduser]
FROM [MisOrganization] AS [m]
2020-06-05 18:29:54,032 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Mis.OrgController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 203.13ms.
2020-06-05 18:29:54,041 [10] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-05 18:29:54,053 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Mis.OrgController.List (DncZeus.Api) in 1040.8477ms
2020-06-05 18:29:54,055 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 1118.9494ms 200 application/json; charset=utf-8
2020-06-05 18:29:59,513 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/oauth/auth?userno=admin&password=a123456&orgid=1  
2020-06-05 18:29:59,517 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:29:59,533 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Auth", controller = "Oauth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Auth(System.String, System.String, Int32) on controller DncZeus.Api.Controllers.OauthController (DncZeus.Api).
2020-06-05 18:29:59,540 [15] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:29:59,578 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.OauthController.Auth (DncZeus.Api) - Validation state: Valid
2020-06-05 18:29:59,663 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (34ms) [Parameters=[@__Trim_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[EmpName], [x].[EmpNo], [x].[code], [x].[credate], [x].[creuser], [x].[depname], [x].[depno], [x].[email], [x].[enabled], [x].[jobname], [x].[jobno], [x].[moddate], [x].[moduser], [x].[pwd], [x].[telno], [x].[userLogo], [x].[username], [x].[userno], [x].[utype], [x].[wxAccount], [x].[wxId], [x].[wxMail], [x].[wxName], [x].[wxPhone], [x].[wxPwd]
FROM [Secuser] AS [x]
WHERE [x].[userno] = @__Trim_0
2020-06-05 18:29:59,719 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__user_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[orgid], [x].[userid]
FROM [Secuserorg] AS [x]
WHERE [x].[userid] = @__user_Guid_0
2020-06-05 18:29:59,753 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[@__orgid_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[ID], [x].[Code], [x].[Name], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser]
FROM [MisOrganization] AS [x]
WHERE [x].[ID] = @__orgid_0
2020-06-05 18:29:59,785 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__user_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[groupid], [x].[userid]
FROM [Secguser] AS [x]
WHERE [x].[userid] = @__user_Guid_0
2020-06-05 18:29:59,790 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.OauthController.Auth (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 209.4048ms.
2020-06-05 18:29:59,793 [15] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-05 18:29:59,796 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.OauthController.Auth (DncZeus.Api) in 260.7666ms
2020-06-05 18:29:59,799 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 285.1776ms 200 application/json; charset=utf-8
2020-06-05 18:29:59,818 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v1/account/profile  
2020-06-05 18:29:59,821 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:29:59,824 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 6.804ms 204 
2020-06-05 18:29:59,828 [16] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v1/account/profile  
2020-06-05 18:29:59,833 [16] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:29:59,836 [16] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:29:59,840 [16] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Profile() on controller DncZeus.Api.Controllers.AccountController (DncZeus.Api).
2020-06-05 18:29:59,853 [16] INFO  Microsoft.AspNetCore.Authorization.DefaultAuthorizationService [(null)]  - Authorization was successful.
2020-06-05 18:29:59,857 [16] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:29:59,878 [16] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) - Validation state: Valid
2020-06-05 18:29:59,972 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (53ms) [Parameters=[@__Parse_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[ID], [x].[Code], [x].[Name], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser]
FROM [MisOrganization] AS [x]
WHERE [x].[ID] = @__Parse_0
2020-06-05 18:30:00,033 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (36ms) [Parameters=[@__guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[EmpName], [x].[EmpNo], [x].[code], [x].[credate], [x].[creuser], [x].[depname], [x].[depno], [x].[email], [x].[enabled], [x].[jobname], [x].[jobno], [x].[moddate], [x].[moduser], [x].[pwd], [x].[telno], [x].[userLogo], [x].[username], [x].[userno], [x].[utype], [x].[wxAccount], [x].[wxId], [x].[wxMail], [x].[wxName], [x].[wxPhone], [x].[wxPwd]
FROM [Secuser] AS [x]
WHERE [x].[Guid] = @__guid_0
2020-06-05 18:30:00,073 [16] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (27ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[Alias], [x].[BeforeCloseFun], [x].[Component], [x].[CreatedByUserGuid], [x].[CreatedByUserName], [x].[CreatedOn], [x].[Description], [x].[HideInMenu], [x].[Icon], [x].[IsDefaultRouter], [x].[IsDeleted], [x].[Level], [x].[ModifiedByUserGuid], [x].[ModifiedByUserName], [x].[ModifiedOn], [x].[Name], [x].[NotCache], [x].[ParentGuid], [x].[ParentName], [x].[Sort], [x].[Status], [x].[Url]
FROM [DncMenu] AS [x]
WHERE ([x].[IsDeleted] = 0) AND ([x].[Status] = 1)
2020-06-05 18:30:00,160 [16] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[@__user_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secuprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE [x].[userid] = @__user_Guid_0
ORDER BY [b0].[prgno]
2020-06-05 18:30:00,202 [16] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__groupid_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secgprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE CONVERT(VARCHAR(36), [x].[groupid]) = @__groupid_0
ORDER BY [b0].[prgno]
2020-06-05 18:30:00,205 [16] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 324.7562ms.
2020-06-05 18:30:00,207 [16] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-05 18:30:00,217 [16] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) in 374.2914ms
2020-06-05 18:30:00,221 [16] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 392.8944ms 200 application/json; charset=utf-8
2020-06-05 18:30:01,734 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-05 18:30:01,738 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:30:01,742 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 8.9995ms 204 
2020-06-05 18:30:01,747 [17] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-05 18:30:01,751 [17] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:30:01,755 [17] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:30:01,759 [17] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "LoadMenuTree", controller = "Uprg"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult LoadMenuTree() on controller DncZeus.Api.Controllers.Api.Sec.UprgController (DncZeus.Api).
2020-06-05 18:30:01,762 [17] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:30:02,002 [17] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) - Validation state: Valid
2020-06-05 18:30:02,042 [17] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[icon], [p].[sysname], [p].[sysno], [p].[sysorder]
FROM [Secsys] AS [p]
ORDER BY [p].[sysorder]
2020-06-05 18:30:02,083 [17] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[funname], [p].[funno], [p].[funorder], [p].[icon], [p].[sysid]
FROM [Secfun] AS [p]
ORDER BY [p].[funorder]
2020-06-05 18:30:02,127 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/Upload/img/20200627040310.png  
2020-06-05 18:30:02,129 [17] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (27ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[enabled], [x].[funid], [x].[icon], [x].[mainid], [x].[prgcomp], [x].[prgname], [x].[prgno], [x].[prgorder], [x].[prgtype], [x].[program], [x].[runtype], [x].[sysid]
FROM [Secprg] AS [x]
WHERE [x].[enabled] = 'Y'
ORDER BY [x].[prgorder]
2020-06-05 18:30:02,142 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 17.0705ms 404 
2020-06-05 18:30:02,171 [17] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[butid], [p].[butname], [p].[butno], [p].[butorder], [p].[funid], [p].[prgid], [p].[sysid]
FROM [Secprgbut] AS [p]
ORDER BY [p].[butorder]
2020-06-05 18:30:02,180 [17] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 175.2644ms.
2020-06-05 18:30:02,183 [17] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-05 18:30:02,201 [17] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) in 437.5188ms
2020-06-05 18:30:02,204 [17] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 457.0724ms 200 application/json; charset=utf-8
2020-06-05 18:30:02,264 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:30:02,271 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:30:02,273 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 9.1865ms 204 
2020-06-05 18:30:02,277 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:30:02,284 [10] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:30:02,287 [10] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:30:02,292 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-05 18:30:02,296 [10] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:30:02,322 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-05 18:30:02,382 [10] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (35ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-05 18:30:02,388 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 62.7192ms.
2020-06-05 18:30:02,391 [10] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:30:02,397 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 101.1008ms
2020-06-05 18:30:02,400 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 122.8835ms 200 application/json; charset=utf-8
2020-06-05 18:30:06,502 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-06-05 18:30:06,506 [11] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-06-05 18:30:06,507 [10] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:30:06,512 [11] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:30:06,522 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 10.3931ms 204 
2020-06-05 18:30:06,525 [11] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 10.2065ms 204 
2020-06-05 18:30:06,530 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 170
2020-06-05 18:30:06,532 [11] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-06-05 18:30:06,535 [11] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:30:06,538 [10] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:30:06,543 [10] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:30:06,544 [11] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:30:06,550 [11] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-06-05 18:30:06,551 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:30:06,556 [10] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:30:06,556 [11] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:30:06,613 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:30:06,615 [11] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:30:06,656 [11] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-06-05 18:30:06,740 [10] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (28ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-05 18:30:06,769 [11] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-06-05 18:30:06,789 [11] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 172.1016ms.
2020-06-05 18:30:06,791 [10] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-05 18:30:06,793 [11] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:30:06,795 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 177.6762ms.
2020-06-05 18:30:06,798 [10] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:30:06,803 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 249.1853ms
2020-06-05 18:30:06,805 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 280.1041ms 200 application/json; charset=utf-8
2020-06-05 18:30:06,808 [11] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 254.9802ms
2020-06-05 18:30:06,811 [11] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 282.6483ms 200 application/json; charset=utf-8
2020-06-05 18:30:06,822 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-05 18:30:06,824 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:30:06,829 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 4.9305ms 204 
2020-06-05 18:30:06,832 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 170
2020-06-05 18:30:06,834 [8] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:30:06,838 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:30:06,842 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:30:06,845 [8] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:30:06,868 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-05 18:30:06,920 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (29ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL) AND ([x].[qty] = 0.0)
2020-06-05 18:30:06,952 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-05 18:30:06,978 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-05 18:30:06,980 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 110.4029ms.
2020-06-05 18:30:06,983 [8] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:30:06,988 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 143.069ms
2020-06-05 18:30:06,990 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 158.5442ms 200 application/json; charset=utf-8
2020-06-05 18:30:08,361 [17] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workprocess/list?api-version=8  
2020-06-05 18:30:08,363 [11] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8  
2020-06-05 18:30:08,366 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8  
2020-06-05 18:30:08,369 [17] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:30:08,377 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:30:08,380 [11] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:30:08,385 [17] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 13.444ms 204 
2020-06-05 18:30:08,387 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 23.3017ms 204 
2020-06-05 18:30:08,391 [11] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 29.9739ms 204 
2020-06-05 18:30:08,395 [17] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workprocess/list?api-version=8 application/json;charset=UTF-8 150
2020-06-05 18:30:08,399 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8 application/json;charset=UTF-8 131
2020-06-05 18:30:08,401 [11] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 139
2020-06-05 18:30:08,405 [17] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:30:08,407 [15] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:30:08,409 [11] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:30:08,411 [17] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:30:08,413 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:30:08,416 [11] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:30:08,422 [17] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workprocess"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workprocess.WorkprocessRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkprocessController (DncZeus.Api).
2020-06-05 18:30:08,424 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkDate", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkDate(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-05 18:30:08,427 [11] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-05 18:30:08,429 [17] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:30:08,432 [15] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:30:08,436 [11] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:30:08,459 [17] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:30:08,492 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) - Validation state: Valid
2020-06-05 18:30:08,494 [11] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-06-05 18:30:08,552 [11] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty',isnull(h.targetOut ,0) as 'targetOut',isnull(h.realityOut,0) as 'realityOut',isnull(h.sumTime,0) as 'sumTime',isnull(h.status,0) as 'status'
from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=a.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=a.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=a.factoryGuid)
left join (
select sum(outline.output) as 'todayDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.factoryGuid
) as g on(g.factoryGuid=a.factoryGuid)
left join (
	select aa.targetOut,aa.realityOut,aa.sumTime,aa.factoryGuid,aa.status from ManFactoryWorkout aa where wrokDate=@p3 and factoryGuid=@p0
) as h on(h.factoryGuid=a.factoryGuid)
2020-06-05 18:30:08,555 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (28ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__payload_workDate_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[cadre], [x].[cadreLeave], [x].[cadreRest], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[logistic], [x].[logisticLeave], [x].[logisticRest], [x].[moddate], [x].[moduser], [x].[workDate], [x].[worker], [x].[workerLeave], [x].[workerRest]
FROM [ManFactoryWorkdate] AS [x]
WHERE ([x].[factoryGuid] = @__payload_factoryGuid_0) AND ([x].[workDate] = @__payload_workDate_1)
2020-06-05 18:30:08,567 [11] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 68.7591ms.
2020-06-05 18:30:08,596 [11] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:30:08,600 [17] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (29ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[factoryGuid], [t].[workCode], [t].[workName], [t].[rate], [t].[isvalid], [t].[credate], [t].[creuser], [t].[moddate], [t].[moduser], [t].[factoryName]
FROM (
    SELECT [a].[Guid], [a].[OrgID], [a].[factoryGuid], [a].[workCode], [a].[workName], [a].[rate], [a].[isvalid], [a].[credate], [a].[creuser], [a].[moddate], [a].[moduser], [b].[name] AS [factoryName], ROW_NUMBER() OVER(ORDER BY [a].[factoryGuid], [a].[workCode]) AS [__RowNumber__]
    FROM [ManWorkProcess] AS [a]
    INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
    WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-05 18:30:08,607 [11] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 174.7878ms
2020-06-05 18:30:08,610 [11] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 214.1131ms 200 application/json; charset=utf-8
2020-06-05 18:30:08,641 [17] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkProcess] AS [a]
INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
2020-06-05 18:30:08,644 [17] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 165.9464ms.
2020-06-05 18:30:08,646 [17] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:30:08,657 [17] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) in 230.5748ms
2020-06-05 18:30:08,660 [17] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 268.9303ms 200 application/json; charset=utf-8
2020-06-05 18:30:08,665 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 169.0655ms.
2020-06-05 18:30:08,667 [15] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-05 18:30:08,674 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) in 245.4576ms
2020-06-05 18:30:08,676 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 283.3476ms 200 application/json; charset=utf-8
2020-06-05 18:30:10,064 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 206
2020-06-05 18:30:10,068 [15] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:30:10,071 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:30:10,073 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:30:10,076 [15] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:30:10,096 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-05 18:30:10,122 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND ([x].[qty] = 0.0)
2020-06-05 18:30:10,151 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid), @__item_workName_2='?' (Size = 30) (DbType = AnsiString), @__item_workName_3='?' (Size = 30) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ((([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND (([b0].[workName] <> @__item_workName_2) OR [b0].[workName] IS NULL)) AND (([b0].[workName] <> @__item_workName_3) OR [b0].[workName] IS NULL)
2020-06-05 18:30:10,177 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid), @__item_workName_2='?' (Size = 30) (DbType = AnsiString), @__item_workName_3='?' (Size = 30) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ((([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND (([b0].[workName] <> @__item_workName_2) OR [b0].[workName] IS NULL)) AND (([b0].[workName] <> @__item_workName_3) OR [b0].[workName] IS NULL)
2020-06-05 18:30:10,179 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 81.5588ms.
2020-06-05 18:30:10,182 [15] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:30:10,185 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 109.0479ms
2020-06-05 18:30:10,189 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 124.1424ms 200 application/json; charset=utf-8
2020-06-05 18:30:12,150 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-06-05 18:30:12,158 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:30:12,161 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 11.8817ms 204 
2020-06-05 18:30:12,164 [11] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 242
2020-06-05 18:30:12,168 [11] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:30:12,171 [11] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:30:12,174 [11] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:30:12,176 [11] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:30:12,195 [11] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:30:12,218 [11] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-05 18:30:12,243 [11] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-05 18:30:12,246 [11] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 49.0759ms.
2020-06-05 18:30:12,252 [11] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:30:12,259 [11] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 82.7935ms
2020-06-05 18:30:12,261 [11] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 96.9761ms 200 application/json; charset=utf-8
2020-06-05 18:30:12,292 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-05 18:30:12,294 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:30:12,298 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 4.8552ms 204 
2020-06-05 18:30:12,302 [16] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 242
2020-06-05 18:30:12,305 [16] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:30:12,307 [16] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:30:12,309 [16] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:30:12,311 [16] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:30:12,329 [16] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-05 18:30:12,353 [16] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND ([x].[qty] = 0.0)
2020-06-05 18:30:12,375 [16] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid), @__item_workName_2='?' (Size = 30) (DbType = AnsiString), @__item_workName_3='?' (Size = 30) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ((([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND (([b0].[workName] <> @__item_workName_2) OR [b0].[workName] IS NULL)) AND (([b0].[workName] <> @__item_workName_3) OR [b0].[workName] IS NULL)
2020-06-05 18:30:12,398 [16] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid), @__item_workName_2='?' (Size = 30) (DbType = AnsiString), @__item_workName_3='?' (Size = 30) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ((([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND (([b0].[workName] <> @__item_workName_2) OR [b0].[workName] IS NULL)) AND (([b0].[workName] <> @__item_workName_3) OR [b0].[workName] IS NULL)
2020-06-05 18:30:12,402 [16] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 69.6586ms.
2020-06-05 18:30:12,404 [16] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:30:12,408 [16] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 95.8193ms
2020-06-05 18:30:12,411 [16] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 108.4487ms 200 application/json; charset=utf-8
2020-06-05 18:30:28,807 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/editQty?api-version=8  
2020-06-05 18:30:28,819 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:30:28,822 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 14.5566ms 204 
2020-06-05 18:30:28,825 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/editQty?api-version=8 application/json;charset=UTF-8 162
2020-06-05 18:30:28,837 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:30:28,840 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:30:28,843 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "EditQty", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult EditQty(DncZeus.Api.ViewModels.Man.Workshop.QueryWorkshopout) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:30:28,846 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:30:28,873 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.EditQty (DncZeus.Api) - Validation state: Valid
2020-06-05 18:30:28,909 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (25ms) [Parameters=[@__model_workshopOutGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[countType], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[factoryPrice], [x].[itemCode], [x].[itemName], [x].[ordCode], [x].[ordQty], [x].[sumQty], [x].[workProcessGuid]
FROM [ManWorkshopOut] AS [x]
WHERE [x].[Guid] = @__model_workshopOutGuid_0
2020-06-05 18:30:28,948 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__model_workDate_0='?' (DbType = DateTime2), @__model_workshopOutGuid_1='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser], [x].[output], [x].[qty], [x].[remark], [x].[workDate], [x].[workshopOutGuid]
FROM [ManWorkshopOutLine] AS [x]
WHERE ([x].[workDate] = @__model_workDate_0) AND ([x].[workshopOutGuid] = @__model_workshopOutGuid_1)
2020-06-05 18:30:29,044 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (37ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal)], CommandType='Text', CommandTimeout='6000000']
SET NOCOUNT ON;
UPDATE [ManWorkshopOutLine] SET [output] = @p0, [qty] = @p1
WHERE [Guid] = @p2;
SELECT @@ROWCOUNT;
2020-06-05 18:30:29,050 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.EditQty (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 174.6849ms.
2020-06-05 18:30:29,052 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-05 18:30:29,054 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.EditQty (DncZeus.Api) in 208.2881ms
2020-06-05 18:30:29,056 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 232.3083ms 200 application/json; charset=utf-8
2020-06-05 18:30:29,082 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-06-05 18:30:29,084 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:30:29,087 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 6.8991ms 204 
2020-06-05 18:30:29,089 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 242
2020-06-05 18:30:29,092 [8] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:30:29,094 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:30:29,098 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:30:29,100 [8] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:30:29,119 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:30:29,140 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-05 18:30:29,162 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-05 18:30:29,165 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 43.2857ms.
2020-06-05 18:30:29,167 [8] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:30:29,170 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 69.9117ms
2020-06-05 18:30:29,173 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 83.2369ms 200 application/json; charset=utf-8
2020-06-05 18:30:29,192 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-05 18:30:29,194 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:30:29,197 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 4.9322ms 204 
2020-06-05 18:30:29,200 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 242
2020-06-05 18:30:29,204 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:30:29,207 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:30:29,211 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:30:29,214 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:30:29,239 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-05 18:30:29,261 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND ([x].[qty] = 0.0)
2020-06-05 18:30:29,285 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid), @__item_workName_2='?' (Size = 30) (DbType = AnsiString), @__item_workName_3='?' (Size = 30) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ((([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND (([b0].[workName] <> @__item_workName_2) OR [b0].[workName] IS NULL)) AND (([b0].[workName] <> @__item_workName_3) OR [b0].[workName] IS NULL)
2020-06-05 18:30:29,306 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid), @__item_workName_2='?' (Size = 30) (DbType = AnsiString), @__item_workName_3='?' (Size = 30) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ((([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND (([b0].[workName] <> @__item_workName_2) OR [b0].[workName] IS NULL)) AND (([b0].[workName] <> @__item_workName_3) OR [b0].[workName] IS NULL)
2020-06-05 18:30:29,308 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 66.916ms.
2020-06-05 18:30:29,310 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:30:29,313 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 99.6528ms
2020-06-05 18:30:29,317 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 115.677ms 200 application/json; charset=utf-8
2020-06-05 18:30:32,092 [16] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:30:32,098 [16] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:30:32,102 [16] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 9.0585ms 204 
2020-06-05 18:30:32,107 [16] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:30:32,111 [16] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:30:32,115 [16] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:30:32,118 [16] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-05 18:30:32,121 [16] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:30:32,140 [16] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-05 18:30:32,166 [16] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-05 18:30:32,168 [16] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 25.6361ms.
2020-06-05 18:30:32,172 [16] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:30:32,175 [16] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 53.4972ms
2020-06-05 18:30:32,178 [16] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 70.1599ms 200 application/json; charset=utf-8
2020-06-05 18:30:57,758 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/editQty?api-version=8  
2020-06-05 18:30:57,771 [10] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:30:57,784 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 15.4694ms 204 
2020-06-05 18:30:57,786 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/editQty?api-version=8 application/json;charset=UTF-8 163
2020-06-05 18:30:57,799 [10] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:30:57,801 [10] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:30:57,804 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "EditQty", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult EditQty(DncZeus.Api.ViewModels.Man.Workshop.QueryWorkshopout) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:30:57,806 [10] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:30:57,827 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.EditQty (DncZeus.Api) - Validation state: Valid
2020-06-05 18:30:57,852 [10] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__model_workshopOutGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[countType], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[factoryPrice], [x].[itemCode], [x].[itemName], [x].[ordCode], [x].[ordQty], [x].[sumQty], [x].[workProcessGuid]
FROM [ManWorkshopOut] AS [x]
WHERE [x].[Guid] = @__model_workshopOutGuid_0
2020-06-05 18:30:57,876 [10] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__model_workDate_0='?' (DbType = DateTime2), @__model_workshopOutGuid_1='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser], [x].[output], [x].[qty], [x].[remark], [x].[workDate], [x].[workshopOutGuid]
FROM [ManWorkshopOutLine] AS [x]
WHERE ([x].[workDate] = @__model_workDate_0) AND ([x].[workshopOutGuid] = @__model_workshopOutGuid_1)
2020-06-05 18:30:57,903 [10] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal)], CommandType='Text', CommandTimeout='6000000']
SET NOCOUNT ON;
UPDATE [ManWorkshopOutLine] SET [output] = @p0, [qty] = @p1
WHERE [Guid] = @p2;
SELECT @@ROWCOUNT;
2020-06-05 18:30:57,906 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.EditQty (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 76.4238ms.
2020-06-05 18:30:57,908 [10] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-05 18:30:57,911 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.EditQty (DncZeus.Api) in 104.5118ms
2020-06-05 18:30:57,914 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 127.5433ms 200 application/json; charset=utf-8
2020-06-05 18:30:57,943 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-06-05 18:30:57,945 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:30:57,950 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 6.0887ms 204 
2020-06-05 18:30:57,954 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 242
2020-06-05 18:30:57,956 [8] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:30:57,958 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:30:57,960 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:30:57,962 [8] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:30:57,980 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:30:58,002 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-05 18:30:58,025 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-05 18:30:58,027 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 44.5034ms.
2020-06-05 18:30:58,031 [8] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:30:58,034 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 71.9091ms
2020-06-05 18:30:58,037 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 83.9638ms 200 application/json; charset=utf-8
2020-06-05 18:30:58,058 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-05 18:30:58,060 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:30:58,065 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.488ms 204 
2020-06-05 18:30:58,068 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 242
2020-06-05 18:30:58,070 [8] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:30:58,072 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:30:58,074 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:30:58,076 [8] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:30:58,094 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-05 18:30:58,117 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND ([x].[qty] = 0.0)
2020-06-05 18:30:58,139 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid), @__item_workName_2='?' (Size = 30) (DbType = AnsiString), @__item_workName_3='?' (Size = 30) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ((([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND (([b0].[workName] <> @__item_workName_2) OR [b0].[workName] IS NULL)) AND (([b0].[workName] <> @__item_workName_3) OR [b0].[workName] IS NULL)
2020-06-05 18:30:58,161 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid), @__item_workName_2='?' (Size = 30) (DbType = AnsiString), @__item_workName_3='?' (Size = 30) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ((([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND (([b0].[workName] <> @__item_workName_2) OR [b0].[workName] IS NULL)) AND (([b0].[workName] <> @__item_workName_3) OR [b0].[workName] IS NULL)
2020-06-05 18:30:58,164 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 66.4313ms.
2020-06-05 18:30:58,166 [8] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:30:58,169 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 92.4372ms
2020-06-05 18:30:58,172 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 102.94ms 200 application/json; charset=utf-8
2020-06-05 18:31:02,092 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:31:02,095 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:31:02,098 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.3457ms 204 
2020-06-05 18:31:02,103 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:31:02,106 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:31:02,111 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:31:02,116 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-05 18:31:02,120 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:31:02,142 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-05 18:31:02,166 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-05 18:31:02,169 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 24.4135ms.
2020-06-05 18:31:02,171 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:31:02,174 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 54.6476ms
2020-06-05 18:31:02,177 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 73.8882ms 200 application/json; charset=utf-8
2020-06-05 18:31:32,093 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:31:32,106 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:31:32,117 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 15.8748ms 204 
2020-06-05 18:31:32,120 [17] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:31:32,125 [17] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:31:32,127 [17] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:31:32,133 [17] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-05 18:31:32,136 [17] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:31:32,157 [17] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-05 18:31:32,180 [17] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-05 18:31:32,183 [17] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23.0428ms.
2020-06-05 18:31:32,185 [17] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:31:32,188 [17] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 52.4035ms
2020-06-05 18:31:32,191 [17] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 72.0135ms 200 application/json; charset=utf-8
2020-06-05 18:32:02,092 [17] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:32:02,106 [17] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:32:02,110 [17] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 17.4087ms 204 
2020-06-05 18:32:02,126 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:32:02,130 [10] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:32:02,132 [10] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:32:02,135 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-05 18:32:02,138 [10] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:32:02,164 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-05 18:32:02,188 [10] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-05 18:32:02,191 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 24.1512ms.
2020-06-05 18:32:02,193 [10] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:32:02,197 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 57.8563ms
2020-06-05 18:32:02,200 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 73.3221ms 200 application/json; charset=utf-8
2020-06-05 18:32:32,093 [27] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:32:32,097 [27] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:32:32,112 [27] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 6.9222ms 204 
2020-06-05 18:32:32,116 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:32:32,129 [10] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:32:32,139 [10] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:32:32,142 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-05 18:32:32,147 [10] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:32:32,165 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-05 18:32:32,189 [10] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-05 18:32:32,192 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23.3445ms.
2020-06-05 18:32:32,196 [10] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:32:32,209 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 52.9297ms
2020-06-05 18:32:32,214 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 97.571ms 200 application/json; charset=utf-8
2020-06-05 18:33:02,650 [30] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:33:02,661 [30] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:33:02,674 [30] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 13.6045ms 204 
2020-06-05 18:33:02,696 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:33:02,699 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:33:02,703 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:33:02,706 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-05 18:33:02,710 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:33:02,729 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-05 18:33:02,750 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-05 18:33:02,753 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 21.2652ms.
2020-06-05 18:33:02,755 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:33:02,757 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 48.8556ms
2020-06-05 18:33:02,760 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 64.3947ms 200 application/json; charset=utf-8
2020-06-05 18:33:15,993 [30] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v1/account/profile  
2020-06-05 18:33:15,997 [30] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:33:16,004 [30] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 8.0227ms 204 
2020-06-05 18:33:16,013 [30] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v1/account/profile  
2020-06-05 18:33:16,016 [30] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:33:16,022 [30] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:33:16,026 [30] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Profile() on controller DncZeus.Api.Controllers.AccountController (DncZeus.Api).
2020-06-05 18:33:16,029 [30] INFO  Microsoft.AspNetCore.Authorization.DefaultAuthorizationService [(null)]  - Authorization was successful.
2020-06-05 18:33:16,034 [30] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:33:16,071 [30] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) - Validation state: Valid
2020-06-05 18:33:16,133 [28] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (56ms) [Parameters=[@__Parse_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[ID], [x].[Code], [x].[Name], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser]
FROM [MisOrganization] AS [x]
WHERE [x].[ID] = @__Parse_0
2020-06-05 18:33:16,169 [28] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (31ms) [Parameters=[@__guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[EmpName], [x].[EmpNo], [x].[code], [x].[credate], [x].[creuser], [x].[depname], [x].[depno], [x].[email], [x].[enabled], [x].[jobname], [x].[jobno], [x].[moddate], [x].[moduser], [x].[pwd], [x].[telno], [x].[userLogo], [x].[username], [x].[userno], [x].[utype], [x].[wxAccount], [x].[wxId], [x].[wxMail], [x].[wxName], [x].[wxPhone], [x].[wxPwd]
FROM [Secuser] AS [x]
WHERE [x].[Guid] = @__guid_0
2020-06-05 18:33:16,214 [30] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[Alias], [x].[BeforeCloseFun], [x].[Component], [x].[CreatedByUserGuid], [x].[CreatedByUserName], [x].[CreatedOn], [x].[Description], [x].[HideInMenu], [x].[Icon], [x].[IsDefaultRouter], [x].[IsDeleted], [x].[Level], [x].[ModifiedByUserGuid], [x].[ModifiedByUserName], [x].[ModifiedOn], [x].[Name], [x].[NotCache], [x].[ParentGuid], [x].[ParentName], [x].[Sort], [x].[Status], [x].[Url]
FROM [DncMenu] AS [x]
WHERE ([x].[IsDeleted] = 0) AND ([x].[Status] = 1)
2020-06-05 18:33:16,250 [30] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (29ms) [Parameters=[@__user_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secuprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE [x].[userid] = @__user_Guid_0
ORDER BY [b0].[prgno]
2020-06-05 18:33:16,288 [30] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (35ms) [Parameters=[@__groupid_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secgprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE CONVERT(VARCHAR(36), [x].[groupid]) = @__groupid_0
ORDER BY [b0].[prgno]
2020-06-05 18:33:16,291 [30] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 217.5912ms.
2020-06-05 18:33:16,295 [30] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-05 18:33:16,299 [30] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) in 268.9748ms
2020-06-05 18:33:16,302 [30] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 289.6415ms 200 application/json; charset=utf-8
2020-06-05 18:33:16,312 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-05 18:33:16,314 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:33:16,317 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.0958ms 204 
2020-06-05 18:33:16,321 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-05 18:33:16,324 [10] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:33:16,327 [10] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:33:16,330 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "LoadMenuTree", controller = "Uprg"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult LoadMenuTree() on controller DncZeus.Api.Controllers.Api.Sec.UprgController (DncZeus.Api).
2020-06-05 18:33:16,333 [10] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:33:16,352 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) - Validation state: Valid
2020-06-05 18:33:16,381 [10] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (27ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[icon], [p].[sysname], [p].[sysno], [p].[sysorder]
FROM [Secsys] AS [p]
ORDER BY [p].[sysorder]
2020-06-05 18:33:16,406 [10] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[funname], [p].[funno], [p].[funorder], [p].[icon], [p].[sysid]
FROM [Secfun] AS [p]
ORDER BY [p].[funorder]
2020-06-05 18:33:16,433 [10] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[enabled], [x].[funid], [x].[icon], [x].[mainid], [x].[prgcomp], [x].[prgname], [x].[prgno], [x].[prgorder], [x].[prgtype], [x].[program], [x].[runtype], [x].[sysid]
FROM [Secprg] AS [x]
WHERE [x].[enabled] = 'Y'
ORDER BY [x].[prgorder]
2020-06-05 18:33:16,461 [10] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[butid], [p].[butname], [p].[butno], [p].[butorder], [p].[funid], [p].[prgid], [p].[sysid]
FROM [Secprgbut] AS [p]
ORDER BY [p].[butorder]
2020-06-05 18:33:16,464 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 109.7469ms.
2020-06-05 18:33:16,466 [10] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-05 18:33:16,469 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) in 136.6549ms
2020-06-05 18:33:16,472 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 150.9733ms 200 application/json; charset=utf-8
2020-06-05 18:33:17,031 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/Upload/img/20200627040310.png  
2020-06-05 18:33:17,034 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 3.2128ms 404 
2020-06-05 18:33:17,054 [30] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-06-05 18:33:17,057 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:33:17,086 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:33:17,090 [30] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:33:17,094 [28] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-06-05 18:33:17,101 [30] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 42.7466ms 204 
2020-06-05 18:33:17,104 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 48.6601ms 204 
2020-06-05 18:33:17,114 [30] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-06-05 18:33:17,110 [28] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:33:17,153 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:33:17,172 [28] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 70.4668ms 204 
2020-06-05 18:33:17,177 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:33:17,180 [30] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:33:17,183 [28] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 170
2020-06-05 18:33:17,189 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:33:17,191 [30] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:33:17,194 [28] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:33:17,205 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-05 18:33:17,207 [30] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-06-05 18:33:17,210 [28] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:33:17,214 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:33:17,216 [30] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:33:17,220 [28] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:33:17,257 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-05 18:33:17,267 [30] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:33:17,288 [28] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:33:17,322 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (29ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-05 18:33:17,346 [30] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (38ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-06-05 18:33:17,347 [28] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:33:17,349 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 87.6187ms.
2020-06-05 18:33:17,387 [30] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-06-05 18:33:17,388 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:33:17,392 [28] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-05 18:33:17,393 [30] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 101.692ms.
2020-06-05 18:33:17,396 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 182.7614ms
2020-06-05 18:33:17,419 [30] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:33:17,421 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 303.3871ms 200 application/json; charset=utf-8
2020-06-05 18:33:17,423 [28] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (25ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-05 18:33:17,428 [30] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 212.6004ms
2020-06-05 18:33:17,429 [28] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 75.8084ms.
2020-06-05 18:33:17,433 [30] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 323.6462ms 200 application/json; charset=utf-8
2020-06-05 18:33:17,434 [28] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:33:17,439 [28] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 198.1047ms
2020-06-05 18:33:17,443 [28] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 264.1565ms 200 application/json; charset=utf-8
2020-06-05 18:33:17,478 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-05 18:33:17,480 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:33:17,483 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 4.5295ms 204 
2020-06-05 18:33:17,487 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 170
2020-06-05 18:33:17,490 [10] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:33:17,493 [10] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:33:17,496 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:33:17,499 [10] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:33:17,520 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-05 18:33:17,544 [10] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL) AND ([x].[qty] = 0.0)
2020-06-05 18:33:17,568 [10] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-05 18:33:17,590 [10] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-05 18:33:17,594 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 70.7336ms.
2020-06-05 18:33:17,596 [10] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:33:17,599 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 100.5063ms
2020-06-05 18:33:17,601 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 114.0362ms 200 application/json; charset=utf-8
2020-06-05 18:33:18,132 [27] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8  
2020-06-05 18:33:18,134 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8  
2020-06-05 18:33:18,135 [30] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workprocess/list?api-version=8  
2020-06-05 18:33:18,148 [30] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:33:18,152 [27] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:33:18,160 [10] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:33:18,165 [27] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 25.6408ms 204 
2020-06-05 18:33:18,178 [30] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 21.7044ms 204 
2020-06-05 18:33:18,180 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 49.0862ms 204 
2020-06-05 18:33:18,185 [27] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8 application/json;charset=UTF-8 131
2020-06-05 18:33:18,187 [30] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workprocess/list?api-version=8 application/json;charset=UTF-8 150
2020-06-05 18:33:18,189 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 139
2020-06-05 18:33:18,194 [30] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:33:18,195 [27] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:33:18,199 [10] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:33:18,202 [27] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:33:18,204 [30] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:33:18,206 [10] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:33:18,209 [27] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkDate", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkDate(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-05 18:33:18,211 [30] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workprocess"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workprocess.WorkprocessRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkprocessController (DncZeus.Api).
2020-06-05 18:33:18,215 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-05 18:33:18,216 [27] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:33:18,218 [30] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:33:18,222 [10] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:33:18,253 [27] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) - Validation state: Valid
2020-06-05 18:33:18,254 [30] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:33:18,273 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-06-05 18:33:18,314 [27] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__payload_workDate_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[cadre], [x].[cadreLeave], [x].[cadreRest], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[logistic], [x].[logisticLeave], [x].[logisticRest], [x].[moddate], [x].[moduser], [x].[workDate], [x].[worker], [x].[workerLeave], [x].[workerRest]
FROM [ManFactoryWorkdate] AS [x]
WHERE ([x].[factoryGuid] = @__payload_factoryGuid_0) AND ([x].[workDate] = @__payload_workDate_1)
2020-06-05 18:33:18,361 [27] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 100.3409ms.
2020-06-05 18:33:18,365 [10] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (62ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty',isnull(h.targetOut ,0) as 'targetOut',isnull(h.realityOut,0) as 'realityOut',isnull(h.sumTime,0) as 'sumTime',isnull(h.status,0) as 'status'
from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=a.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=a.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=a.factoryGuid)
left join (
select sum(outline.output) as 'todayDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.factoryGuid
) as g on(g.factoryGuid=a.factoryGuid)
left join (
	select aa.targetOut,aa.realityOut,aa.sumTime,aa.factoryGuid,aa.status from ManFactoryWorkout aa where wrokDate=@p3 and factoryGuid=@p0
) as h on(h.factoryGuid=a.factoryGuid)
2020-06-05 18:33:18,366 [27] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-05 18:33:18,368 [30] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (62ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[factoryGuid], [t].[workCode], [t].[workName], [t].[rate], [t].[isvalid], [t].[credate], [t].[creuser], [t].[moddate], [t].[moduser], [t].[factoryName]
FROM (
    SELECT [a].[Guid], [a].[OrgID], [a].[factoryGuid], [a].[workCode], [a].[workName], [a].[rate], [a].[isvalid], [a].[credate], [a].[creuser], [a].[moddate], [a].[moduser], [b].[name] AS [factoryName], ROW_NUMBER() OVER(ORDER BY [a].[factoryGuid], [a].[workCode]) AS [__RowNumber__]
    FROM [ManWorkProcess] AS [a]
    INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
    WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-05 18:33:18,372 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 74.763ms.
2020-06-05 18:33:18,376 [27] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) in 157.466ms
2020-06-05 18:33:18,401 [10] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:33:18,405 [30] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkProcess] AS [a]
INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
2020-06-05 18:33:18,406 [27] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 221.8103ms 200 application/json; charset=utf-8
2020-06-05 18:33:18,411 [30] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 135.7729ms.
2020-06-05 18:33:18,412 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 188.7641ms
2020-06-05 18:33:18,414 [30] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:33:18,416 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 229.5523ms 200 application/json; charset=utf-8
2020-06-05 18:33:18,427 [30] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) in 204.4468ms
2020-06-05 18:33:18,437 [30] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 248.3266ms 200 application/json; charset=utf-8
2020-06-05 18:33:18,672 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 206
2020-06-05 18:33:18,676 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:33:18,679 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:33:18,683 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:33:18,686 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:33:18,706 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-05 18:33:18,734 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND ([x].[qty] = 0.0)
2020-06-05 18:33:18,757 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid), @__item_workName_2='?' (Size = 30) (DbType = AnsiString), @__item_workName_3='?' (Size = 30) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ((([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND (([b0].[workName] <> @__item_workName_2) OR [b0].[workName] IS NULL)) AND (([b0].[workName] <> @__item_workName_3) OR [b0].[workName] IS NULL)
2020-06-05 18:33:18,782 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid), @__item_workName_2='?' (Size = 30) (DbType = AnsiString), @__item_workName_3='?' (Size = 30) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ((([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND (([b0].[workName] <> @__item_workName_2) OR [b0].[workName] IS NULL)) AND (([b0].[workName] <> @__item_workName_3) OR [b0].[workName] IS NULL)
2020-06-05 18:33:18,784 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 75.2897ms.
2020-06-05 18:33:18,786 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:33:18,789 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 102.937ms
2020-06-05 18:33:18,794 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 120.4234ms 200 application/json; charset=utf-8
2020-06-05 18:33:19,816 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 242
2020-06-05 18:33:19,819 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:33:19,822 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:33:19,826 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:33:19,830 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:33:19,852 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:33:19,877 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-05 18:33:19,904 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-05 18:33:19,910 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 52.8087ms.
2020-06-05 18:33:19,915 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:33:19,918 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 89.2122ms
2020-06-05 18:33:19,922 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 105.1563ms 200 application/json; charset=utf-8
2020-06-05 18:33:19,957 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 242
2020-06-05 18:33:19,960 [10] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:33:19,964 [10] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:33:19,967 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:33:19,972 [10] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:33:19,990 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-05 18:33:20,012 [10] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND ([x].[qty] = 0.0)
2020-06-05 18:33:20,035 [10] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid), @__item_workName_2='?' (Size = 30) (DbType = AnsiString), @__item_workName_3='?' (Size = 30) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ((([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND (([b0].[workName] <> @__item_workName_2) OR [b0].[workName] IS NULL)) AND (([b0].[workName] <> @__item_workName_3) OR [b0].[workName] IS NULL)
2020-06-05 18:33:20,067 [10] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid), @__item_workName_2='?' (Size = 30) (DbType = AnsiString), @__item_workName_3='?' (Size = 30) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ((([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND (([b0].[workName] <> @__item_workName_2) OR [b0].[workName] IS NULL)) AND (([b0].[workName] <> @__item_workName_3) OR [b0].[workName] IS NULL)
2020-06-05 18:33:20,078 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 78.7806ms.
2020-06-05 18:33:20,083 [10] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:33:20,087 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 115.6127ms
2020-06-05 18:33:20,091 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 132.5871ms 200 application/json; charset=utf-8
2020-06-05 18:34:36,733 [36] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v1/account/profile  
2020-06-05 18:34:36,751 [36] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:34:36,755 [36] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 20.4645ms 204 
2020-06-05 18:34:36,771 [36] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v1/account/profile  
2020-06-05 18:34:36,784 [36] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:34:36,791 [36] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:34:36,805 [36] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Profile() on controller DncZeus.Api.Controllers.AccountController (DncZeus.Api).
2020-06-05 18:34:36,810 [36] INFO  Microsoft.AspNetCore.Authorization.DefaultAuthorizationService [(null)]  - Authorization was successful.
2020-06-05 18:34:36,813 [36] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:34:36,845 [36] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) - Validation state: Valid
2020-06-05 18:34:36,882 [40] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (31ms) [Parameters=[@__Parse_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[ID], [x].[Code], [x].[Name], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser]
FROM [MisOrganization] AS [x]
WHERE [x].[ID] = @__Parse_0
2020-06-05 18:34:36,929 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (44ms) [Parameters=[@__guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[EmpName], [x].[EmpNo], [x].[code], [x].[credate], [x].[creuser], [x].[depname], [x].[depno], [x].[email], [x].[enabled], [x].[jobname], [x].[jobno], [x].[moddate], [x].[moduser], [x].[pwd], [x].[telno], [x].[userLogo], [x].[username], [x].[userno], [x].[utype], [x].[wxAccount], [x].[wxId], [x].[wxMail], [x].[wxName], [x].[wxPhone], [x].[wxPwd]
FROM [Secuser] AS [x]
WHERE [x].[Guid] = @__guid_0
2020-06-05 18:34:36,954 [36] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[Alias], [x].[BeforeCloseFun], [x].[Component], [x].[CreatedByUserGuid], [x].[CreatedByUserName], [x].[CreatedOn], [x].[Description], [x].[HideInMenu], [x].[Icon], [x].[IsDefaultRouter], [x].[IsDeleted], [x].[Level], [x].[ModifiedByUserGuid], [x].[ModifiedByUserName], [x].[ModifiedOn], [x].[Name], [x].[NotCache], [x].[ParentGuid], [x].[ParentName], [x].[Sort], [x].[Status], [x].[Url]
FROM [DncMenu] AS [x]
WHERE ([x].[IsDeleted] = 0) AND ([x].[Status] = 1)
2020-06-05 18:34:36,979 [36] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__user_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secuprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE [x].[userid] = @__user_Guid_0
ORDER BY [b0].[prgno]
2020-06-05 18:34:37,015 [36] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (30ms) [Parameters=[@__groupid_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secgprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE CONVERT(VARCHAR(36), [x].[groupid]) = @__groupid_0
ORDER BY [b0].[prgno]
2020-06-05 18:34:37,021 [36] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 170.8238ms.
2020-06-05 18:34:37,026 [36] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-05 18:34:37,029 [36] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) in 219.9883ms
2020-06-05 18:34:37,041 [36] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 265.0193ms 200 application/json; charset=utf-8
2020-06-05 18:34:37,046 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-05 18:34:37,049 [41] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:34:37,053 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 6.4281ms 204 
2020-06-05 18:34:37,059 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-05 18:34:37,062 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:34:37,064 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:34:37,067 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "LoadMenuTree", controller = "Uprg"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult LoadMenuTree() on controller DncZeus.Api.Controllers.Api.Sec.UprgController (DncZeus.Api).
2020-06-05 18:34:37,070 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:34:37,089 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) - Validation state: Valid
2020-06-05 18:34:37,113 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[icon], [p].[sysname], [p].[sysno], [p].[sysorder]
FROM [Secsys] AS [p]
ORDER BY [p].[sysorder]
2020-06-05 18:34:37,135 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[funname], [p].[funno], [p].[funorder], [p].[icon], [p].[sysid]
FROM [Secfun] AS [p]
ORDER BY [p].[funorder]
2020-06-05 18:34:37,161 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[enabled], [x].[funid], [x].[icon], [x].[mainid], [x].[prgcomp], [x].[prgname], [x].[prgno], [x].[prgorder], [x].[prgtype], [x].[program], [x].[runtype], [x].[sysid]
FROM [Secprg] AS [x]
WHERE [x].[enabled] = 'Y'
ORDER BY [x].[prgorder]
2020-06-05 18:34:37,186 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[butid], [p].[butname], [p].[butno], [p].[butorder], [p].[funid], [p].[prgid], [p].[sysid]
FROM [Secprgbut] AS [p]
ORDER BY [p].[butorder]
2020-06-05 18:34:37,191 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 97.4157ms.
2020-06-05 18:34:37,194 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-05 18:34:37,197 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) in 127.3672ms
2020-06-05 18:34:37,199 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 140.0817ms 200 application/json; charset=utf-8
2020-06-05 18:34:37,916 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/Upload/img/20200627040310.png  
2020-06-05 18:34:37,919 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 2.7426ms 404 
2020-06-05 18:34:37,945 [32] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-06-05 18:34:37,949 [32] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:34:37,950 [40] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:34:37,958 [39] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-06-05 18:34:37,965 [32] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 10.0639ms 204 
2020-06-05 18:34:37,968 [40] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:34:37,974 [40] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 22.8099ms 204 
2020-06-05 18:34:37,977 [39] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:34:37,980 [32] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-06-05 18:34:37,986 [39] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 31.2852ms 204 
2020-06-05 18:34:37,988 [40] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:34:38,004 [32] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:34:38,008 [40] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:34:38,010 [39] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 170
2020-06-05 18:34:38,013 [32] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:34:38,015 [40] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:34:38,017 [39] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:34:38,024 [32] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-06-05 18:34:38,026 [39] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:34:38,029 [40] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-05 18:34:38,033 [39] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:34:38,037 [32] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:34:38,039 [39] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:34:38,042 [40] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:34:38,097 [32] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:34:38,099 [39] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:34:38,100 [40] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-05 18:34:38,160 [32] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (54ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-06-05 18:34:38,162 [39] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (37ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-05 18:34:38,163 [40] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (35ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-05 18:34:38,199 [40] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 76.5217ms.
2020-06-05 18:34:38,206 [32] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (34ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-06-05 18:34:38,211 [40] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:34:38,213 [32] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 110.651ms.
2020-06-05 18:34:38,208 [39] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (36ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-05 18:34:38,225 [40] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 181.6735ms
2020-06-05 18:34:38,229 [32] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:34:38,233 [39] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 126.6008ms.
2020-06-05 18:34:38,237 [32] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 201.5191ms
2020-06-05 18:34:38,240 [40] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 249.3727ms 200 application/json; charset=utf-8
2020-06-05 18:34:38,244 [39] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:34:38,247 [32] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 268.6384ms 200 application/json; charset=utf-8
2020-06-05 18:34:38,251 [39] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 210.5088ms
2020-06-05 18:34:38,258 [39] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 245.0598ms 200 application/json; charset=utf-8
2020-06-05 18:34:38,308 [39] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-05 18:34:38,313 [39] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:34:38,316 [39] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 10.321ms 204 
2020-06-05 18:34:38,319 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 170
2020-06-05 18:34:38,322 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:34:38,326 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:34:38,330 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:34:38,333 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:34:38,357 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-05 18:34:38,382 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL) AND ([x].[qty] = 0.0)
2020-06-05 18:34:38,408 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-05 18:34:38,443 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (31ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-05 18:34:38,445 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 85.9596ms.
2020-06-05 18:34:38,451 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:34:38,454 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 121.317ms
2020-06-05 18:34:38,458 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 137.8031ms 200 application/json; charset=utf-8
2020-06-05 18:34:39,463 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8  
2020-06-05 18:34:39,465 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8  
2020-06-05 18:34:39,467 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workprocess/list?api-version=8  
2020-06-05 18:34:39,471 [42] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:34:39,474 [41] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:34:39,476 [43] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:34:39,485 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 14.2393ms 204 
2020-06-05 18:34:39,491 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 18.022ms 204 
2020-06-05 18:34:39,493 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 13.6739ms 204 
2020-06-05 18:34:39,507 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8 application/json;charset=UTF-8 131
2020-06-05 18:34:39,510 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workprocess/list?api-version=8 application/json;charset=UTF-8 150
2020-06-05 18:34:39,511 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 139
2020-06-05 18:34:39,514 [41] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:34:39,516 [43] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:34:39,520 [41] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:34:39,523 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:34:39,525 [43] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:34:39,527 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkDate", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkDate(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-05 18:34:39,538 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:34:39,541 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workprocess"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workprocess.WorkprocessRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkprocessController (DncZeus.Api).
2020-06-05 18:34:39,544 [41] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:34:39,548 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-05 18:34:39,549 [43] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:34:39,566 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) - Validation state: Valid
2020-06-05 18:34:39,568 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:34:39,584 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:34:39,641 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (34ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__payload_workDate_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[cadre], [x].[cadreLeave], [x].[cadreRest], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[logistic], [x].[logisticLeave], [x].[logisticRest], [x].[moddate], [x].[moduser], [x].[workDate], [x].[worker], [x].[workerLeave], [x].[workerRest]
FROM [ManFactoryWorkdate] AS [x]
WHERE ([x].[factoryGuid] = @__payload_factoryGuid_0) AND ([x].[workDate] = @__payload_workDate_1)
2020-06-05 18:34:39,643 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-06-05 18:34:39,672 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 100.4236ms.
2020-06-05 18:34:39,706 [43] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (29ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[factoryGuid], [t].[workCode], [t].[workName], [t].[rate], [t].[isvalid], [t].[credate], [t].[creuser], [t].[moddate], [t].[moduser], [t].[factoryName]
FROM (
    SELECT [a].[Guid], [a].[OrgID], [a].[factoryGuid], [a].[workCode], [a].[workName], [a].[rate], [a].[isvalid], [a].[credate], [a].[creuser], [a].[moddate], [a].[moduser], [b].[name] AS [factoryName], ROW_NUMBER() OVER(ORDER BY [a].[factoryGuid], [a].[workCode]) AS [__RowNumber__]
    FROM [ManWorkProcess] AS [a]
    INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
    WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-05 18:34:39,709 [41] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-05 18:34:39,711 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (38ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty',isnull(h.targetOut ,0) as 'targetOut',isnull(h.realityOut,0) as 'realityOut',isnull(h.sumTime,0) as 'sumTime',isnull(h.status,0) as 'status'
from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=a.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=a.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=a.factoryGuid)
left join (
select sum(outline.output) as 'todayDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.factoryGuid
) as g on(g.factoryGuid=a.factoryGuid)
left join (
	select aa.targetOut,aa.realityOut,aa.sumTime,aa.factoryGuid,aa.status from ManFactoryWorkout aa where wrokDate=@p3 and factoryGuid=@p0
) as h on(h.factoryGuid=a.factoryGuid)
2020-06-05 18:34:39,745 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) in 200.2109ms
2020-06-05 18:34:39,747 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 68.3553ms.
2020-06-05 18:34:39,750 [43] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (26ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkProcess] AS [a]
INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
2020-06-05 18:34:39,752 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 253.3568ms 200 application/json; charset=utf-8
2020-06-05 18:34:39,758 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:34:39,759 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 150.7103ms.
2020-06-05 18:34:39,763 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 195.2673ms
2020-06-05 18:34:39,771 [43] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:34:39,775 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 261.0944ms 200 application/json; charset=utf-8
2020-06-05 18:34:39,779 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) in 229.0453ms
2020-06-05 18:34:39,783 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 283.7042ms 200 application/json; charset=utf-8
2020-06-05 18:34:49,040 [36] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-05 18:34:49,042 [36] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:34:49,048 [36] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.6404ms 204 
2020-06-05 18:34:49,051 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 206
2020-06-05 18:34:49,055 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:34:49,058 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:34:49,061 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:34:49,065 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:34:49,092 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-05 18:34:49,117 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND ([x].[qty] = 0.0)
2020-06-05 18:34:49,144 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid), @__item_workName_2='?' (Size = 30) (DbType = AnsiString), @__item_workName_3='?' (Size = 30) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ((([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND (([b0].[workName] <> @__item_workName_2) OR [b0].[workName] IS NULL)) AND (([b0].[workName] <> @__item_workName_3) OR [b0].[workName] IS NULL)
2020-06-05 18:34:49,174 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid), @__item_workName_2='?' (Size = 30) (DbType = AnsiString), @__item_workName_3='?' (Size = 30) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ((([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND (([b0].[workName] <> @__item_workName_2) OR [b0].[workName] IS NULL)) AND (([b0].[workName] <> @__item_workName_3) OR [b0].[workName] IS NULL)
2020-06-05 18:34:49,177 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 81.9302ms.
2020-06-05 18:34:49,180 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:34:49,182 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 119.0194ms
2020-06-05 18:34:49,184 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 135.0179ms 200 application/json; charset=utf-8
2020-06-05 18:34:50,058 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-06-05 18:34:50,060 [41] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:34:50,065 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 7.0286ms 204 
2020-06-05 18:34:50,067 [36] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 242
2020-06-05 18:34:50,069 [36] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:34:50,071 [36] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:34:50,074 [36] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:34:50,076 [36] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:34:50,094 [36] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:34:50,116 [36] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-05 18:34:50,141 [36] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-05 18:34:50,144 [36] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 47.4267ms.
2020-06-05 18:34:50,147 [36] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:34:50,149 [36] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 72.9844ms
2020-06-05 18:34:50,151 [36] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 84.4212ms 200 application/json; charset=utf-8
2020-06-05 18:34:50,181 [36] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 242
2020-06-05 18:34:50,184 [36] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:34:50,186 [36] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:34:50,190 [36] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:34:50,194 [36] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:34:50,214 [36] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-05 18:34:50,237 [36] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND ([x].[qty] = 0.0)
2020-06-05 18:34:50,262 [36] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid), @__item_workName_2='?' (Size = 30) (DbType = AnsiString), @__item_workName_3='?' (Size = 30) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ((([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND (([b0].[workName] <> @__item_workName_2) OR [b0].[workName] IS NULL)) AND (([b0].[workName] <> @__item_workName_3) OR [b0].[workName] IS NULL)
2020-06-05 18:34:50,284 [36] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid), @__item_workName_2='?' (Size = 30) (DbType = AnsiString), @__item_workName_3='?' (Size = 30) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ((([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND (([b0].[workName] <> @__item_workName_2) OR [b0].[workName] IS NULL)) AND (([b0].[workName] <> @__item_workName_3) OR [b0].[workName] IS NULL)
2020-06-05 18:34:50,286 [36] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 70.7497ms.
2020-06-05 18:34:50,288 [36] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:34:50,291 [36] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 97.8424ms
2020-06-05 18:34:50,296 [36] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 113.6225ms 200 application/json; charset=utf-8
2020-06-05 18:34:55,450 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/editQty?api-version=8  
2020-06-05 18:34:55,453 [43] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:34:55,457 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.6556ms 204 
2020-06-05 18:34:55,460 [36] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/editQty?api-version=8 application/json;charset=UTF-8 163
2020-06-05 18:34:55,464 [36] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:34:55,467 [36] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:34:55,470 [36] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "EditQty", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult EditQty(DncZeus.Api.ViewModels.Man.Workshop.QueryWorkshopout) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:34:55,473 [36] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:34:55,493 [36] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.EditQty (DncZeus.Api) - Validation state: Valid
2020-06-05 18:34:55,518 [36] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__model_workshopOutGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[countType], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[factoryPrice], [x].[itemCode], [x].[itemName], [x].[ordCode], [x].[ordQty], [x].[sumQty], [x].[workProcessGuid]
FROM [ManWorkshopOut] AS [x]
WHERE [x].[Guid] = @__model_workshopOutGuid_0
2020-06-05 18:34:55,551 [36] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (26ms) [Parameters=[@__model_workDate_0='?' (DbType = DateTime2), @__model_workshopOutGuid_1='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser], [x].[output], [x].[qty], [x].[remark], [x].[workDate], [x].[workshopOutGuid]
FROM [ManWorkshopOutLine] AS [x]
WHERE ([x].[workDate] = @__model_workDate_0) AND ([x].[workshopOutGuid] = @__model_workshopOutGuid_1)
2020-06-05 18:34:55,576 [36] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal)], CommandType='Text', CommandTimeout='6000000']
SET NOCOUNT ON;
UPDATE [ManWorkshopOutLine] SET [output] = @p0, [qty] = @p1
WHERE [Guid] = @p2;
SELECT @@ROWCOUNT;
2020-06-05 18:34:55,579 [36] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.EditQty (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 84.023ms.
2020-06-05 18:34:55,582 [36] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-05 18:34:55,584 [36] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.EditQty (DncZeus.Api) in 111.434ms
2020-06-05 18:34:55,587 [36] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 127.3108ms 200 application/json; charset=utf-8
2020-06-05 18:34:55,614 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-06-05 18:34:55,617 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:34:55,620 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.179ms 204 
2020-06-05 18:34:55,626 [32] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 242
2020-06-05 18:34:55,628 [32] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:34:55,630 [32] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:34:55,632 [32] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:34:55,634 [32] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:34:55,654 [32] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:34:55,677 [32] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-05 18:34:55,698 [32] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-05 18:34:55,701 [32] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 44.1092ms.
2020-06-05 18:34:55,703 [32] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:34:55,707 [32] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 71.7029ms
2020-06-05 18:34:55,710 [32] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 85.027ms 200 application/json; charset=utf-8
2020-06-05 18:34:55,728 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-05 18:34:55,731 [42] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:34:55,734 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.1004ms 204 
2020-06-05 18:34:55,737 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 242
2020-06-05 18:34:55,739 [41] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:34:55,742 [41] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:34:55,744 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:34:55,746 [41] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:34:55,767 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-05 18:34:55,790 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND ([x].[qty] = 0.0)
2020-06-05 18:34:55,814 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid), @__item_workName_2='?' (Size = 30) (DbType = AnsiString), @__item_workName_3='?' (Size = 30) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ((([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND (([b0].[workName] <> @__item_workName_2) OR [b0].[workName] IS NULL)) AND (([b0].[workName] <> @__item_workName_3) OR [b0].[workName] IS NULL)
2020-06-05 18:34:55,836 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid), @__item_workName_2='?' (Size = 30) (DbType = AnsiString), @__item_workName_3='?' (Size = 30) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ((([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND (([b0].[workName] <> @__item_workName_2) OR [b0].[workName] IS NULL)) AND (([b0].[workName] <> @__item_workName_3) OR [b0].[workName] IS NULL)
2020-06-05 18:34:55,838 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 69.5873ms.
2020-06-05 18:34:55,841 [41] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:34:55,844 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 97.157ms
2020-06-05 18:34:55,847 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 109.1992ms 200 application/json; charset=utf-8
2020-06-05 18:35:07,836 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:35:07,839 [43] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:35:07,842 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.5457ms 204 
2020-06-05 18:35:07,847 [32] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:35:07,850 [32] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:35:07,853 [32] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:35:07,856 [32] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-05 18:35:07,859 [32] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:35:07,882 [32] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-05 18:35:07,908 [32] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-05 18:35:07,912 [32] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 26.8649ms.
2020-06-05 18:35:07,914 [32] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:35:07,916 [32] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 57.5327ms
2020-06-05 18:35:07,919 [32] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 71.9033ms 200 application/json; charset=utf-8
2020-06-05 18:35:12,816 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/editQty?api-version=8  
2020-06-05 18:35:12,819 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:35:12,822 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.8177ms 204 
2020-06-05 18:35:12,825 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/editQty?api-version=8 application/json;charset=UTF-8 160
2020-06-05 18:35:12,829 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:35:12,831 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:35:12,834 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "EditQty", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult EditQty(DncZeus.Api.ViewModels.Man.Workshop.QueryWorkshopout) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:35:12,836 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:35:12,856 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.EditQty (DncZeus.Api) - Validation state: Valid
2020-06-05 18:35:12,881 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__model_workshopOutGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[countType], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[factoryPrice], [x].[itemCode], [x].[itemName], [x].[ordCode], [x].[ordQty], [x].[sumQty], [x].[workProcessGuid]
FROM [ManWorkshopOut] AS [x]
WHERE [x].[Guid] = @__model_workshopOutGuid_0
2020-06-05 18:35:12,907 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__model_workDate_0='?' (DbType = DateTime2), @__model_workshopOutGuid_1='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser], [x].[output], [x].[qty], [x].[remark], [x].[workDate], [x].[workshopOutGuid]
FROM [ManWorkshopOutLine] AS [x]
WHERE ([x].[workDate] = @__model_workDate_0) AND ([x].[workshopOutGuid] = @__model_workshopOutGuid_1)
2020-06-05 18:35:12,935 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal)], CommandType='Text', CommandTimeout='6000000']
SET NOCOUNT ON;
UPDATE [ManWorkshopOutLine] SET [output] = @p0, [qty] = @p1
WHERE [Guid] = @p2;
SELECT @@ROWCOUNT;
2020-06-05 18:35:12,939 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.EditQty (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 79.3472ms.
2020-06-05 18:35:12,941 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-05 18:35:12,944 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.EditQty (DncZeus.Api) in 107.4016ms
2020-06-05 18:35:12,947 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 121.7005ms 200 application/json; charset=utf-8
2020-06-05 18:35:12,978 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-06-05 18:35:12,981 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:35:12,986 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.9924ms 204 
2020-06-05 18:35:12,990 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 242
2020-06-05 18:35:12,994 [41] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:35:12,996 [41] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:35:13,000 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:35:13,004 [41] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:35:13,024 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:35:13,048 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-05 18:35:13,073 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-05 18:35:13,078 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 48.5458ms.
2020-06-05 18:35:13,080 [41] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:35:13,083 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 79.0372ms
2020-06-05 18:35:13,085 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 95.4946ms 200 application/json; charset=utf-8
2020-06-05 18:35:13,103 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-05 18:35:13,106 [42] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:35:13,110 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.749ms 204 
2020-06-05 18:35:13,112 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 242
2020-06-05 18:35:13,114 [41] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:35:13,116 [41] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:35:13,118 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:35:13,120 [41] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:35:13,137 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-05 18:35:13,161 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND ([x].[qty] = 0.0)
2020-06-05 18:35:13,183 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid), @__item_workName_2='?' (Size = 30) (DbType = AnsiString), @__item_workName_3='?' (Size = 30) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ((([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND (([b0].[workName] <> @__item_workName_2) OR [b0].[workName] IS NULL)) AND (([b0].[workName] <> @__item_workName_3) OR [b0].[workName] IS NULL)
2020-06-05 18:35:13,205 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid), @__item_workName_2='?' (Size = 30) (DbType = AnsiString), @__item_workName_3='?' (Size = 30) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ((([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND (([b0].[workName] <> @__item_workName_2) OR [b0].[workName] IS NULL)) AND (([b0].[workName] <> @__item_workName_3) OR [b0].[workName] IS NULL)
2020-06-05 18:35:13,208 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 66.9184ms.
2020-06-05 18:35:13,210 [41] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:35:13,213 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 92.3637ms
2020-06-05 18:35:13,220 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 103.2748ms 200 application/json; charset=utf-8
2020-06-05 18:35:21,559 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8  
2020-06-05 18:35:21,562 [43] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:35:21,565 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.6452ms 204 
2020-06-05 18:35:21,570 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 139
2020-06-05 18:35:21,574 [41] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:35:21,577 [41] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:35:21,580 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-05 18:35:21,583 [41] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:35:21,604 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-06-05 18:35:21,629 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty',isnull(h.targetOut ,0) as 'targetOut',isnull(h.realityOut,0) as 'realityOut',isnull(h.sumTime,0) as 'sumTime',isnull(h.status,0) as 'status'
from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=a.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=a.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=a.factoryGuid)
left join (
select sum(outline.output) as 'todayDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.factoryGuid
) as g on(g.factoryGuid=a.factoryGuid)
left join (
	select aa.targetOut,aa.realityOut,aa.sumTime,aa.factoryGuid,aa.status from ManFactoryWorkout aa where wrokDate=@p3 and factoryGuid=@p0
) as h on(h.factoryGuid=a.factoryGuid)
2020-06-05 18:35:21,631 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 24.8703ms.
2020-06-05 18:35:21,638 [41] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:35:21,643 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 58.6527ms
2020-06-05 18:35:21,645 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 76.625ms 200 application/json; charset=utf-8
2020-06-05 18:35:28,649 [36] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-05 18:35:28,652 [36] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:35:28,657 [36] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 6.9678ms 204 
2020-06-05 18:35:28,663 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 242
2020-06-05 18:35:28,666 [42] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:35:28,674 [42] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:35:28,677 [42] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:35:28,680 [42] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:35:28,702 [42] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-05 18:35:28,731 [42] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (25ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND ([x].[qty] = 0.0)
2020-06-05 18:35:28,756 [42] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid), @__item_workName_2='?' (Size = 30) (DbType = AnsiString), @__item_workName_3='?' (Size = 30) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ((([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND (([b0].[workName] <> @__item_workName_2) OR [b0].[workName] IS NULL)) AND (([b0].[workName] <> @__item_workName_3) OR [b0].[workName] IS NULL)
2020-06-05 18:35:28,781 [42] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid), @__item_workName_2='?' (Size = 30) (DbType = AnsiString), @__item_workName_3='?' (Size = 30) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ((([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND (([b0].[workName] <> @__item_workName_2) OR [b0].[workName] IS NULL)) AND (([b0].[workName] <> @__item_workName_3) OR [b0].[workName] IS NULL)
2020-06-05 18:35:28,785 [42] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 79.1889ms.
2020-06-05 18:35:28,787 [42] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:35:28,791 [42] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 110.7101ms
2020-06-05 18:35:28,794 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 130.5791ms 200 application/json; charset=utf-8
2020-06-05 18:35:35,569 [36] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-06-05 18:35:35,573 [36] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:35:35,580 [36] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 7.7722ms 204 
2020-06-05 18:35:35,582 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 242
2020-06-05 18:35:35,586 [42] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:35:35,588 [42] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:35:35,592 [42] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:35:35,596 [42] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:35:35,616 [42] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:35:35,638 [42] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-05 18:35:35,665 [42] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-05 18:35:35,667 [42] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 49.6503ms.
2020-06-05 18:35:35,670 [42] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:35:35,675 [42] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 78.5518ms
2020-06-05 18:35:35,679 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 95.6233ms 200 application/json; charset=utf-8
2020-06-05 18:35:35,698 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-05 18:35:35,701 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:35:35,705 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.6722ms 204 
2020-06-05 18:35:35,708 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 242
2020-06-05 18:35:35,710 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:35:35,713 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:35:35,716 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:35:35,719 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:35:35,740 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-05 18:35:35,764 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND ([x].[qty] = 0.0)
2020-06-05 18:35:35,786 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid), @__item_workName_2='?' (Size = 30) (DbType = AnsiString), @__item_workName_3='?' (Size = 30) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ((([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND (([b0].[workName] <> @__item_workName_2) OR [b0].[workName] IS NULL)) AND (([b0].[workName] <> @__item_workName_3) OR [b0].[workName] IS NULL)
2020-06-05 18:35:35,809 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid), @__item_workName_2='?' (Size = 30) (DbType = AnsiString), @__item_workName_3='?' (Size = 30) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ((([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND (([b0].[workName] <> @__item_workName_2) OR [b0].[workName] IS NULL)) AND (([b0].[workName] <> @__item_workName_3) OR [b0].[workName] IS NULL)
2020-06-05 18:35:35,811 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 68.8065ms.
2020-06-05 18:35:35,813 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:35:35,816 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 96.2867ms
2020-06-05 18:35:35,818 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 110.0058ms 200 application/json; charset=utf-8
2020-06-05 18:35:37,834 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:35:37,836 [42] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:35:37,839 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 4.5742ms 204 
2020-06-05 18:35:37,842 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:35:37,844 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:35:37,846 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:35:37,848 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-05 18:35:37,850 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:35:37,867 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-05 18:35:37,890 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-05 18:35:37,892 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.8716ms.
2020-06-05 18:35:37,895 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:35:37,897 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 46.9542ms
2020-06-05 18:35:37,899 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 57.3453ms 200 application/json; charset=utf-8
2020-06-05 18:35:40,949 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-06-05 18:35:40,954 [42] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:35:40,958 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 8.4922ms 204 
2020-06-05 18:35:40,960 [39] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 242
2020-06-05 18:35:40,962 [39] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:35:40,964 [39] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:35:40,969 [39] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:35:40,972 [39] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:35:40,991 [39] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:35:41,014 [39] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-05 18:35:41,038 [39] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-05 18:35:41,041 [39] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 47.1712ms.
2020-06-05 18:35:41,043 [39] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:35:41,047 [39] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 74.39ms
2020-06-05 18:35:41,050 [39] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 89.413ms 200 application/json; charset=utf-8
2020-06-05 18:35:41,074 [39] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-05 18:35:41,077 [39] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:35:41,081 [39] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.2794ms 204 
2020-06-05 18:35:41,083 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 242
2020-06-05 18:35:41,088 [41] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:35:41,091 [41] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:35:41,096 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:35:41,099 [41] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:35:41,117 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-05 18:35:41,140 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND ([x].[qty] = 0.0)
2020-06-05 18:35:41,165 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid), @__item_workName_2='?' (Size = 30) (DbType = AnsiString), @__item_workName_3='?' (Size = 30) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ((([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND (([b0].[workName] <> @__item_workName_2) OR [b0].[workName] IS NULL)) AND (([b0].[workName] <> @__item_workName_3) OR [b0].[workName] IS NULL)
2020-06-05 18:35:41,188 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid), @__item_workName_2='?' (Size = 30) (DbType = AnsiString), @__item_workName_3='?' (Size = 30) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ((([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND (([b0].[workName] <> @__item_workName_2) OR [b0].[workName] IS NULL)) AND (([b0].[workName] <> @__item_workName_3) OR [b0].[workName] IS NULL)
2020-06-05 18:35:41,191 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 71.0873ms.
2020-06-05 18:35:41,193 [41] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:35:41,195 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 96.8ms
2020-06-05 18:35:41,197 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 114.2473ms 200 application/json; charset=utf-8
2020-06-05 18:35:52,672 [36] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8  
2020-06-05 18:35:52,675 [36] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:35:52,679 [36] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 6.2488ms 204 
2020-06-05 18:35:52,681 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 139
2020-06-05 18:35:52,684 [42] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:35:52,687 [42] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:35:52,690 [42] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-05 18:35:52,694 [42] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:35:52,719 [42] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-06-05 18:35:52,744 [42] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty',isnull(h.targetOut ,0) as 'targetOut',isnull(h.realityOut,0) as 'realityOut',isnull(h.sumTime,0) as 'sumTime',isnull(h.status,0) as 'status'
from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=a.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=a.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=a.factoryGuid)
left join (
select sum(outline.output) as 'todayDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.factoryGuid
) as g on(g.factoryGuid=a.factoryGuid)
left join (
	select aa.targetOut,aa.realityOut,aa.sumTime,aa.factoryGuid,aa.status from ManFactoryWorkout aa where wrokDate=@p3 and factoryGuid=@p0
) as h on(h.factoryGuid=a.factoryGuid)
2020-06-05 18:35:52,749 [42] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 25.9102ms.
2020-06-05 18:35:52,752 [42] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:35:52,757 [42] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 62.9795ms
2020-06-05 18:35:52,759 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 77.9368ms 200 application/json; charset=utf-8
2020-06-05 18:36:07,834 [36] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:36:07,848 [36] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:36:07,851 [36] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 16.0373ms 204 
2020-06-05 18:36:07,866 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:36:07,869 [42] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:36:07,873 [42] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:36:07,877 [42] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-05 18:36:07,880 [42] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:36:07,901 [42] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-05 18:36:07,927 [42] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-05 18:36:07,929 [42] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 25.9039ms.
2020-06-05 18:36:07,931 [42] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:36:07,934 [42] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 54.3833ms
2020-06-05 18:36:07,937 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 70.0168ms 200 application/json; charset=utf-8
2020-06-05 18:36:18,475 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-05 18:36:18,478 [42] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:36:18,486 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 6.2509ms 204 
2020-06-05 18:36:18,489 [36] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 242
2020-06-05 18:36:18,494 [36] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:36:18,499 [36] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:36:18,502 [36] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:36:18,506 [36] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:36:18,528 [36] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-05 18:36:18,554 [36] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND ([x].[qty] = 0.0)
2020-06-05 18:36:18,579 [36] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid), @__item_workName_2='?' (Size = 30) (DbType = AnsiString), @__item_workName_3='?' (Size = 30) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ((([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND (([b0].[workName] <> @__item_workName_2) OR [b0].[workName] IS NULL)) AND (([b0].[workName] <> @__item_workName_3) OR [b0].[workName] IS NULL)
2020-06-05 18:36:18,601 [36] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid), @__item_workName_2='?' (Size = 30) (DbType = AnsiString), @__item_workName_3='?' (Size = 30) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ((([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND (([b0].[workName] <> @__item_workName_2) OR [b0].[workName] IS NULL)) AND (([b0].[workName] <> @__item_workName_3) OR [b0].[workName] IS NULL)
2020-06-05 18:36:18,604 [36] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 72.4107ms.
2020-06-05 18:36:18,606 [36] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:36:18,610 [36] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 103.649ms
2020-06-05 18:36:18,615 [36] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 125.7132ms 200 application/json; charset=utf-8
2020-06-05 18:36:21,569 [36] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8  
2020-06-05 18:36:21,572 [36] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:36:21,579 [36] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 7.1486ms 204 
2020-06-05 18:36:21,583 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 139
2020-06-05 18:36:21,594 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:36:21,599 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:36:21,605 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-05 18:36:21,610 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:36:21,631 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-06-05 18:36:21,658 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty',isnull(h.targetOut ,0) as 'targetOut',isnull(h.realityOut,0) as 'realityOut',isnull(h.sumTime,0) as 'sumTime',isnull(h.status,0) as 'status'
from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=a.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=a.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=a.factoryGuid)
left join (
select sum(outline.output) as 'todayDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.factoryGuid
) as g on(g.factoryGuid=a.factoryGuid)
left join (
	select aa.targetOut,aa.realityOut,aa.sumTime,aa.factoryGuid,aa.status from ManFactoryWorkout aa where wrokDate=@p3 and factoryGuid=@p0
) as h on(h.factoryGuid=a.factoryGuid)
2020-06-05 18:36:21,662 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 27.2273ms.
2020-06-05 18:36:21,666 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:36:21,670 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 62.0809ms
2020-06-05 18:36:21,677 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 91.0118ms 200 application/json; charset=utf-8
2020-06-05 18:36:37,834 [39] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:36:37,847 [39] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:36:37,862 [39] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 16.754ms 204 
2020-06-05 18:36:37,871 [36] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:36:37,875 [36] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:36:37,885 [36] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:36:37,888 [36] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-05 18:36:37,890 [36] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:36:37,909 [36] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-05 18:36:37,932 [36] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-05 18:36:37,935 [36] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.9532ms.
2020-06-05 18:36:37,938 [36] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:36:37,942 [36] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 50.595ms
2020-06-05 18:36:37,946 [36] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 79.6733ms 200 application/json; charset=utf-8
2020-06-05 18:36:47,808 [39] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v1/account/profile  
2020-06-05 18:36:47,811 [39] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:36:47,813 [39] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.0668ms 204 
2020-06-05 18:36:47,819 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v1/account/profile  
2020-06-05 18:36:47,822 [41] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:36:47,825 [41] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:36:47,829 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Profile() on controller DncZeus.Api.Controllers.AccountController (DncZeus.Api).
2020-06-05 18:36:47,831 [41] INFO  Microsoft.AspNetCore.Authorization.DefaultAuthorizationService [(null)]  - Authorization was successful.
2020-06-05 18:36:47,836 [41] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:36:47,858 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) - Validation state: Valid
2020-06-05 18:36:47,893 [36] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (29ms) [Parameters=[@__Parse_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[ID], [x].[Code], [x].[Name], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser]
FROM [MisOrganization] AS [x]
WHERE [x].[ID] = @__Parse_0
2020-06-05 18:36:47,933 [52] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (34ms) [Parameters=[@__guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[EmpName], [x].[EmpNo], [x].[code], [x].[credate], [x].[creuser], [x].[depname], [x].[depno], [x].[email], [x].[enabled], [x].[jobname], [x].[jobno], [x].[moddate], [x].[moduser], [x].[pwd], [x].[telno], [x].[userLogo], [x].[username], [x].[userno], [x].[utype], [x].[wxAccount], [x].[wxId], [x].[wxMail], [x].[wxName], [x].[wxPhone], [x].[wxPwd]
FROM [Secuser] AS [x]
WHERE [x].[Guid] = @__guid_0
2020-06-05 18:36:47,971 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[Alias], [x].[BeforeCloseFun], [x].[Component], [x].[CreatedByUserGuid], [x].[CreatedByUserName], [x].[CreatedOn], [x].[Description], [x].[HideInMenu], [x].[Icon], [x].[IsDefaultRouter], [x].[IsDeleted], [x].[Level], [x].[ModifiedByUserGuid], [x].[ModifiedByUserName], [x].[ModifiedOn], [x].[Name], [x].[NotCache], [x].[ParentGuid], [x].[ParentName], [x].[Sort], [x].[Status], [x].[Url]
FROM [DncMenu] AS [x]
WHERE ([x].[IsDeleted] = 0) AND ([x].[Status] = 1)
2020-06-05 18:36:47,993 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__user_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secuprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE [x].[userid] = @__user_Guid_0
ORDER BY [b0].[prgno]
2020-06-05 18:36:48,014 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (18ms) [Parameters=[@__groupid_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secgprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE CONVERT(VARCHAR(36), [x].[groupid]) = @__groupid_0
ORDER BY [b0].[prgno]
2020-06-05 18:36:48,016 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 155.5862ms.
2020-06-05 18:36:48,020 [41] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-05 18:36:48,022 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) in 191.3394ms
2020-06-05 18:36:48,025 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 206.5992ms 200 application/json; charset=utf-8
2020-06-05 18:36:48,033 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-05 18:36:48,036 [41] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:36:48,039 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.8846ms 204 
2020-06-05 18:36:48,041 [36] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-05 18:36:48,043 [36] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:36:48,046 [36] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:36:48,048 [36] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "LoadMenuTree", controller = "Uprg"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult LoadMenuTree() on controller DncZeus.Api.Controllers.Api.Sec.UprgController (DncZeus.Api).
2020-06-05 18:36:48,050 [36] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:36:48,067 [36] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) - Validation state: Valid
2020-06-05 18:36:48,089 [36] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[icon], [p].[sysname], [p].[sysno], [p].[sysorder]
FROM [Secsys] AS [p]
ORDER BY [p].[sysorder]
2020-06-05 18:36:48,109 [36] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[funname], [p].[funno], [p].[funorder], [p].[icon], [p].[sysid]
FROM [Secfun] AS [p]
ORDER BY [p].[funorder]
2020-06-05 18:36:48,131 [36] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[enabled], [x].[funid], [x].[icon], [x].[mainid], [x].[prgcomp], [x].[prgname], [x].[prgno], [x].[prgorder], [x].[prgtype], [x].[program], [x].[runtype], [x].[sysid]
FROM [Secprg] AS [x]
WHERE [x].[enabled] = 'Y'
ORDER BY [x].[prgorder]
2020-06-05 18:36:48,154 [36] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[butid], [p].[butname], [p].[butno], [p].[butorder], [p].[funid], [p].[prgid], [p].[sysid]
FROM [Secprgbut] AS [p]
ORDER BY [p].[butorder]
2020-06-05 18:36:48,158 [36] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 87.3756ms.
2020-06-05 18:36:48,160 [36] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-05 18:36:48,163 [36] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) in 112.6195ms
2020-06-05 18:36:48,166 [36] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 123.9292ms 200 application/json; charset=utf-8
2020-06-05 18:36:48,650 [39] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/Upload/img/20200627040310.png  
2020-06-05 18:36:48,654 [39] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 2.9191ms 404 
2020-06-05 18:36:48,675 [36] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-06-05 18:36:48,677 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-06-05 18:36:48,679 [52] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:36:48,683 [36] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:36:48,686 [42] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:36:48,688 [52] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:36:48,691 [36] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 14.9478ms 204 
2020-06-05 18:36:48,694 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 14.9086ms 204 
2020-06-05 18:36:48,696 [52] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 17.6678ms 204 
2020-06-05 18:36:48,699 [36] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-06-05 18:36:48,701 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 170
2020-06-05 18:36:48,703 [52] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:36:48,709 [36] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:36:48,711 [42] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:36:48,713 [52] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:36:48,714 [36] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:36:48,716 [42] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:36:48,718 [52] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:36:48,722 [36] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-06-05 18:36:48,737 [42] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:36:48,740 [36] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:36:48,742 [52] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-05 18:36:48,752 [42] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:36:48,755 [52] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:36:48,795 [36] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:36:48,832 [42] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:36:48,829 [52] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-05 18:36:48,884 [36] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-06-05 18:36:48,906 [52] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (33ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-05 18:36:48,908 [42] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (35ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-05 18:36:48,910 [52] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 57.4587ms.
2020-06-05 18:36:48,912 [36] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-06-05 18:36:48,931 [52] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:36:48,933 [36] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 99.8549ms.
2020-06-05 18:36:48,936 [42] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-05 18:36:48,940 [52] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 188.0264ms
2020-06-05 18:36:48,941 [36] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:36:48,942 [42] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 104.804ms.
2020-06-05 18:36:48,946 [52] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 242.3601ms 200 application/json; charset=utf-8
2020-06-05 18:36:48,947 [36] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 214.181ms
2020-06-05 18:36:48,949 [42] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:36:48,955 [36] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 252.1169ms 200 application/json; charset=utf-8
2020-06-05 18:36:48,956 [42] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 211.9376ms
2020-06-05 18:36:48,959 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 258.9319ms 200 application/json; charset=utf-8
2020-06-05 18:36:48,996 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-05 18:36:48,998 [42] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:36:49,002 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 4.7072ms 204 
2020-06-05 18:36:49,006 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 170
2020-06-05 18:36:49,009 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:36:49,011 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:36:49,013 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:36:49,017 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:36:49,038 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-05 18:36:49,060 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL) AND ([x].[qty] = 0.0)
2020-06-05 18:36:49,082 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-05 18:36:49,106 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-05 18:36:49,108 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 68.1758ms.
2020-06-05 18:36:49,110 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:36:49,112 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 97.6105ms
2020-06-05 18:36:49,115 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 108.9306ms 200 application/json; charset=utf-8
2020-06-05 18:36:50,015 [52] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8  
2020-06-05 18:36:50,017 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8  
2020-06-05 18:36:50,019 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workprocess/list?api-version=8  
2020-06-05 18:36:50,021 [52] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:36:50,024 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:36:50,028 [41] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:36:50,032 [52] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 12.129ms 204 
2020-06-05 18:36:50,038 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 20.6266ms 204 
2020-06-05 18:36:50,040 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 19.9276ms 204 
2020-06-05 18:36:50,042 [52] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8 application/json;charset=UTF-8 131
2020-06-05 18:36:50,045 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 139
2020-06-05 18:36:50,047 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workprocess/list?api-version=8 application/json;charset=UTF-8 150
2020-06-05 18:36:50,050 [52] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:36:50,054 [41] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:36:50,057 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:36:50,059 [52] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:36:50,061 [41] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:36:50,063 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:36:50,065 [52] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkDate", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkDate(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-05 18:36:50,068 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workprocess"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workprocess.WorkprocessRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkprocessController (DncZeus.Api).
2020-06-05 18:36:50,073 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-05 18:36:50,075 [52] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:36:50,077 [41] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:36:50,097 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:36:50,112 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:36:50,114 [52] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) - Validation state: Valid
2020-06-05 18:36:50,131 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-06-05 18:36:50,183 [52] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (49ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__payload_workDate_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[cadre], [x].[cadreLeave], [x].[cadreRest], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[logistic], [x].[logisticLeave], [x].[logisticRest], [x].[moddate], [x].[moduser], [x].[workDate], [x].[worker], [x].[workerLeave], [x].[workerRest]
FROM [ManFactoryWorkdate] AS [x]
WHERE ([x].[factoryGuid] = @__payload_factoryGuid_0) AND ([x].[workDate] = @__payload_workDate_1)
2020-06-05 18:36:50,185 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (49ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[factoryGuid], [t].[workCode], [t].[workName], [t].[rate], [t].[isvalid], [t].[credate], [t].[creuser], [t].[moddate], [t].[moduser], [t].[factoryName]
FROM (
    SELECT [a].[Guid], [a].[OrgID], [a].[factoryGuid], [a].[workCode], [a].[workName], [a].[rate], [a].[isvalid], [a].[credate], [a].[creuser], [a].[moddate], [a].[moduser], [b].[name] AS [factoryName], ROW_NUMBER() OVER(ORDER BY [a].[factoryGuid], [a].[workCode]) AS [__RowNumber__]
    FROM [ManWorkProcess] AS [a]
    INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
    WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-05 18:36:50,208 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (51ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty',isnull(h.targetOut ,0) as 'targetOut',isnull(h.realityOut,0) as 'realityOut',isnull(h.sumTime,0) as 'sumTime',isnull(h.status,0) as 'status'
from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=a.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=a.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=a.factoryGuid)
left join (
select sum(outline.output) as 'todayDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.factoryGuid
) as g on(g.factoryGuid=a.factoryGuid)
left join (
	select aa.targetOut,aa.realityOut,aa.sumTime,aa.factoryGuid,aa.status from ManFactoryWorkout aa where wrokDate=@p3 and factoryGuid=@p0
) as h on(h.factoryGuid=a.factoryGuid)
2020-06-05 18:36:50,210 [52] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 78.2922ms.
2020-06-05 18:36:50,230 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 96.5342ms.
2020-06-05 18:36:50,232 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkProcess] AS [a]
INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
2020-06-05 18:36:50,234 [52] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-05 18:36:50,238 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:36:50,240 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 123.735ms.
2020-06-05 18:36:50,243 [52] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) in 170.2261ms
2020-06-05 18:36:50,245 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 167.4181ms
2020-06-05 18:36:50,246 [41] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:36:50,256 [52] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 210.441ms 200 application/json; charset=utf-8
2020-06-05 18:36:50,259 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 213.2753ms 200 application/json; charset=utf-8
2020-06-05 18:36:50,261 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) in 184.1096ms
2020-06-05 18:36:50,263 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 217.6837ms 200 application/json; charset=utf-8
2020-06-05 18:37:18,562 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:37:18,572 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:37:18,574 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 12.8195ms 204 
2020-06-05 18:37:18,591 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:37:18,600 [41] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:37:18,603 [41] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:37:18,605 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-05 18:37:18,607 [41] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:37:18,625 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-05 18:37:18,650 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-05 18:37:18,674 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 25.2402ms.
2020-06-05 18:37:18,676 [41] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:37:18,678 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 70.9123ms
2020-06-05 18:37:18,681 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 88.4033ms 200 application/json; charset=utf-8
2020-06-05 18:37:48,570 [54] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:37:48,587 [54] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:37:48,625 [54] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 20.1684ms 204 
2020-06-05 18:37:48,635 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:37:48,639 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:37:48,642 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:37:48,645 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-05 18:37:48,649 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:37:48,671 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-05 18:37:48,693 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-05 18:37:48,695 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.2869ms.
2020-06-05 18:37:48,698 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:37:48,701 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 52.5979ms
2020-06-05 18:37:48,705 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 68.6196ms 200 application/json; charset=utf-8
2020-06-05 18:37:51,095 [57] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v1/account/profile  
2020-06-05 18:37:51,101 [57] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:37:51,106 [57] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 10.9481ms 204 
2020-06-05 18:37:51,114 [54] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v1/account/profile  
2020-06-05 18:37:51,118 [54] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:37:51,125 [54] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:37:51,130 [54] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Profile() on controller DncZeus.Api.Controllers.AccountController (DncZeus.Api).
2020-06-05 18:37:51,136 [54] INFO  Microsoft.AspNetCore.Authorization.DefaultAuthorizationService [(null)]  - Authorization was successful.
2020-06-05 18:37:51,140 [54] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:37:51,164 [54] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) - Validation state: Valid
2020-06-05 18:37:51,210 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (34ms) [Parameters=[@__Parse_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[ID], [x].[Code], [x].[Name], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser]
FROM [MisOrganization] AS [x]
WHERE [x].[ID] = @__Parse_0
2020-06-05 18:37:51,244 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (30ms) [Parameters=[@__guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[EmpName], [x].[EmpNo], [x].[code], [x].[credate], [x].[creuser], [x].[depname], [x].[depno], [x].[email], [x].[enabled], [x].[jobname], [x].[jobno], [x].[moddate], [x].[moduser], [x].[pwd], [x].[telno], [x].[userLogo], [x].[username], [x].[userno], [x].[utype], [x].[wxAccount], [x].[wxId], [x].[wxMail], [x].[wxName], [x].[wxPhone], [x].[wxPwd]
FROM [Secuser] AS [x]
WHERE [x].[Guid] = @__guid_0
2020-06-05 18:37:51,279 [54] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[Alias], [x].[BeforeCloseFun], [x].[Component], [x].[CreatedByUserGuid], [x].[CreatedByUserName], [x].[CreatedOn], [x].[Description], [x].[HideInMenu], [x].[Icon], [x].[IsDefaultRouter], [x].[IsDeleted], [x].[Level], [x].[ModifiedByUserGuid], [x].[ModifiedByUserName], [x].[ModifiedOn], [x].[Name], [x].[NotCache], [x].[ParentGuid], [x].[ParentName], [x].[Sort], [x].[Status], [x].[Url]
FROM [DncMenu] AS [x]
WHERE ([x].[IsDeleted] = 0) AND ([x].[Status] = 1)
2020-06-05 18:37:51,331 [54] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (34ms) [Parameters=[@__user_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secuprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE [x].[userid] = @__user_Guid_0
ORDER BY [b0].[prgno]
2020-06-05 18:37:51,357 [54] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__groupid_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secgprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE CONVERT(VARCHAR(36), [x].[groupid]) = @__groupid_0
ORDER BY [b0].[prgno]
2020-06-05 18:37:51,360 [54] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 192.7203ms.
2020-06-05 18:37:51,362 [54] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-05 18:37:51,365 [54] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) in 231.786ms
2020-06-05 18:37:51,368 [54] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 258.1553ms 200 application/json; charset=utf-8
2020-06-05 18:37:51,376 [57] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-05 18:37:51,378 [57] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:37:51,381 [57] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.0528ms 204 
2020-06-05 18:37:51,385 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-05 18:37:51,387 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:37:51,391 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:37:51,393 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "LoadMenuTree", controller = "Uprg"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult LoadMenuTree() on controller DncZeus.Api.Controllers.Api.Sec.UprgController (DncZeus.Api).
2020-06-05 18:37:51,397 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:37:51,414 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) - Validation state: Valid
2020-06-05 18:37:51,438 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[icon], [p].[sysname], [p].[sysno], [p].[sysorder]
FROM [Secsys] AS [p]
ORDER BY [p].[sysorder]
2020-06-05 18:37:51,466 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[funname], [p].[funno], [p].[funorder], [p].[icon], [p].[sysid]
FROM [Secfun] AS [p]
ORDER BY [p].[funorder]
2020-06-05 18:37:51,503 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[enabled], [x].[funid], [x].[icon], [x].[mainid], [x].[prgcomp], [x].[prgname], [x].[prgno], [x].[prgorder], [x].[prgtype], [x].[program], [x].[runtype], [x].[sysid]
FROM [Secprg] AS [x]
WHERE [x].[enabled] = 'Y'
ORDER BY [x].[prgorder]
2020-06-05 18:37:51,541 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (34ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[butid], [p].[butname], [p].[butno], [p].[butorder], [p].[funid], [p].[prgid], [p].[sysid]
FROM [Secprgbut] AS [p]
ORDER BY [p].[butorder]
2020-06-05 18:37:51,544 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 127.526ms.
2020-06-05 18:37:51,548 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-05 18:37:51,555 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) in 157.2064ms
2020-06-05 18:37:51,575 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 172.1924ms 200 application/json; charset=utf-8
2020-06-05 18:37:52,100 [61] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/Upload/img/20200627040310.png  
2020-06-05 18:37:52,103 [61] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 2.9488ms 404 
2020-06-05 18:37:52,126 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-06-05 18:37:52,129 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:37:52,137 [57] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-06-05 18:37:52,146 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:37:52,150 [41] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:37:52,152 [57] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:37:52,163 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 31.3536ms 204 
2020-06-05 18:37:52,168 [41] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:37:52,173 [57] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 30.7715ms 204 
2020-06-05 18:37:52,177 [59] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-06-05 18:37:52,175 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-05 18:37:52,181 [57] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 170
2020-06-05 18:37:52,183 [41] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:37:52,185 [59] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:37:52,219 [59] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:37:52,221 [57] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:37:52,223 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-05 18:37:52,228 [59] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-06-05 18:37:52,236 [57] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:37:52,261 [59] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:37:52,265 [57] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:37:52,268 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (27ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-05 18:37:52,288 [59] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:37:52,290 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 60.2238ms.
2020-06-05 18:37:52,292 [57] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:37:52,312 [41] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:37:52,318 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 134.2318ms
2020-06-05 18:37:52,343 [59] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-06-05 18:37:52,346 [57] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:37:52,348 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 217.1424ms 200 application/json; charset=utf-8
2020-06-05 18:37:52,393 [59] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-06-05 18:37:52,396 [59] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 102.2041ms.
2020-06-05 18:37:52,397 [57] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-05 18:37:52,400 [59] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:37:52,422 [59] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 184.6081ms
2020-06-05 18:37:52,424 [57] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-05 18:37:52,426 [59] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 259.2479ms 200 application/json; charset=utf-8
2020-06-05 18:37:52,428 [57] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 76.6132ms.
2020-06-05 18:37:52,430 [57] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:37:52,434 [57] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 144.5437ms
2020-06-05 18:37:52,440 [57] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 258.4899ms 200 application/json; charset=utf-8
2020-06-05 18:37:52,474 [59] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-05 18:37:52,478 [59] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:37:52,480 [59] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.7299ms 204 
2020-06-05 18:37:52,485 [57] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 170
2020-06-05 18:37:52,487 [57] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:37:52,489 [57] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:37:52,492 [57] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:37:52,494 [57] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:37:52,513 [57] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-05 18:37:52,536 [57] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL) AND ([x].[qty] = 0.0)
2020-06-05 18:37:52,558 [57] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-05 18:37:52,582 [57] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-05 18:37:52,586 [57] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 69.0061ms.
2020-06-05 18:37:52,588 [57] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:37:52,591 [57] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 97.0261ms
2020-06-05 18:37:52,594 [57] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 110.0296ms 200 application/json; charset=utf-8
2020-06-05 18:37:53,523 [60] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8  
2020-06-05 18:37:53,524 [59] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8  
2020-06-05 18:37:53,548 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workprocess/list?api-version=8  
2020-06-05 18:37:53,552 [60] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:37:53,555 [59] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:37:53,556 [41] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:37:53,559 [60] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 34.87ms 204 
2020-06-05 18:37:53,561 [59] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 36.9586ms 204 
2020-06-05 18:37:53,573 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 37.8778ms 204 
2020-06-05 18:37:53,574 [60] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 139
2020-06-05 18:37:53,577 [59] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8 application/json;charset=UTF-8 131
2020-06-05 18:37:53,580 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workprocess/list?api-version=8 application/json;charset=UTF-8 150
2020-06-05 18:37:53,594 [60] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:37:53,596 [59] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:37:53,619 [41] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:37:53,622 [59] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:37:53,622 [60] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:37:53,626 [41] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:37:53,629 [59] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkDate", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkDate(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-05 18:37:53,631 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-05 18:37:53,635 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workprocess"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workprocess.WorkprocessRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkprocessController (DncZeus.Api).
2020-06-05 18:37:53,638 [59] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:37:53,640 [41] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:37:53,642 [60] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:37:53,660 [59] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) - Validation state: Valid
2020-06-05 18:37:53,723 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:37:53,724 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-06-05 18:37:53,786 [59] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__payload_workDate_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[cadre], [x].[cadreLeave], [x].[cadreRest], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[logistic], [x].[logisticLeave], [x].[logisticRest], [x].[moddate], [x].[moduser], [x].[workDate], [x].[worker], [x].[workerLeave], [x].[workerRest]
FROM [ManFactoryWorkdate] AS [x]
WHERE ([x].[factoryGuid] = @__payload_factoryGuid_0) AND ([x].[workDate] = @__payload_workDate_1)
2020-06-05 18:37:53,788 [59] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 111.1402ms.
2020-06-05 18:37:53,791 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (42ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[factoryGuid], [t].[workCode], [t].[workName], [t].[rate], [t].[isvalid], [t].[credate], [t].[creuser], [t].[moddate], [t].[moduser], [t].[factoryName]
FROM (
    SELECT [a].[Guid], [a].[OrgID], [a].[factoryGuid], [a].[workCode], [a].[workName], [a].[rate], [a].[isvalid], [a].[credate], [a].[creuser], [a].[moddate], [a].[moduser], [b].[name] AS [factoryName], ROW_NUMBER() OVER(ORDER BY [a].[factoryGuid], [a].[workCode]) AS [__RowNumber__]
    FROM [ManWorkProcess] AS [a]
    INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
    WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-05 18:37:53,792 [60] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (43ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty',isnull(h.targetOut ,0) as 'targetOut',isnull(h.realityOut,0) as 'realityOut',isnull(h.sumTime,0) as 'sumTime',isnull(h.status,0) as 'status'
from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=a.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=a.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=a.factoryGuid)
left join (
select sum(outline.output) as 'todayDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.factoryGuid
) as g on(g.factoryGuid=a.factoryGuid)
left join (
	select aa.targetOut,aa.realityOut,aa.sumTime,aa.factoryGuid,aa.status from ManFactoryWorkout aa where wrokDate=@p3 and factoryGuid=@p0
) as h on(h.factoryGuid=a.factoryGuid)
2020-06-05 18:37:53,793 [59] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-05 18:37:53,797 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 49.2269ms.
2020-06-05 18:37:53,798 [59] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) in 162.7865ms
2020-06-05 18:37:53,821 [60] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:37:53,822 [59] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 245.9119ms 200 application/json; charset=utf-8
2020-06-05 18:37:53,824 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (25ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkProcess] AS [a]
INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
2020-06-05 18:37:53,830 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 191.3701ms
2020-06-05 18:37:53,834 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 105.0961ms.
2020-06-05 18:37:53,836 [60] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 268.3521ms 200 application/json; charset=utf-8
2020-06-05 18:37:53,838 [41] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:37:53,841 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) in 202.843ms
2020-06-05 18:37:53,847 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 264.9987ms 200 application/json; charset=utf-8
2020-06-05 18:38:12,353 [57] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/edit?api-version=8  
2020-06-05 18:38:12,365 [57] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:38:12,379 [57] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 15.4921ms 204 
2020-06-05 18:38:12,394 [57] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/edit?api-version=8 application/json;charset=UTF-8 765
2020-06-05 18:38:12,396 [57] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:38:12,398 [57] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:38:12,405 [57] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Edit", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Edit(DncZeus.Api.ViewModels.Man.FactoryWorkshop.FactoryWorkshopCreateViewModel) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-05 18:38:12,411 [57] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:38:12,444 [57] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.Edit (DncZeus.Api) - Validation state: Valid
2020-06-05 18:38:12,484 [57] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (27ms) [Parameters=[@__model_factoryGuid_0='?' (DbType = Guid), @__model_workdate_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[moddate], [x].[moduser], [x].[realityOut], [x].[status], [x].[sumTime], [x].[targetOut], [x].[wrokDate]
FROM [ManFactoryWorkout] AS [x]
WHERE ([x].[factoryGuid] = @__model_factoryGuid_0) AND ([x].[wrokDate] = @__model_workdate_1)
2020-06-05 18:38:12,523 [57] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (25ms) [Parameters=[@__model_factoryGuid_0='?' (DbType = Guid), @__model_workdate_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[cadre], [x].[cadreLeave], [x].[cadreRest], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[logistic], [x].[logisticLeave], [x].[logisticRest], [x].[moddate], [x].[moduser], [x].[workDate], [x].[worker], [x].[workerLeave], [x].[workerRest]
FROM [ManFactoryWorkdate] AS [x]
WHERE ([x].[factoryGuid] = @__model_factoryGuid_0) AND ([x].[workDate] = @__model_workdate_1)
2020-06-05 18:38:12,567 [57] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SET NOCOUNT ON;
UPDATE [ManFactoryWorkdate] SET [moddate] = @p0
WHERE [Guid] = @p1;
SELECT @@ROWCOUNT;
2020-06-05 18:38:12,592 [57] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Decimal)], CommandType='Text', CommandTimeout='6000000']
SET NOCOUNT ON;
UPDATE [ManFactoryWorkout] SET [realityOut] = @p0
WHERE [Guid] = @p1;
SELECT @@ROWCOUNT;
2020-06-05 18:38:12,596 [57] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.Edit (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 149.8305ms.
2020-06-05 18:38:12,598 [57] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-05 18:38:12,601 [57] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.Edit (DncZeus.Api) in 191.098ms
2020-06-05 18:38:12,603 [57] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 209.8162ms 200 application/json; charset=utf-8
2020-06-05 18:38:15,353 [57] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v1/account/profile  
2020-06-05 18:38:15,357 [57] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:38:15,366 [57] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 7.746ms 204 
2020-06-05 18:38:15,377 [57] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v1/account/profile  
2020-06-05 18:38:15,380 [57] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:38:15,384 [57] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:38:15,387 [57] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Profile() on controller DncZeus.Api.Controllers.AccountController (DncZeus.Api).
2020-06-05 18:38:15,390 [57] INFO  Microsoft.AspNetCore.Authorization.DefaultAuthorizationService [(null)]  - Authorization was successful.
2020-06-05 18:38:15,394 [57] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:38:15,435 [57] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) - Validation state: Valid
2020-06-05 18:38:15,521 [61] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (73ms) [Parameters=[@__Parse_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[ID], [x].[Code], [x].[Name], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser]
FROM [MisOrganization] AS [x]
WHERE [x].[ID] = @__Parse_0
2020-06-05 18:38:15,569 [54] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (37ms) [Parameters=[@__guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[EmpName], [x].[EmpNo], [x].[code], [x].[credate], [x].[creuser], [x].[depname], [x].[depno], [x].[email], [x].[enabled], [x].[jobname], [x].[jobno], [x].[moddate], [x].[moduser], [x].[pwd], [x].[telno], [x].[userLogo], [x].[username], [x].[userno], [x].[utype], [x].[wxAccount], [x].[wxId], [x].[wxMail], [x].[wxName], [x].[wxPhone], [x].[wxPwd]
FROM [Secuser] AS [x]
WHERE [x].[Guid] = @__guid_0
2020-06-05 18:38:15,606 [57] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (33ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[Alias], [x].[BeforeCloseFun], [x].[Component], [x].[CreatedByUserGuid], [x].[CreatedByUserName], [x].[CreatedOn], [x].[Description], [x].[HideInMenu], [x].[Icon], [x].[IsDefaultRouter], [x].[IsDeleted], [x].[Level], [x].[ModifiedByUserGuid], [x].[ModifiedByUserName], [x].[ModifiedOn], [x].[Name], [x].[NotCache], [x].[ParentGuid], [x].[ParentName], [x].[Sort], [x].[Status], [x].[Url]
FROM [DncMenu] AS [x]
WHERE ([x].[IsDeleted] = 0) AND ([x].[Status] = 1)
2020-06-05 18:38:15,638 [57] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (27ms) [Parameters=[@__user_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secuprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE [x].[userid] = @__user_Guid_0
ORDER BY [b0].[prgno]
2020-06-05 18:38:15,663 [57] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__groupid_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secgprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE CONVERT(VARCHAR(36), [x].[groupid]) = @__groupid_0
ORDER BY [b0].[prgno]
2020-06-05 18:38:15,666 [57] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 218.832ms.
2020-06-05 18:38:15,670 [57] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-05 18:38:15,673 [57] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) in 283.6675ms
2020-06-05 18:38:15,676 [57] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 304.9173ms 200 application/json; charset=utf-8
2020-06-05 18:38:15,685 [54] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-05 18:38:15,689 [54] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:38:15,692 [54] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 8.6157ms 204 
2020-06-05 18:38:15,695 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-05 18:38:15,697 [41] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:38:15,703 [41] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:38:15,705 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "LoadMenuTree", controller = "Uprg"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult LoadMenuTree() on controller DncZeus.Api.Controllers.Api.Sec.UprgController (DncZeus.Api).
2020-06-05 18:38:15,708 [41] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:38:15,728 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) - Validation state: Valid
2020-06-05 18:38:15,753 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[icon], [p].[sysname], [p].[sysno], [p].[sysorder]
FROM [Secsys] AS [p]
ORDER BY [p].[sysorder]
2020-06-05 18:38:15,779 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[funname], [p].[funno], [p].[funorder], [p].[icon], [p].[sysid]
FROM [Secfun] AS [p]
ORDER BY [p].[funorder]
2020-06-05 18:38:15,808 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[enabled], [x].[funid], [x].[icon], [x].[mainid], [x].[prgcomp], [x].[prgname], [x].[prgno], [x].[prgorder], [x].[prgtype], [x].[program], [x].[runtype], [x].[sysid]
FROM [Secprg] AS [x]
WHERE [x].[enabled] = 'Y'
ORDER BY [x].[prgorder]
2020-06-05 18:38:15,846 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[butid], [p].[butname], [p].[butno], [p].[butorder], [p].[funid], [p].[prgid], [p].[sysid]
FROM [Secprgbut] AS [p]
ORDER BY [p].[butorder]
2020-06-05 18:38:15,851 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 118.1558ms.
2020-06-05 18:38:15,854 [41] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-05 18:38:15,859 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) in 148.8078ms
2020-06-05 18:38:15,863 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 166.2241ms 200 application/json; charset=utf-8
2020-06-05 18:38:16,457 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/Upload/img/20200627040310.png  
2020-06-05 18:38:16,460 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 2.4828ms 404 
2020-06-05 18:38:16,479 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-06-05 18:38:16,483 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:38:16,490 [57] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-06-05 18:38:16,514 [41] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:38:16,521 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:38:16,526 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 44.9158ms 204 
2020-06-05 18:38:16,522 [57] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:38:16,534 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 46.9422ms 204 
2020-06-05 18:38:16,537 [57] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 49.5316ms 204 
2020-06-05 18:38:16,539 [60] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-06-05 18:38:16,542 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 170
2020-06-05 18:38:16,548 [57] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:38:16,550 [60] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:38:16,554 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:38:16,555 [60] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:38:16,557 [57] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:38:16,562 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:38:16,564 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-06-05 18:38:16,568 [57] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:38:16,570 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:38:16,572 [60] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:38:16,574 [57] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-05 18:38:16,577 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:38:16,602 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:38:16,620 [57] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:38:16,622 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:38:16,660 [60] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (36ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-06-05 18:38:16,661 [57] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-05 18:38:16,702 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (36ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-05 18:38:16,725 [60] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-06-05 18:38:16,745 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 104.38ms.
2020-06-05 18:38:16,746 [57] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-05 18:38:16,748 [60] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:38:16,753 [57] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 67.6314ms.
2020-06-05 18:38:16,756 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-05 18:38:16,757 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 184.1022ms
2020-06-05 18:38:16,759 [57] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:38:16,762 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 118.0097ms.
2020-06-05 18:38:16,763 [60] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 225.0803ms 200 application/json; charset=utf-8
2020-06-05 18:38:16,771 [57] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 185.4901ms
2020-06-05 18:38:16,772 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:38:16,775 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 200.906ms
2020-06-05 18:38:16,777 [57] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 231.9694ms 200 application/json; charset=utf-8
2020-06-05 18:38:16,781 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 237.7026ms 200 application/json; charset=utf-8
2020-06-05 18:38:16,818 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-05 18:38:16,821 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:38:16,823 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 6.866ms 204 
2020-06-05 18:38:16,826 [60] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 170
2020-06-05 18:38:16,830 [60] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:38:16,833 [60] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:38:16,837 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:38:16,840 [60] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:38:16,859 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-05 18:38:16,881 [60] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL) AND ([x].[qty] = 0.0)
2020-06-05 18:38:16,908 [60] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-05 18:38:16,939 [60] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (28ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-05 18:38:16,941 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 79.7713ms.
2020-06-05 18:38:16,943 [60] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:38:16,946 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 106.328ms
2020-06-05 18:38:16,950 [60] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 122.9196ms 200 application/json; charset=utf-8
2020-06-05 18:38:17,630 [54] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8  
2020-06-05 18:38:17,631 [62] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8  
2020-06-05 18:38:17,634 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workprocess/list?api-version=8  
2020-06-05 18:38:17,637 [62] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:38:17,639 [54] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:38:17,646 [62] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 13.5867ms 204 
2020-06-05 18:38:17,649 [41] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:38:17,658 [54] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 24.9171ms 204 
2020-06-05 18:38:17,659 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 24.3384ms 204 
2020-06-05 18:38:17,661 [62] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 139
2020-06-05 18:38:17,664 [54] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workprocess/list?api-version=8 application/json;charset=UTF-8 150
2020-06-05 18:38:17,667 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8 application/json;charset=UTF-8 131
2020-06-05 18:38:17,669 [62] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:38:17,672 [54] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:38:17,674 [41] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:38:17,677 [62] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:38:17,681 [54] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:38:17,683 [41] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:38:17,686 [62] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-05 18:38:17,691 [54] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workprocess"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workprocess.WorkprocessRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkprocessController (DncZeus.Api).
2020-06-05 18:38:17,693 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkDate", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkDate(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-05 18:38:17,694 [62] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:38:17,696 [54] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:38:17,719 [41] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:38:17,742 [62] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-06-05 18:38:17,779 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) - Validation state: Valid
2020-06-05 18:38:17,778 [54] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:38:17,821 [62] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (39ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty',isnull(h.targetOut ,0) as 'targetOut',isnull(h.realityOut,0) as 'realityOut',isnull(h.sumTime,0) as 'sumTime',isnull(h.status,0) as 'status'
from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=a.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=a.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=a.factoryGuid)
left join (
select sum(outline.output) as 'todayDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.factoryGuid
) as g on(g.factoryGuid=a.factoryGuid)
left join (
	select aa.targetOut,aa.realityOut,aa.sumTime,aa.factoryGuid,aa.status from ManFactoryWorkout aa where wrokDate=@p3 and factoryGuid=@p0
) as h on(h.factoryGuid=a.factoryGuid)
2020-06-05 18:38:17,822 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__payload_workDate_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[cadre], [x].[cadreLeave], [x].[cadreRest], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[logistic], [x].[logisticLeave], [x].[logisticRest], [x].[moddate], [x].[moduser], [x].[workDate], [x].[worker], [x].[workerLeave], [x].[workerRest]
FROM [ManFactoryWorkdate] AS [x]
WHERE ([x].[factoryGuid] = @__payload_factoryGuid_0) AND ([x].[workDate] = @__payload_workDate_1)
2020-06-05 18:38:17,824 [62] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 43.6324ms.
2020-06-05 18:38:17,827 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 45.3489ms.
2020-06-05 18:38:17,846 [62] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:38:17,849 [41] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-05 18:38:17,852 [54] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[factoryGuid], [t].[workCode], [t].[workName], [t].[rate], [t].[isvalid], [t].[credate], [t].[creuser], [t].[moddate], [t].[moduser], [t].[factoryName]
FROM (
    SELECT [a].[Guid], [a].[OrgID], [a].[factoryGuid], [a].[workCode], [a].[workName], [a].[rate], [a].[isvalid], [a].[credate], [a].[creuser], [a].[moddate], [a].[moduser], [b].[name] AS [factoryName], ROW_NUMBER() OVER(ORDER BY [a].[factoryGuid], [a].[workCode]) AS [__RowNumber__]
    FROM [ManWorkProcess] AS [a]
    INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
    WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-05 18:38:17,855 [62] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 162.232ms
2020-06-05 18:38:17,858 [41] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) in 157.86ms
2020-06-05 18:38:17,881 [41] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 198.0958ms 200 application/json; charset=utf-8
2020-06-05 18:38:17,883 [62] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 206.0781ms 200 application/json; charset=utf-8
2020-06-05 18:38:17,885 [54] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkProcess] AS [a]
INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
2020-06-05 18:38:17,888 [54] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 86.7135ms.
2020-06-05 18:38:17,890 [54] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:38:17,894 [54] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) in 197.3959ms
2020-06-05 18:38:17,896 [54] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 232.7368ms 200 application/json; charset=utf-8
2020-06-05 18:38:46,378 [54] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:38:46,390 [54] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:38:46,394 [54] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 14.986ms 204 
2020-06-05 18:38:46,409 [54] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:38:46,412 [54] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:38:46,416 [54] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:38:46,419 [54] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-05 18:38:46,423 [54] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:38:46,442 [54] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-05 18:38:46,465 [54] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-05 18:38:46,468 [54] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23.528ms.
2020-06-05 18:38:46,470 [54] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:38:46,473 [54] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 51.3517ms
2020-06-05 18:38:46,475 [54] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 67.314ms 200 application/json; charset=utf-8
2020-06-05 18:39:16,378 [60] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:39:16,390 [60] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:39:16,400 [60] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 13.93ms 204 
2020-06-05 18:39:16,403 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:39:16,410 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:39:16,414 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:39:16,417 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-05 18:39:16,421 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:39:16,442 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-05 18:39:16,465 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-05 18:39:16,468 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23.3176ms.
2020-06-05 18:39:16,470 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:39:16,472 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 52.8129ms
2020-06-05 18:39:16,475 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 72.5221ms 200 application/json; charset=utf-8
2020-06-05 18:39:46,380 [62] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:39:46,404 [62] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:39:46,411 [62] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 30.42ms 204 
2020-06-05 18:39:46,416 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:39:46,430 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:39:46,432 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:39:46,436 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-05 18:39:46,441 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:39:46,459 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-05 18:39:46,481 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-05 18:39:46,484 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.4231ms.
2020-06-05 18:39:46,486 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:39:46,488 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 49.3938ms
2020-06-05 18:39:46,491 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 74.4505ms 200 application/json; charset=utf-8
2020-06-05 18:40:01,131 [61] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v1/account/profile  
2020-06-05 18:40:01,135 [61] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:40:01,139 [61] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 11.9811ms 204 
2020-06-05 18:40:01,143 [62] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v1/account/profile  
2020-06-05 18:40:01,146 [62] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:40:01,149 [62] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:40:01,152 [62] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Profile() on controller DncZeus.Api.Controllers.AccountController (DncZeus.Api).
2020-06-05 18:40:01,155 [62] INFO  Microsoft.AspNetCore.Authorization.DefaultAuthorizationService [(null)]  - Authorization was successful.
2020-06-05 18:40:01,160 [62] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:40:01,181 [62] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) - Validation state: Valid
2020-06-05 18:40:01,250 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (41ms) [Parameters=[@__Parse_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[ID], [x].[Code], [x].[Name], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser]
FROM [MisOrganization] AS [x]
WHERE [x].[ID] = @__Parse_0
2020-06-05 18:40:01,300 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (38ms) [Parameters=[@__guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[EmpName], [x].[EmpNo], [x].[code], [x].[credate], [x].[creuser], [x].[depname], [x].[depno], [x].[email], [x].[enabled], [x].[jobname], [x].[jobno], [x].[moddate], [x].[moduser], [x].[pwd], [x].[telno], [x].[userLogo], [x].[username], [x].[userno], [x].[utype], [x].[wxAccount], [x].[wxId], [x].[wxMail], [x].[wxName], [x].[wxPhone], [x].[wxPwd]
FROM [Secuser] AS [x]
WHERE [x].[Guid] = @__guid_0
2020-06-05 18:40:01,341 [62] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (37ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[Alias], [x].[BeforeCloseFun], [x].[Component], [x].[CreatedByUserGuid], [x].[CreatedByUserName], [x].[CreatedOn], [x].[Description], [x].[HideInMenu], [x].[Icon], [x].[IsDefaultRouter], [x].[IsDeleted], [x].[Level], [x].[ModifiedByUserGuid], [x].[ModifiedByUserName], [x].[ModifiedOn], [x].[Name], [x].[NotCache], [x].[ParentGuid], [x].[ParentName], [x].[Sort], [x].[Status], [x].[Url]
FROM [DncMenu] AS [x]
WHERE ([x].[IsDeleted] = 0) AND ([x].[Status] = 1)
2020-06-05 18:40:01,369 [62] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__user_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secuprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE [x].[userid] = @__user_Guid_0
ORDER BY [b0].[prgno]
2020-06-05 18:40:01,393 [62] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__groupid_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secgprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE CONVERT(VARCHAR(36), [x].[groupid]) = @__groupid_0
ORDER BY [b0].[prgno]
2020-06-05 18:40:01,395 [62] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 211.6639ms.
2020-06-05 18:40:01,398 [62] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-05 18:40:01,402 [62] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) in 245.9839ms
2020-06-05 18:40:01,406 [62] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 262.1232ms 200 application/json; charset=utf-8
2020-06-05 18:40:01,415 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-05 18:40:01,417 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:40:01,420 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 4.402ms 204 
2020-06-05 18:40:01,425 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-05 18:40:01,429 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:40:01,432 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:40:01,434 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "LoadMenuTree", controller = "Uprg"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult LoadMenuTree() on controller DncZeus.Api.Controllers.Api.Sec.UprgController (DncZeus.Api).
2020-06-05 18:40:01,438 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:40:01,457 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) - Validation state: Valid
2020-06-05 18:40:01,483 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[icon], [p].[sysname], [p].[sysno], [p].[sysorder]
FROM [Secsys] AS [p]
ORDER BY [p].[sysorder]
2020-06-05 18:40:01,515 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[funname], [p].[funno], [p].[funorder], [p].[icon], [p].[sysid]
FROM [Secfun] AS [p]
ORDER BY [p].[funorder]
2020-06-05 18:40:01,543 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[enabled], [x].[funid], [x].[icon], [x].[mainid], [x].[prgcomp], [x].[prgname], [x].[prgno], [x].[prgorder], [x].[prgtype], [x].[program], [x].[runtype], [x].[sysid]
FROM [Secprg] AS [x]
WHERE [x].[enabled] = 'Y'
ORDER BY [x].[prgorder]
2020-06-05 18:40:01,578 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (31ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[butid], [p].[butname], [p].[butno], [p].[butorder], [p].[funid], [p].[prgid], [p].[sysid]
FROM [Secprgbut] AS [p]
ORDER BY [p].[butorder]
2020-06-05 18:40:01,582 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 121.2782ms.
2020-06-05 18:40:01,584 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-05 18:40:01,589 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) in 151.0412ms
2020-06-05 18:40:01,593 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 166.612ms 200 application/json; charset=utf-8
2020-06-05 18:40:02,141 [54] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/Upload/img/20200627040310.png  
2020-06-05 18:40:02,147 [54] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.6406ms 404 
2020-06-05 18:40:02,181 [54] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:40:02,189 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-06-05 18:40:02,193 [74] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-06-05 18:40:02,211 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:40:02,212 [54] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:40:02,217 [74] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:40:02,223 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 49.5139ms 204 
2020-06-05 18:40:02,227 [54] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 58.8502ms 204 
2020-06-05 18:40:02,231 [74] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 35.6722ms 204 
2020-06-05 18:40:02,233 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-06-05 18:40:02,237 [54] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:40:02,239 [74] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 170
2020-06-05 18:40:02,243 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:40:02,250 [54] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:40:02,257 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:40:02,282 [74] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:40:02,286 [54] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:40:02,289 [74] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:40:02,318 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-06-05 18:40:02,322 [74] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:40:02,324 [54] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-05 18:40:02,328 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:40:02,331 [74] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:40:02,333 [54] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:40:02,355 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:40:02,386 [74] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:40:02,387 [54] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-05 18:40:02,447 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (56ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-06-05 18:40:02,451 [74] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-05 18:40:02,472 [54] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-05 18:40:02,511 [54] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 64.3584ms.
2020-06-05 18:40:02,513 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (38ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-06-05 18:40:02,516 [54] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:40:02,518 [74] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-05 18:40:02,520 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 131.5887ms.
2020-06-05 18:40:02,523 [54] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 188.1404ms
2020-06-05 18:40:02,525 [74] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 134.1642ms.
2020-06-05 18:40:02,527 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:40:02,531 [54] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 294.2166ms 200 application/json; charset=utf-8
2020-06-05 18:40:02,534 [74] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:40:02,538 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 209.9398ms
2020-06-05 18:40:02,541 [74] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 213.0489ms
2020-06-05 18:40:02,543 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 313.502ms 200 application/json; charset=utf-8
2020-06-05 18:40:02,550 [74] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 307.2236ms 200 application/json; charset=utf-8
2020-06-05 18:40:02,597 [61] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-05 18:40:02,599 [61] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:40:02,602 [61] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.1183ms 204 
2020-06-05 18:40:02,604 [62] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 170
2020-06-05 18:40:02,606 [62] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:40:02,611 [62] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:40:02,614 [62] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:40:02,616 [62] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:40:02,636 [62] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-05 18:40:02,672 [62] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (32ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL) AND ([x].[qty] = 0.0)
2020-06-05 18:40:02,694 [62] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-05 18:40:02,720 [62] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-05 18:40:02,723 [62] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 83.9192ms.
2020-06-05 18:40:02,725 [62] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:40:02,728 [62] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 111.1118ms
2020-06-05 18:40:02,736 [62] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 127.6563ms 200 application/json; charset=utf-8
2020-06-05 18:40:03,342 [54] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8  
2020-06-05 18:40:03,344 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8  
2020-06-05 18:40:03,348 [62] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workprocess/list?api-version=8  
2020-06-05 18:40:03,350 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:40:03,352 [54] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:40:03,354 [62] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:40:03,368 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 16.5758ms 204 
2020-06-05 18:40:03,369 [54] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 28.9181ms 204 
2020-06-05 18:40:03,375 [62] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 29.9764ms 204 
2020-06-05 18:40:03,377 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8 application/json;charset=UTF-8 131
2020-06-05 18:40:03,381 [54] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workprocess/list?api-version=8 application/json;charset=UTF-8 150
2020-06-05 18:40:03,384 [62] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 139
2020-06-05 18:40:03,389 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:40:03,393 [54] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:40:03,396 [62] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:40:03,402 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:40:03,402 [54] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:40:03,404 [62] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:40:03,407 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkDate", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkDate(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-05 18:40:03,410 [54] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workprocess"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workprocess.WorkprocessRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkprocessController (DncZeus.Api).
2020-06-05 18:40:03,413 [62] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-05 18:40:03,423 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:40:03,425 [54] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:40:03,426 [62] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:40:03,458 [54] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:40:03,460 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) - Validation state: Valid
2020-06-05 18:40:03,477 [62] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-06-05 18:40:03,539 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (60ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__payload_workDate_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[cadre], [x].[cadreLeave], [x].[cadreRest], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[logistic], [x].[logisticLeave], [x].[logisticRest], [x].[moddate], [x].[moduser], [x].[workDate], [x].[worker], [x].[workerLeave], [x].[workerRest]
FROM [ManFactoryWorkdate] AS [x]
WHERE ([x].[factoryGuid] = @__payload_factoryGuid_0) AND ([x].[workDate] = @__payload_workDate_1)
2020-06-05 18:40:03,541 [62] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (58ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty',isnull(h.targetOut ,0) as 'targetOut',isnull(h.realityOut,0) as 'realityOut',isnull(h.sumTime,0) as 'sumTime',isnull(h.status,0) as 'status'
from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=a.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=a.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=a.factoryGuid)
left join (
select sum(outline.output) as 'todayDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.factoryGuid
) as g on(g.factoryGuid=a.factoryGuid)
left join (
	select aa.targetOut,aa.realityOut,aa.sumTime,aa.factoryGuid,aa.status from ManFactoryWorkout aa where wrokDate=@p3 and factoryGuid=@p0
) as h on(h.factoryGuid=a.factoryGuid)
2020-06-05 18:40:03,542 [54] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (59ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[factoryGuid], [t].[workCode], [t].[workName], [t].[rate], [t].[isvalid], [t].[credate], [t].[creuser], [t].[moddate], [t].[moduser], [t].[factoryName]
FROM (
    SELECT [a].[Guid], [a].[OrgID], [a].[factoryGuid], [a].[workCode], [a].[workName], [a].[rate], [a].[isvalid], [a].[credate], [a].[creuser], [a].[moddate], [a].[moduser], [b].[name] AS [factoryName], ROW_NUMBER() OVER(ORDER BY [a].[factoryGuid], [a].[workCode]) AS [__RowNumber__]
    FROM [ManWorkProcess] AS [a]
    INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
    WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-05 18:40:03,545 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 65.7274ms.
2020-06-05 18:40:03,550 [62] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 67.8826ms.
2020-06-05 18:40:03,570 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-05 18:40:03,571 [62] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:40:03,573 [54] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (25ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkProcess] AS [a]
INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
2020-06-05 18:40:03,575 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) in 162.4956ms
2020-06-05 18:40:03,579 [54] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 100.3657ms.
2020-06-05 18:40:03,582 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 205.7037ms 200 application/json; charset=utf-8
2020-06-05 18:40:03,584 [62] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 152.5211ms
2020-06-05 18:40:03,585 [54] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:40:03,588 [62] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 206.7275ms 200 application/json; charset=utf-8
2020-06-05 18:40:03,594 [54] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) in 166.3147ms
2020-06-05 18:40:03,597 [54] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 217.1056ms 200 application/json; charset=utf-8
2020-06-05 18:40:32,055 [61] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:40:32,065 [61] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:40:32,067 [61] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 12.1155ms 204 
2020-06-05 18:40:32,080 [74] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:40:32,082 [74] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:40:32,085 [74] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:40:32,087 [74] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-05 18:40:32,090 [74] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:40:32,109 [74] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-05 18:40:32,132 [74] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-05 18:40:32,135 [74] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23.9412ms.
2020-06-05 18:40:32,143 [74] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:40:32,147 [74] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 57.5673ms
2020-06-05 18:40:32,150 [74] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 72.0316ms 200 application/json; charset=utf-8
2020-06-05 18:41:02,056 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:41:02,067 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:41:02,085 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 13.3664ms 204 
2020-06-05 18:41:02,087 [61] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:41:02,090 [61] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:41:02,093 [61] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:41:02,097 [61] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-05 18:41:02,100 [61] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:41:02,119 [61] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-05 18:41:02,141 [61] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-05 18:41:02,144 [61] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.7815ms.
2020-06-05 18:41:02,146 [61] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:41:02,155 [61] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 49.3433ms
2020-06-05 18:41:02,158 [61] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 70.1645ms 200 application/json; charset=utf-8
2020-06-05 18:41:32,054 [79] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:41:32,067 [79] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:41:32,085 [79] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 15.851ms 204 
2020-06-05 18:41:32,087 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:41:32,104 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:41:32,108 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:41:32,115 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-05 18:41:32,118 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:41:32,138 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-05 18:41:32,164 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-05 18:41:32,166 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 26.3309ms.
2020-06-05 18:41:32,168 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:41:32,171 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 53.1302ms
2020-06-05 18:41:32,174 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 87.3103ms 200 application/json; charset=utf-8
2020-06-05 18:41:48,034 [79] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8  
2020-06-05 18:41:48,046 [79] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:41:48,049 [79] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 16.2396ms 204 
2020-06-05 18:41:48,062 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 139
2020-06-05 18:41:48,067 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:41:48,077 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:41:48,080 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-05 18:41:48,083 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:41:48,102 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-06-05 18:41:48,128 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty',isnull(h.targetOut ,0) as 'targetOut',isnull(h.realityOut,0) as 'realityOut',isnull(h.sumTime,0) as 'sumTime',isnull(h.status,0) as 'status'
from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=a.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=a.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=a.factoryGuid)
left join (
select sum(outline.output) as 'todayDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.factoryGuid
) as g on(g.factoryGuid=a.factoryGuid)
left join (
	select aa.targetOut,aa.realityOut,aa.sumTime,aa.factoryGuid,aa.status from ManFactoryWorkout aa where wrokDate=@p3 and factoryGuid=@p0
) as h on(h.factoryGuid=a.factoryGuid)
2020-06-05 18:41:48,131 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 25.9486ms.
2020-06-05 18:41:48,134 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:41:48,137 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 53.3742ms
2020-06-05 18:41:48,140 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 77.7893ms 200 application/json; charset=utf-8
2020-06-05 18:42:02,054 [79] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:42:02,057 [79] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:42:02,064 [79] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.1696ms 204 
2020-06-05 18:42:02,068 [79] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:42:02,071 [79] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:42:02,073 [79] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:42:02,076 [79] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-05 18:42:02,081 [79] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:42:02,102 [79] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-05 18:42:02,128 [79] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-05 18:42:02,131 [79] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 26.8774ms.
2020-06-05 18:42:02,134 [79] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:42:02,137 [79] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 56.9885ms
2020-06-05 18:42:02,145 [79] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 72.6782ms 200 application/json; charset=utf-8
2020-06-05 18:42:32,055 [80] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:42:32,067 [80] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:42:32,076 [80] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 14.9229ms 204 
2020-06-05 18:42:32,083 [79] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:42:32,086 [79] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:42:32,089 [79] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:42:32,094 [79] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-05 18:42:32,097 [79] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:42:32,115 [79] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-05 18:42:32,142 [79] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-05 18:42:32,145 [79] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 26.9049ms.
2020-06-05 18:42:32,147 [79] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:42:32,149 [79] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 52.159ms
2020-06-05 18:42:32,152 [79] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 72.5306ms 200 application/json; charset=utf-8
2020-06-05 18:42:40,513 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-06-05 18:42:40,517 [80] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-06-05 18:42:40,528 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:42:40,531 [80] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:42:40,535 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 63.343ms 204 
2020-06-05 18:42:40,538 [80] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 62.655ms 204 
2020-06-05 18:42:40,540 [87] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-06-05 18:42:40,543 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 170
2020-06-05 18:42:40,547 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:42:40,549 [87] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:42:40,552 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:42:40,554 [87] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:42:40,559 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:42:40,562 [87] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-06-05 18:42:40,572 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:42:40,576 [87] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:42:40,597 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:42:40,616 [87] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:42:40,660 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (42ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-05 18:42:40,663 [87] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-06-05 18:42:40,722 [87] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (57ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-06-05 18:42:40,724 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (58ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-05 18:42:40,727 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 127.8344ms.
2020-06-05 18:42:40,729 [87] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 88.8658ms.
2020-06-05 18:42:40,730 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:42:40,732 [87] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:42:40,737 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 167.9352ms
2020-06-05 18:42:40,738 [87] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 163.2084ms
2020-06-05 18:42:40,743 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 198.2082ms 200 application/json; charset=utf-8
2020-06-05 18:42:40,745 [87] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 203.1163ms 200 application/json; charset=utf-8
2020-06-05 18:42:40,761 [87] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-05 18:42:40,765 [87] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:42:40,769 [87] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 6.5502ms 204 
2020-06-05 18:42:40,772 [79] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 170
2020-06-05 18:42:40,777 [79] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:42:40,781 [79] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:42:40,783 [79] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:42:40,786 [79] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:42:40,804 [79] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-05 18:42:40,827 [79] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL) AND ([x].[qty] = 0.0)
2020-06-05 18:42:40,850 [79] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-05 18:42:40,877 [79] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-05 18:42:40,880 [79] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 73.2904ms.
2020-06-05 18:42:40,881 [79] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:42:40,884 [79] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 98.3609ms
2020-06-05 18:42:40,886 [79] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 113.5483ms 200 application/json; charset=utf-8
2020-06-05 18:42:44,844 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v1/account/profile  
2020-06-05 18:42:44,847 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:42:44,853 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 7.7788ms 204 
2020-06-05 18:42:44,855 [80] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v1/account/profile  
2020-06-05 18:42:44,860 [80] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:42:44,863 [80] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:42:44,867 [80] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Profile() on controller DncZeus.Api.Controllers.AccountController (DncZeus.Api).
2020-06-05 18:42:44,869 [80] INFO  Microsoft.AspNetCore.Authorization.DefaultAuthorizationService [(null)]  - Authorization was successful.
2020-06-05 18:42:44,872 [80] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:42:44,893 [80] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) - Validation state: Valid
2020-06-05 18:42:44,956 [79] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (46ms) [Parameters=[@__Parse_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[ID], [x].[Code], [x].[Name], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser]
FROM [MisOrganization] AS [x]
WHERE [x].[ID] = @__Parse_0
2020-06-05 18:42:45,017 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (55ms) [Parameters=[@__guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[EmpName], [x].[EmpNo], [x].[code], [x].[credate], [x].[creuser], [x].[depname], [x].[depno], [x].[email], [x].[enabled], [x].[jobname], [x].[jobno], [x].[moddate], [x].[moduser], [x].[pwd], [x].[telno], [x].[userLogo], [x].[username], [x].[userno], [x].[utype], [x].[wxAccount], [x].[wxId], [x].[wxMail], [x].[wxName], [x].[wxPhone], [x].[wxPwd]
FROM [Secuser] AS [x]
WHERE [x].[Guid] = @__guid_0
2020-06-05 18:42:45,053 [80] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (32ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[Alias], [x].[BeforeCloseFun], [x].[Component], [x].[CreatedByUserGuid], [x].[CreatedByUserName], [x].[CreatedOn], [x].[Description], [x].[HideInMenu], [x].[Icon], [x].[IsDefaultRouter], [x].[IsDeleted], [x].[Level], [x].[ModifiedByUserGuid], [x].[ModifiedByUserName], [x].[ModifiedOn], [x].[Name], [x].[NotCache], [x].[ParentGuid], [x].[ParentName], [x].[Sort], [x].[Status], [x].[Url]
FROM [DncMenu] AS [x]
WHERE ([x].[IsDeleted] = 0) AND ([x].[Status] = 1)
2020-06-05 18:42:45,085 [80] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (28ms) [Parameters=[@__user_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secuprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE [x].[userid] = @__user_Guid_0
ORDER BY [b0].[prgno]
2020-06-05 18:42:45,108 [80] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__groupid_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secgprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE CONVERT(VARCHAR(36), [x].[groupid]) = @__groupid_0
ORDER BY [b0].[prgno]
2020-06-05 18:42:45,113 [80] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 216.8306ms.
2020-06-05 18:42:45,115 [80] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-05 18:42:45,119 [80] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) in 248.7429ms
2020-06-05 18:42:45,122 [80] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 266.1218ms 200 application/json; charset=utf-8
2020-06-05 18:42:45,131 [80] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-05 18:42:45,133 [80] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:42:45,136 [80] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 4.5726ms 204 
2020-06-05 18:42:45,139 [79] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-05 18:42:45,144 [79] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:42:45,148 [79] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:42:45,152 [79] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "LoadMenuTree", controller = "Uprg"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult LoadMenuTree() on controller DncZeus.Api.Controllers.Api.Sec.UprgController (DncZeus.Api).
2020-06-05 18:42:45,155 [79] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:42:45,181 [79] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) - Validation state: Valid
2020-06-05 18:42:45,215 [79] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[icon], [p].[sysname], [p].[sysno], [p].[sysorder]
FROM [Secsys] AS [p]
ORDER BY [p].[sysorder]
2020-06-05 18:42:45,244 [79] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[funname], [p].[funno], [p].[funorder], [p].[icon], [p].[sysid]
FROM [Secfun] AS [p]
ORDER BY [p].[funorder]
2020-06-05 18:42:45,272 [79] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[enabled], [x].[funid], [x].[icon], [x].[mainid], [x].[prgcomp], [x].[prgname], [x].[prgno], [x].[prgorder], [x].[prgtype], [x].[program], [x].[runtype], [x].[sysid]
FROM [Secprg] AS [x]
WHERE [x].[enabled] = 'Y'
ORDER BY [x].[prgorder]
2020-06-05 18:42:45,301 [79] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[butid], [p].[butname], [p].[butno], [p].[butorder], [p].[funid], [p].[prgid], [p].[sysid]
FROM [Secprgbut] AS [p]
ORDER BY [p].[butorder]
2020-06-05 18:42:45,321 [79] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 120.5043ms.
2020-06-05 18:42:45,327 [79] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-05 18:42:45,333 [79] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) in 176.152ms
2020-06-05 18:42:45,338 [79] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 196.075ms 200 application/json; charset=utf-8
2020-06-05 18:42:45,886 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/Upload/img/20200627040310.png  
2020-06-05 18:42:45,889 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 3.2435ms 404 
2020-06-05 18:42:45,926 [79] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-06-05 18:42:45,932 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-06-05 18:42:45,929 [80] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:42:45,941 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:42:45,943 [80] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:42:45,946 [79] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:42:45,954 [80] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 35.0545ms 204 
2020-06-05 18:42:45,956 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 19.8823ms 204 
2020-06-05 18:42:45,959 [79] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 45.3664ms 204 
2020-06-05 18:42:45,962 [80] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:42:45,965 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 170
2020-06-05 18:42:45,991 [79] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-06-05 18:42:45,994 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:42:46,001 [80] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:42:46,009 [79] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:42:46,012 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:42:46,013 [80] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:42:46,018 [79] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:42:46,021 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:42:46,025 [80] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-05 18:42:46,029 [79] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-06-05 18:42:46,038 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:42:46,042 [80] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:42:46,070 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:42:46,088 [79] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:42:46,090 [80] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-05 18:42:46,148 [79] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:42:46,149 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (37ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-05 18:42:46,169 [80] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-05 18:42:46,191 [79] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-06-05 18:42:46,194 [80] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 57.5879ms.
2020-06-05 18:42:46,196 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-05 18:42:46,216 [80] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:42:46,219 [79] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-06-05 18:42:46,221 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 128.4189ms.
2020-06-05 18:42:46,223 [80] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 190.9609ms
2020-06-05 18:42:46,226 [79] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 73.4749ms.
2020-06-05 18:42:46,230 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:42:46,232 [80] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 268.6453ms 200 application/json; charset=utf-8
2020-06-05 18:42:46,239 [79] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:42:46,244 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 210.0713ms
2020-06-05 18:42:46,260 [79] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 202.76ms
2020-06-05 18:42:46,263 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 298.4245ms 200 application/json; charset=utf-8
2020-06-05 18:42:46,267 [79] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 298.2149ms 200 application/json; charset=utf-8
2020-06-05 18:42:46,289 [79] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-05 18:42:46,293 [79] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:42:46,299 [79] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 10.0116ms 204 
2020-06-05 18:42:46,303 [79] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 170
2020-06-05 18:42:46,308 [79] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:42:46,311 [79] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:42:46,314 [79] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:42:46,318 [79] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:42:46,336 [79] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-05 18:42:46,362 [79] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL) AND ([x].[qty] = 0.0)
2020-06-05 18:42:46,387 [79] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-05 18:42:46,413 [79] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-05 18:42:46,415 [79] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 76.3118ms.
2020-06-05 18:42:46,418 [79] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:42:46,421 [79] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 102.7852ms
2020-06-05 18:42:46,428 [79] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 121.8488ms 200 application/json; charset=utf-8
2020-06-05 18:42:47,351 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8  
2020-06-05 18:42:47,353 [90] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8  
2020-06-05 18:42:47,358 [91] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workprocess/list?api-version=8  
2020-06-05 18:42:47,368 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:42:47,370 [90] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:42:47,372 [91] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:42:47,380 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 24.6257ms 204 
2020-06-05 18:42:47,384 [90] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 25.6484ms 204 
2020-06-05 18:42:47,386 [91] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 26.3388ms 204 
2020-06-05 18:42:47,393 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workprocess/list?api-version=8 application/json;charset=UTF-8 150
2020-06-05 18:42:47,397 [90] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8 application/json;charset=UTF-8 131
2020-06-05 18:42:47,399 [91] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 139
2020-06-05 18:42:47,402 [90] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:42:47,408 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:42:47,411 [90] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:42:47,412 [91] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:42:47,414 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:42:47,416 [90] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkDate", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkDate(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-05 18:42:47,418 [91] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:42:47,421 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workprocess"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workprocess.WorkprocessRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkprocessController (DncZeus.Api).
2020-06-05 18:42:47,422 [90] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:42:47,424 [91] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-05 18:42:47,442 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:42:47,465 [90] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) - Validation state: Valid
2020-06-05 18:42:47,500 [91] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:42:47,519 [90] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (31ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__payload_workDate_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[cadre], [x].[cadreLeave], [x].[cadreRest], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[logistic], [x].[logisticLeave], [x].[logisticRest], [x].[moddate], [x].[moduser], [x].[workDate], [x].[worker], [x].[workerLeave], [x].[workerRest]
FROM [ManFactoryWorkdate] AS [x]
WHERE ([x].[factoryGuid] = @__payload_factoryGuid_0) AND ([x].[workDate] = @__payload_workDate_1)
2020-06-05 18:42:47,521 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:42:47,538 [90] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 52.3863ms.
2020-06-05 18:42:47,541 [91] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-06-05 18:42:47,543 [90] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-05 18:42:47,583 [90] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) in 126.7083ms
2020-06-05 18:42:47,586 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[factoryGuid], [t].[workCode], [t].[workName], [t].[rate], [t].[isvalid], [t].[credate], [t].[creuser], [t].[moddate], [t].[moduser], [t].[factoryName]
FROM (
    SELECT [a].[Guid], [a].[OrgID], [a].[factoryGuid], [a].[workCode], [a].[workName], [a].[rate], [a].[isvalid], [a].[credate], [a].[creuser], [a].[moddate], [a].[moduser], [b].[name] AS [factoryName], ROW_NUMBER() OVER(ORDER BY [a].[factoryGuid], [a].[workCode]) AS [__RowNumber__]
    FROM [ManWorkProcess] AS [a]
    INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
    WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-05 18:42:47,587 [90] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 196.4046ms 200 application/json; charset=utf-8
2020-06-05 18:42:47,589 [91] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (41ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty',isnull(h.targetOut ,0) as 'targetOut',isnull(h.realityOut,0) as 'realityOut',isnull(h.sumTime,0) as 'sumTime',isnull(h.status,0) as 'status'
from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=a.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=a.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=a.factoryGuid)
left join (
select sum(outline.output) as 'todayDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.factoryGuid
) as g on(g.factoryGuid=a.factoryGuid)
left join (
	select aa.targetOut,aa.realityOut,aa.sumTime,aa.factoryGuid,aa.status from ManFactoryWorkout aa where wrokDate=@p3 and factoryGuid=@p0
) as h on(h.factoryGuid=a.factoryGuid)
2020-06-05 18:42:47,594 [91] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 46.7691ms.
2020-06-05 18:42:47,615 [91] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:42:47,618 [91] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 173.5443ms
2020-06-05 18:42:47,621 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkProcess] AS [a]
INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
2020-06-05 18:42:47,625 [91] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 231.2008ms 200 application/json; charset=utf-8
2020-06-05 18:42:47,628 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 84.7757ms.
2020-06-05 18:42:47,630 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:42:47,633 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) in 206.3807ms
2020-06-05 18:42:47,635 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 246.6822ms 200 application/json; charset=utf-8
2020-06-05 18:43:09,758 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v1/account/profile  
2020-06-05 18:43:09,770 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:43:09,781 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 14.7028ms 204 
2020-06-05 18:43:09,787 [89] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v1/account/profile  
2020-06-05 18:43:09,791 [89] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:43:09,795 [89] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:43:09,799 [89] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Profile() on controller DncZeus.Api.Controllers.AccountController (DncZeus.Api).
2020-06-05 18:43:09,803 [89] INFO  Microsoft.AspNetCore.Authorization.DefaultAuthorizationService [(null)]  - Authorization was successful.
2020-06-05 18:43:09,806 [89] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:43:09,839 [89] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) - Validation state: Valid
2020-06-05 18:43:09,889 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (39ms) [Parameters=[@__Parse_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[ID], [x].[Code], [x].[Name], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser]
FROM [MisOrganization] AS [x]
WHERE [x].[ID] = @__Parse_0
2020-06-05 18:43:09,986 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (87ms) [Parameters=[@__guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[EmpName], [x].[EmpNo], [x].[code], [x].[credate], [x].[creuser], [x].[depname], [x].[depno], [x].[email], [x].[enabled], [x].[jobname], [x].[jobno], [x].[moddate], [x].[moduser], [x].[pwd], [x].[telno], [x].[userLogo], [x].[username], [x].[userno], [x].[utype], [x].[wxAccount], [x].[wxId], [x].[wxMail], [x].[wxName], [x].[wxPhone], [x].[wxPwd]
FROM [Secuser] AS [x]
WHERE [x].[Guid] = @__guid_0
2020-06-05 18:43:10,012 [89] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[Alias], [x].[BeforeCloseFun], [x].[Component], [x].[CreatedByUserGuid], [x].[CreatedByUserName], [x].[CreatedOn], [x].[Description], [x].[HideInMenu], [x].[Icon], [x].[IsDefaultRouter], [x].[IsDeleted], [x].[Level], [x].[ModifiedByUserGuid], [x].[ModifiedByUserName], [x].[ModifiedOn], [x].[Name], [x].[NotCache], [x].[ParentGuid], [x].[ParentName], [x].[Sort], [x].[Status], [x].[Url]
FROM [DncMenu] AS [x]
WHERE ([x].[IsDeleted] = 0) AND ([x].[Status] = 1)
2020-06-05 18:43:10,038 [89] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__user_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secuprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE [x].[userid] = @__user_Guid_0
ORDER BY [b0].[prgno]
2020-06-05 18:43:10,062 [89] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__groupid_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secgprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE CONVERT(VARCHAR(36), [x].[groupid]) = @__groupid_0
ORDER BY [b0].[prgno]
2020-06-05 18:43:10,064 [89] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 216.8872ms.
2020-06-05 18:43:10,069 [89] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-05 18:43:10,073 [89] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) in 269.7468ms
2020-06-05 18:43:10,083 [89] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 295.7686ms 200 application/json; charset=utf-8
2020-06-05 18:43:10,091 [89] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-05 18:43:10,094 [89] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:43:10,096 [89] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 7.0624ms 204 
2020-06-05 18:43:10,100 [80] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-05 18:43:10,103 [80] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:43:10,107 [80] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:43:10,110 [80] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "LoadMenuTree", controller = "Uprg"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult LoadMenuTree() on controller DncZeus.Api.Controllers.Api.Sec.UprgController (DncZeus.Api).
2020-06-05 18:43:10,114 [80] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:43:10,143 [80] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) - Validation state: Valid
2020-06-05 18:43:10,170 [80] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[icon], [p].[sysname], [p].[sysno], [p].[sysorder]
FROM [Secsys] AS [p]
ORDER BY [p].[sysorder]
2020-06-05 18:43:10,200 [80] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (27ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[funname], [p].[funno], [p].[funorder], [p].[icon], [p].[sysid]
FROM [Secfun] AS [p]
ORDER BY [p].[funorder]
2020-06-05 18:43:10,229 [80] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[enabled], [x].[funid], [x].[icon], [x].[mainid], [x].[prgcomp], [x].[prgname], [x].[prgno], [x].[prgorder], [x].[prgtype], [x].[program], [x].[runtype], [x].[sysid]
FROM [Secprg] AS [x]
WHERE [x].[enabled] = 'Y'
ORDER BY [x].[prgorder]
2020-06-05 18:43:10,258 [80] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[butid], [p].[butname], [p].[butno], [p].[butorder], [p].[funid], [p].[prgid], [p].[sysid]
FROM [Secprgbut] AS [p]
ORDER BY [p].[butorder]
2020-06-05 18:43:10,261 [80] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 115.3623ms.
2020-06-05 18:43:10,263 [80] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-05 18:43:10,268 [80] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) in 152.7413ms
2020-06-05 18:43:10,271 [80] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 170.6189ms 200 application/json; charset=utf-8
2020-06-05 18:43:10,814 [89] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/Upload/img/20200627040310.png  
2020-06-05 18:43:10,817 [89] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 3.3219ms 404 
2020-06-05 18:43:10,837 [80] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-06-05 18:43:10,840 [90] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:43:10,844 [89] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-06-05 18:43:10,853 [80] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:43:10,857 [89] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:43:10,862 [80] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 19.2885ms 204 
2020-06-05 18:43:10,864 [90] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:43:10,870 [89] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 28.1112ms 204 
2020-06-05 18:43:10,871 [80] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-06-05 18:43:10,877 [90] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 32.5602ms 204 
2020-06-05 18:43:10,880 [80] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:43:10,882 [91] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 170
2020-06-05 18:43:10,884 [90] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:43:10,887 [80] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:43:10,891 [91] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:43:10,895 [90] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:43:10,900 [80] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-06-05 18:43:10,904 [90] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:43:10,908 [91] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:43:10,910 [90] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-05 18:43:10,931 [80] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:43:10,939 [91] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:43:10,948 [90] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:43:10,974 [91] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:43:10,991 [80] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:43:10,995 [90] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-05 18:43:11,079 [80] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (65ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-06-05 18:43:11,081 [90] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (67ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-05 18:43:11,082 [91] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:43:11,102 [90] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 72.2555ms.
2020-06-05 18:43:11,121 [90] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:43:11,122 [80] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-06-05 18:43:11,126 [90] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 189.016ms
2020-06-05 18:43:11,128 [80] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 127.585ms.
2020-06-05 18:43:11,131 [91] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-05 18:43:11,133 [80] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:43:11,134 [90] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 246.8842ms 200 application/json; charset=utf-8
2020-06-05 18:43:11,158 [80] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 249.2907ms
2020-06-05 18:43:11,160 [91] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-05 18:43:11,163 [80] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 292.171ms 200 application/json; charset=utf-8
2020-06-05 18:43:11,164 [91] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 60.9427ms.
2020-06-05 18:43:11,167 [91] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:43:11,171 [91] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 225.5919ms
2020-06-05 18:43:11,175 [91] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 298.4923ms 200 application/json; charset=utf-8
2020-06-05 18:43:11,218 [91] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-05 18:43:11,220 [91] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:43:11,223 [91] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.4571ms 204 
2020-06-05 18:43:11,227 [80] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 170
2020-06-05 18:43:11,229 [80] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:43:11,231 [80] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:43:11,234 [80] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:43:11,237 [80] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:43:11,258 [80] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-05 18:43:11,281 [80] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL) AND ([x].[qty] = 0.0)
2020-06-05 18:43:11,303 [80] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-05 18:43:11,326 [80] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-05 18:43:11,330 [80] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 68.9154ms.
2020-06-05 18:43:11,332 [80] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:43:11,335 [80] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 98.1493ms
2020-06-05 18:43:11,341 [80] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 111.0345ms 200 application/json; charset=utf-8
2020-06-05 18:43:12,276 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8  
2020-06-05 18:43:12,278 [91] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8  
2020-06-05 18:43:12,280 [89] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workprocess/list?api-version=8  
2020-06-05 18:43:12,292 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:43:12,295 [89] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:43:12,297 [91] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:43:12,301 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 25.8691ms 204 
2020-06-05 18:43:12,304 [89] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 22.2084ms 204 
2020-06-05 18:43:12,307 [91] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 26.8226ms 204 
2020-06-05 18:43:12,322 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workprocess/list?api-version=8 application/json;charset=UTF-8 150
2020-06-05 18:43:12,326 [89] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8 application/json;charset=UTF-8 131
2020-06-05 18:43:12,327 [91] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 139
2020-06-05 18:43:12,332 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:43:12,334 [89] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:43:12,336 [91] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:43:12,338 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:43:12,341 [89] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:43:12,343 [91] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:43:12,348 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workprocess"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workprocess.WorkprocessRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkprocessController (DncZeus.Api).
2020-06-05 18:43:12,351 [89] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkDate", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkDate(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-05 18:43:12,352 [91] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-05 18:43:12,354 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:43:12,356 [89] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:43:12,358 [91] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:43:12,378 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:43:12,411 [91] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-06-05 18:43:12,412 [89] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) - Validation state: Valid
2020-06-05 18:43:12,466 [91] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (51ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty',isnull(h.targetOut ,0) as 'targetOut',isnull(h.realityOut,0) as 'realityOut',isnull(h.sumTime,0) as 'sumTime',isnull(h.status,0) as 'status'
from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=a.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=a.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=a.factoryGuid)
left join (
select sum(outline.output) as 'todayDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.factoryGuid
) as g on(g.factoryGuid=a.factoryGuid)
left join (
	select aa.targetOut,aa.realityOut,aa.sumTime,aa.factoryGuid,aa.status from ManFactoryWorkout aa where wrokDate=@p3 and factoryGuid=@p0
) as h on(h.factoryGuid=a.factoryGuid)
2020-06-05 18:43:12,468 [89] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (33ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__payload_workDate_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[cadre], [x].[cadreLeave], [x].[cadreRest], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[logistic], [x].[logisticLeave], [x].[logisticRest], [x].[moddate], [x].[moduser], [x].[workDate], [x].[worker], [x].[workerLeave], [x].[workerRest]
FROM [ManFactoryWorkdate] AS [x]
WHERE ([x].[factoryGuid] = @__payload_factoryGuid_0) AND ([x].[workDate] = @__payload_workDate_1)
2020-06-05 18:43:12,471 [91] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 56.5738ms.
2020-06-05 18:43:12,470 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (35ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[factoryGuid], [t].[workCode], [t].[workName], [t].[rate], [t].[isvalid], [t].[credate], [t].[creuser], [t].[moddate], [t].[moduser], [t].[factoryName]
FROM (
    SELECT [a].[Guid], [a].[OrgID], [a].[factoryGuid], [a].[workCode], [a].[workName], [a].[rate], [a].[isvalid], [a].[credate], [a].[creuser], [a].[moddate], [a].[moduser], [b].[name] AS [factoryName], ROW_NUMBER() OVER(ORDER BY [a].[factoryGuid], [a].[workCode]) AS [__RowNumber__]
    FROM [ManWorkProcess] AS [a]
    INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
    WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-05 18:43:12,474 [89] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 58.0652ms.
2020-06-05 18:43:12,476 [91] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:43:12,479 [89] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-05 18:43:12,501 [91] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 126.0756ms
2020-06-05 18:43:12,503 [89] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) in 148.6759ms
2020-06-05 18:43:12,505 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkProcess] AS [a]
INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
2020-06-05 18:43:12,507 [91] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 184.228ms 200 application/json; charset=utf-8
2020-06-05 18:43:12,511 [89] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 189.1222ms 200 application/json; charset=utf-8
2020-06-05 18:43:12,514 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 100.2666ms.
2020-06-05 18:43:12,518 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:43:12,521 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) in 167.573ms
2020-06-05 18:43:12,525 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 204.7119ms 200 application/json; charset=utf-8
2020-06-05 18:43:40,730 [94] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:43:40,744 [94] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:43:40,757 [94] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 26.4525ms 204 
2020-06-05 18:43:40,761 [90] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:43:40,765 [90] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:43:40,768 [90] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:43:40,770 [90] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-05 18:43:40,776 [90] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:43:40,797 [90] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-05 18:43:40,821 [90] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-05 18:43:40,824 [90] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23.7281ms.
2020-06-05 18:43:40,826 [90] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:43:40,828 [90] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 55.2211ms
2020-06-05 18:43:40,832 [90] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 70.4203ms 200 application/json; charset=utf-8
2020-06-05 18:44:01,067 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v1/account/profile  
2020-06-05 18:44:01,080 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:44:01,083 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 16.3497ms 204 
2020-06-05 18:44:01,099 [89] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v1/account/profile  
2020-06-05 18:44:01,104 [89] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:44:01,108 [89] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:44:01,110 [89] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Profile() on controller DncZeus.Api.Controllers.AccountController (DncZeus.Api).
2020-06-05 18:44:01,113 [89] INFO  Microsoft.AspNetCore.Authorization.DefaultAuthorizationService [(null)]  - Authorization was successful.
2020-06-05 18:44:01,115 [89] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:44:01,166 [89] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) - Validation state: Valid
2020-06-05 18:44:01,211 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (37ms) [Parameters=[@__Parse_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[ID], [x].[Code], [x].[Name], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser]
FROM [MisOrganization] AS [x]
WHERE [x].[ID] = @__Parse_0
2020-06-05 18:44:01,261 [94] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (47ms) [Parameters=[@__guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[EmpName], [x].[EmpNo], [x].[code], [x].[credate], [x].[creuser], [x].[depname], [x].[depno], [x].[email], [x].[enabled], [x].[jobname], [x].[jobno], [x].[moddate], [x].[moduser], [x].[pwd], [x].[telno], [x].[userLogo], [x].[username], [x].[userno], [x].[utype], [x].[wxAccount], [x].[wxId], [x].[wxMail], [x].[wxName], [x].[wxPhone], [x].[wxPwd]
FROM [Secuser] AS [x]
WHERE [x].[Guid] = @__guid_0
2020-06-05 18:44:01,303 [89] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (35ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[Alias], [x].[BeforeCloseFun], [x].[Component], [x].[CreatedByUserGuid], [x].[CreatedByUserName], [x].[CreatedOn], [x].[Description], [x].[HideInMenu], [x].[Icon], [x].[IsDefaultRouter], [x].[IsDeleted], [x].[Level], [x].[ModifiedByUserGuid], [x].[ModifiedByUserName], [x].[ModifiedOn], [x].[Name], [x].[NotCache], [x].[ParentGuid], [x].[ParentName], [x].[Sort], [x].[Status], [x].[Url]
FROM [DncMenu] AS [x]
WHERE ([x].[IsDeleted] = 0) AND ([x].[Status] = 1)
2020-06-05 18:44:01,341 [89] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (29ms) [Parameters=[@__user_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secuprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE [x].[userid] = @__user_Guid_0
ORDER BY [b0].[prgno]
2020-06-05 18:44:01,365 [89] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__groupid_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secgprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE CONVERT(VARCHAR(36), [x].[groupid]) = @__groupid_0
ORDER BY [b0].[prgno]
2020-06-05 18:44:01,368 [89] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 197.1976ms.
2020-06-05 18:44:01,370 [89] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-05 18:44:01,374 [89] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) in 259.9413ms
2020-06-05 18:44:01,378 [89] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 277.7918ms 200 application/json; charset=utf-8
2020-06-05 18:44:01,386 [89] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-05 18:44:01,394 [89] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:44:01,397 [89] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 10.3914ms 204 
2020-06-05 18:44:01,400 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-05 18:44:01,403 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:44:01,410 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:44:01,412 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "LoadMenuTree", controller = "Uprg"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult LoadMenuTree() on controller DncZeus.Api.Controllers.Api.Sec.UprgController (DncZeus.Api).
2020-06-05 18:44:01,416 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:44:01,435 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) - Validation state: Valid
2020-06-05 18:44:01,460 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[icon], [p].[sysname], [p].[sysno], [p].[sysorder]
FROM [Secsys] AS [p]
ORDER BY [p].[sysorder]
2020-06-05 18:44:01,486 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[funname], [p].[funno], [p].[funorder], [p].[icon], [p].[sysid]
FROM [Secfun] AS [p]
ORDER BY [p].[funorder]
2020-06-05 18:44:01,515 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[enabled], [x].[funid], [x].[icon], [x].[mainid], [x].[prgcomp], [x].[prgname], [x].[prgno], [x].[prgorder], [x].[prgtype], [x].[program], [x].[runtype], [x].[sysid]
FROM [Secprg] AS [x]
WHERE [x].[enabled] = 'Y'
ORDER BY [x].[prgorder]
2020-06-05 18:44:01,548 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[butid], [p].[butname], [p].[butno], [p].[butorder], [p].[funid], [p].[prgid], [p].[sysid]
FROM [Secprgbut] AS [p]
ORDER BY [p].[butorder]
2020-06-05 18:44:01,553 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 114.2707ms.
2020-06-05 18:44:01,557 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-05 18:44:01,561 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) in 145.1599ms
2020-06-05 18:44:01,566 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 163.815ms 200 application/json; charset=utf-8
2020-06-05 18:44:02,116 [89] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/Upload/img/20200627040310.png  
2020-06-05 18:44:02,118 [89] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 2.5344ms 404 
2020-06-05 18:44:02,157 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-06-05 18:44:02,161 [90] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:44:02,162 [94] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-06-05 18:44:02,171 [90] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:44:02,169 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:44:02,176 [94] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:44:02,178 [90] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 31.103ms 204 
2020-06-05 18:44:02,234 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 39.7975ms 204 
2020-06-05 18:44:02,239 [94] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 38.3422ms 204 
2020-06-05 18:44:02,240 [90] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:44:02,242 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-06-05 18:44:02,246 [94] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 170
2020-06-05 18:44:02,249 [90] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:44:02,252 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:44:02,254 [94] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:44:02,257 [90] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:44:02,260 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:44:02,261 [94] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:44:02,263 [90] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-05 18:44:02,267 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-06-05 18:44:02,269 [94] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:44:02,271 [90] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:44:02,274 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:44:02,276 [94] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:44:02,295 [90] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-05 18:44:02,349 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:44:02,350 [94] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:44:02,405 [90] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-05 18:44:02,416 [90] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 77.7167ms.
2020-06-05 18:44:02,418 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (45ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-06-05 18:44:02,420 [94] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (42ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-05 18:44:02,424 [90] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:44:02,468 [90] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 179.9227ms
2020-06-05 18:44:02,470 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (42ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-06-05 18:44:02,477 [94] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (43ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-05 18:44:02,478 [90] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 238.3697ms 200 application/json; charset=utf-8
2020-06-05 18:44:02,480 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 108.1131ms.
2020-06-05 18:44:02,484 [94] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 109.0361ms.
2020-06-05 18:44:02,486 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:44:02,489 [94] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:44:02,496 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 220.4345ms
2020-06-05 18:44:02,498 [94] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 220.212ms
2020-06-05 18:44:02,503 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 261.8863ms 200 application/json; charset=utf-8
2020-06-05 18:44:02,508 [94] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 259.793ms 200 application/json; charset=utf-8
2020-06-05 18:44:02,550 [94] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-05 18:44:02,551 [94] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:44:02,554 [94] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 4.0269ms 204 
2020-06-05 18:44:02,559 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 170
2020-06-05 18:44:02,562 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:44:02,565 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:44:02,567 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:44:02,570 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:44:02,591 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-05 18:44:02,614 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL) AND ([x].[qty] = 0.0)
2020-06-05 18:44:02,639 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-05 18:44:02,675 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (27ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-05 18:44:02,677 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 83.7867ms.
2020-06-05 18:44:02,679 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:44:02,681 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 111.6639ms
2020-06-05 18:44:02,684 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 125.8326ms 200 application/json; charset=utf-8
2020-06-05 18:44:03,681 [98] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8  
2020-06-05 18:44:03,682 [90] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workprocess/list?api-version=8  
2020-06-05 18:44:03,684 [94] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8  
2020-06-05 18:44:03,690 [98] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:44:03,699 [90] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:44:03,702 [94] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:44:03,711 [98] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 24.7713ms 204 
2020-06-05 18:44:03,714 [90] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 26.845ms 204 
2020-06-05 18:44:03,716 [94] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 28.0211ms 204 
2020-06-05 18:44:03,724 [98] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 139
2020-06-05 18:44:03,726 [90] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workprocess/list?api-version=8 application/json;charset=UTF-8 150
2020-06-05 18:44:03,728 [94] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8 application/json;charset=UTF-8 131
2020-06-05 18:44:03,731 [98] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:44:03,735 [90] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:44:03,739 [94] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:44:03,741 [98] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:44:03,743 [90] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:44:03,744 [94] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:44:03,746 [98] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-05 18:44:03,749 [90] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workprocess"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workprocess.WorkprocessRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkprocessController (DncZeus.Api).
2020-06-05 18:44:03,751 [94] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkDate", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkDate(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-05 18:44:03,775 [98] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:44:03,779 [90] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:44:03,786 [94] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:44:03,831 [90] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) - Validation state: Valid
2020-06-05 18:44:03,832 [94] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) - Validation state: Valid
2020-06-05 18:44:03,833 [98] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-06-05 18:44:03,881 [94] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (46ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__payload_workDate_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[cadre], [x].[cadreLeave], [x].[cadreRest], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[logistic], [x].[logisticLeave], [x].[logisticRest], [x].[moddate], [x].[moduser], [x].[workDate], [x].[worker], [x].[workerLeave], [x].[workerRest]
FROM [ManFactoryWorkdate] AS [x]
WHERE ([x].[factoryGuid] = @__payload_factoryGuid_0) AND ([x].[workDate] = @__payload_workDate_1)
2020-06-05 18:44:03,883 [90] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (46ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[factoryGuid], [t].[workCode], [t].[workName], [t].[rate], [t].[isvalid], [t].[credate], [t].[creuser], [t].[moddate], [t].[moduser], [t].[factoryName]
FROM (
    SELECT [a].[Guid], [a].[OrgID], [a].[factoryGuid], [a].[workCode], [a].[workName], [a].[rate], [a].[isvalid], [a].[credate], [a].[creuser], [a].[moddate], [a].[moduser], [b].[name] AS [factoryName], ROW_NUMBER() OVER(ORDER BY [a].[factoryGuid], [a].[workCode]) AS [__RowNumber__]
    FROM [ManWorkProcess] AS [a]
    INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
    WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-05 18:44:03,884 [98] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (46ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty',isnull(h.targetOut ,0) as 'targetOut',isnull(h.realityOut,0) as 'realityOut',isnull(h.sumTime,0) as 'sumTime',isnull(h.status,0) as 'status'
from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=a.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=a.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=a.factoryGuid)
left join (
select sum(outline.output) as 'todayDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.factoryGuid
) as g on(g.factoryGuid=a.factoryGuid)
left join (
	select aa.targetOut,aa.realityOut,aa.sumTime,aa.factoryGuid,aa.status from ManFactoryWorkout aa where wrokDate=@p3 and factoryGuid=@p0
) as h on(h.factoryGuid=a.factoryGuid)
2020-06-05 18:44:03,886 [94] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 50.8873ms.
2020-06-05 18:44:03,890 [98] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 52.2044ms.
2020-06-05 18:44:03,911 [94] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-05 18:44:03,913 [98] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:44:03,914 [90] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkProcess] AS [a]
INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
2020-06-05 18:44:03,916 [94] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) in 162.1764ms
2020-06-05 18:44:03,942 [98] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 168.5867ms
2020-06-05 18:44:03,944 [90] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 106.9194ms.
2020-06-05 18:44:03,947 [94] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 220.9786ms 200 application/json; charset=utf-8
2020-06-05 18:44:03,949 [98] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 227.3353ms 200 application/json; charset=utf-8
2020-06-05 18:44:03,951 [90] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:44:03,954 [90] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) in 200.3193ms
2020-06-05 18:44:03,956 [90] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 236.2114ms 200 application/json; charset=utf-8
2020-06-05 18:44:05,839 [98] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 206
2020-06-05 18:44:05,843 [98] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:44:05,851 [98] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:44:05,857 [98] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-05 18:44:05,862 [98] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:44:05,886 [98] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-05 18:44:05,914 [98] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND ([x].[qty] = 0.0)
2020-06-05 18:44:05,940 [98] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid), @__item_workName_2='?' (Size = 30) (DbType = AnsiString), @__item_workName_3='?' (Size = 30) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ((([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND (([b0].[workName] <> @__item_workName_2) OR [b0].[workName] IS NULL)) AND (([b0].[workName] <> @__item_workName_3) OR [b0].[workName] IS NULL)
2020-06-05 18:44:05,965 [98] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid), @__item_workName_2='?' (Size = 30) (DbType = AnsiString), @__item_workName_3='?' (Size = 30) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ((([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND (([b0].[workName] <> @__item_workName_2) OR [b0].[workName] IS NULL)) AND (([b0].[workName] <> @__item_workName_3) OR [b0].[workName] IS NULL)
2020-06-05 18:44:05,967 [98] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 78.0025ms.
2020-06-05 18:44:05,971 [98] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:44:05,975 [98] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 113.9678ms
2020-06-05 18:44:05,979 [98] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 139.8196ms 200 application/json; charset=utf-8
2020-06-05 18:44:06,330 [98] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 139
2020-06-05 18:44:06,336 [98] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:44:06,343 [98] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:44:06,346 [98] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-05 18:44:06,348 [98] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:44:06,368 [98] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-06-05 18:44:06,395 [98] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty',isnull(h.targetOut ,0) as 'targetOut',isnull(h.realityOut,0) as 'realityOut',isnull(h.sumTime,0) as 'sumTime',isnull(h.status,0) as 'status'
from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=a.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=a.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=a.factoryGuid)
left join (
select sum(outline.output) as 'todayDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.factoryGuid
) as g on(g.factoryGuid=a.factoryGuid)
left join (
	select aa.targetOut,aa.realityOut,aa.sumTime,aa.factoryGuid,aa.status from ManFactoryWorkout aa where wrokDate=@p3 and factoryGuid=@p0
) as h on(h.factoryGuid=a.factoryGuid)
2020-06-05 18:44:06,398 [98] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 27.0261ms.
2020-06-05 18:44:06,400 [98] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:44:06,402 [98] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 54.312ms
2020-06-05 18:44:06,407 [98] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 77.1107ms 200 application/json; charset=utf-8
2020-06-05 18:44:32,058 [89] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:44:32,083 [89] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:44:32,098 [89] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 27.876ms 204 
2020-06-05 18:44:32,124 [89] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:44:32,141 [89] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:44:32,145 [89] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:44:32,149 [89] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-05 18:44:32,152 [89] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:44:32,175 [89] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-05 18:44:32,201 [89] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-05 18:44:32,205 [89] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 25.5107ms.
2020-06-05 18:44:32,207 [89] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:44:32,211 [89] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 59.0177ms
2020-06-05 18:44:32,229 [89] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 94.7942ms 200 application/json; charset=utf-8
2020-06-05 18:45:02,039 [94] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:45:02,051 [94] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:45:02,066 [94] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 24.9443ms 204 
2020-06-05 18:45:02,084 [94] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-05 18:45:02,087 [94] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-05 18:45:02,090 [94] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-05 18:45:02,093 [94] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-05 18:45:02,096 [94] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-05 18:45:02,115 [94] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-05 18:45:02,138 [94] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-05 18:45:02,141 [94] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23.7189ms.
2020-06-05 18:45:02,144 [94] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-05 18:45:02,155 [94] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 50.7257ms
2020-06-05 18:45:02,158 [94] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 72.9499ms 200 application/json; charset=utf-8
