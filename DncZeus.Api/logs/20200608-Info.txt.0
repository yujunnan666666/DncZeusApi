2020-06-08 08:40:00,301 [1] INFO  Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager [(null)]  - User profile is available. Using 'C:\Users\June\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-06-08 08:40:00,934 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/swagger/index.html  
2020-06-08 08:40:00,936 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 DEBUG http://localhost:54321/  0
2020-06-08 08:40:00,979 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 38.001ms 200 
2020-06-08 08:40:01,511 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 570.032ms 200 text/html
2020-06-08 08:40:01,731 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/swagger/v3/swagger.json  
2020-06-08 08:40:02,052 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 323.0328ms 200 application/json;charset=utf-8
2020-06-08 08:40:12,589 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/org/list?api-version=5  
2020-06-08 08:40:12,594 [10] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:40:12,601 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 9.4259ms 204 
2020-06-08 08:40:12,605 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/org/list?api-version=5  
2020-06-08 08:40:12,688 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '06/07/2020 10:29:59', Current time: '06/08/2020 00:40:12'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2020-06-08 08:40:12,693 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '06/07/2020 10:29:59', Current time: '06/08/2020 00:40:12'.
2020-06-08 08:40:12,695 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:40:12,742 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Org"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List() on controller DncZeus.Api.Controllers.Mis.OrgController (DncZeus.Api).
2020-06-08 08:40:13,509 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:40:13,591 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Mis.OrgController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 08:40:14,533 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/oauth/auth?userno=admin&password=123456&orgid=1  
2020-06-08 08:40:14,535 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:40:14,551 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Auth", controller = "Oauth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Auth(System.String, System.String, Int32) on controller DncZeus.Api.Controllers.OauthController (DncZeus.Api).
2020-06-08 08:40:14,561 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:40:14,597 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.OauthController.Auth (DncZeus.Api) - Validation state: Valid
2020-06-08 08:40:14,731 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (52ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [m].[ID], [m].[Code], [m].[Name], [m].[credate], [m].[creuser], [m].[moddate], [m].[moduser]
FROM [MisOrganization] AS [m]
2020-06-08 08:40:14,733 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (50ms) [Parameters=[@__Trim_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[EmpName], [x].[EmpNo], [x].[code], [x].[credate], [x].[creuser], [x].[depname], [x].[depno], [x].[email], [x].[enabled], [x].[jobname], [x].[jobno], [x].[moddate], [x].[moduser], [x].[pwd], [x].[telno], [x].[userLogo], [x].[username], [x].[userno], [x].[utype], [x].[wxAccount], [x].[wxId], [x].[wxMail], [x].[wxName], [x].[wxPhone], [x].[wxPwd]
FROM [Secuser] AS [x]
WHERE [x].[userno] = @__Trim_0
2020-06-08 08:40:14,782 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Mis.OrgController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1187.5858ms.
2020-06-08 08:40:14,784 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.OauthController.Auth (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 182.1148ms.
2020-06-08 08:40:14,792 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 08:40:14,793 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 08:40:14,803 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Mis.OrgController.List (DncZeus.Api) in 2057.269ms
2020-06-08 08:40:14,825 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.OauthController.Auth (DncZeus.Api) in 248.228ms
2020-06-08 08:40:14,828 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 2222.6399ms 200 application/json; charset=utf-8
2020-06-08 08:40:14,829 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 296.7628ms 200 application/json; charset=utf-8
2020-06-08 08:40:16,694 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/oauth/auth?userno=admin&password=123456&orgid=1  
2020-06-08 08:40:16,696 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:40:16,699 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Auth", controller = "Oauth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Auth(System.String, System.String, Int32) on controller DncZeus.Api.Controllers.OauthController (DncZeus.Api).
2020-06-08 08:40:16,701 [15] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:40:16,718 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.OauthController.Auth (DncZeus.Api) - Validation state: Valid
2020-06-08 08:40:16,751 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (27ms) [Parameters=[@__Trim_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[EmpName], [x].[EmpNo], [x].[code], [x].[credate], [x].[creuser], [x].[depname], [x].[depno], [x].[email], [x].[enabled], [x].[jobname], [x].[jobno], [x].[moddate], [x].[moduser], [x].[pwd], [x].[telno], [x].[userLogo], [x].[username], [x].[userno], [x].[utype], [x].[wxAccount], [x].[wxId], [x].[wxMail], [x].[wxName], [x].[wxPhone], [x].[wxPwd]
FROM [Secuser] AS [x]
WHERE [x].[userno] = @__Trim_0
2020-06-08 08:40:16,754 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.OauthController.Auth (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 32.5449ms.
2020-06-08 08:40:16,756 [15] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 08:40:16,759 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.OauthController.Auth (DncZeus.Api) in 57.8847ms
2020-06-08 08:40:16,762 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 68.0905ms 200 application/json; charset=utf-8
2020-06-08 08:40:21,141 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/oauth/auth?userno=admin&password=a123456&orgid=1  
2020-06-08 08:40:21,143 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:40:21,146 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Auth", controller = "Oauth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Auth(System.String, System.String, Int32) on controller DncZeus.Api.Controllers.OauthController (DncZeus.Api).
2020-06-08 08:40:21,150 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:40:21,168 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.OauthController.Auth (DncZeus.Api) - Validation state: Valid
2020-06-08 08:40:21,194 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__Trim_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[EmpName], [x].[EmpNo], [x].[code], [x].[credate], [x].[creuser], [x].[depname], [x].[depno], [x].[email], [x].[enabled], [x].[jobname], [x].[jobno], [x].[moddate], [x].[moduser], [x].[pwd], [x].[telno], [x].[userLogo], [x].[username], [x].[userno], [x].[utype], [x].[wxAccount], [x].[wxId], [x].[wxMail], [x].[wxName], [x].[wxPhone], [x].[wxPwd]
FROM [Secuser] AS [x]
WHERE [x].[userno] = @__Trim_0
2020-06-08 08:40:21,224 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__user_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[orgid], [x].[userid]
FROM [Secuserorg] AS [x]
WHERE [x].[userid] = @__user_Guid_0
2020-06-08 08:40:21,256 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__orgid_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[ID], [x].[Code], [x].[Name], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser]
FROM [MisOrganization] AS [x]
WHERE [x].[ID] = @__orgid_0
2020-06-08 08:40:21,286 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__user_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[groupid], [x].[userid]
FROM [Secguser] AS [x]
WHERE [x].[userid] = @__user_Guid_0
2020-06-08 08:40:21,293 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.OauthController.Auth (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 121.9854ms.
2020-06-08 08:40:21,295 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 08:40:21,298 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.OauthController.Auth (DncZeus.Api) in 148.679ms
2020-06-08 08:40:21,308 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 166.7008ms 200 application/json; charset=utf-8
2020-06-08 08:40:21,329 [14] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v1/account/profile  
2020-06-08 08:40:21,332 [14] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:40:21,334 [14] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 10.28ms 204 
2020-06-08 08:40:21,340 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v1/account/profile  
2020-06-08 08:40:21,345 [7] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:40:21,349 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:40:21,353 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Profile() on controller DncZeus.Api.Controllers.AccountController (DncZeus.Api).
2020-06-08 08:40:21,362 [7] INFO  Microsoft.AspNetCore.Authorization.DefaultAuthorizationService [(null)]  - Authorization was successful.
2020-06-08 08:40:21,365 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:40:21,384 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) - Validation state: Valid
2020-06-08 08:40:21,485 [11] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (51ms) [Parameters=[@__Parse_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[ID], [x].[Code], [x].[Name], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser]
FROM [MisOrganization] AS [x]
WHERE [x].[ID] = @__Parse_0
2020-06-08 08:40:21,547 [14] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (36ms) [Parameters=[@__guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[EmpName], [x].[EmpNo], [x].[code], [x].[credate], [x].[creuser], [x].[depname], [x].[depno], [x].[email], [x].[enabled], [x].[jobname], [x].[jobno], [x].[moddate], [x].[moduser], [x].[pwd], [x].[telno], [x].[userLogo], [x].[username], [x].[userno], [x].[utype], [x].[wxAccount], [x].[wxId], [x].[wxMail], [x].[wxName], [x].[wxPhone], [x].[wxPwd]
FROM [Secuser] AS [x]
WHERE [x].[Guid] = @__guid_0
2020-06-08 08:40:21,581 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[Alias], [x].[BeforeCloseFun], [x].[Component], [x].[CreatedByUserGuid], [x].[CreatedByUserName], [x].[CreatedOn], [x].[Description], [x].[HideInMenu], [x].[Icon], [x].[IsDefaultRouter], [x].[IsDeleted], [x].[Level], [x].[ModifiedByUserGuid], [x].[ModifiedByUserName], [x].[ModifiedOn], [x].[Name], [x].[NotCache], [x].[ParentGuid], [x].[ParentName], [x].[Sort], [x].[Status], [x].[Url]
FROM [DncMenu] AS [x]
WHERE ([x].[IsDeleted] = 0) AND ([x].[Status] = 1)
2020-06-08 08:40:21,667 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__user_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secuprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE [x].[userid] = @__user_Guid_0
ORDER BY [b0].[prgno]
2020-06-08 08:40:21,707 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__groupid_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secgprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE CONVERT(VARCHAR(36), [x].[groupid]) = @__groupid_0
ORDER BY [b0].[prgno]
2020-06-08 08:40:21,709 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 323.0014ms.
2020-06-08 08:40:21,711 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 08:40:21,721 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) in 365.149ms
2020-06-08 08:40:21,725 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 383.8447ms 200 application/json; charset=utf-8
2020-06-08 08:40:23,234 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-08 08:40:23,238 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:40:23,241 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 6.4779ms 204 
2020-06-08 08:40:23,245 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-08 08:40:23,248 [8] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:40:23,251 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:40:23,255 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "LoadMenuTree", controller = "Uprg"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult LoadMenuTree() on controller DncZeus.Api.Controllers.Api.Sec.UprgController (DncZeus.Api).
2020-06-08 08:40:23,259 [8] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:40:23,488 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) - Validation state: Valid
2020-06-08 08:40:23,523 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[icon], [p].[sysname], [p].[sysno], [p].[sysorder]
FROM [Secsys] AS [p]
ORDER BY [p].[sysorder]
2020-06-08 08:40:23,559 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[funname], [p].[funno], [p].[funorder], [p].[icon], [p].[sysid]
FROM [Secfun] AS [p]
ORDER BY [p].[funorder]
2020-06-08 08:40:23,602 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[enabled], [x].[funid], [x].[icon], [x].[mainid], [x].[prgcomp], [x].[prgname], [x].[prgno], [x].[prgorder], [x].[prgtype], [x].[program], [x].[runtype], [x].[sysid]
FROM [Secprg] AS [x]
WHERE [x].[enabled] = 'Y'
ORDER BY [x].[prgorder]
2020-06-08 08:40:23,609 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/Upload/img/20200627040310.png  
2020-06-08 08:40:23,620 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 11.0784ms 404 
2020-06-08 08:40:23,652 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[butid], [p].[butname], [p].[butno], [p].[butorder], [p].[funid], [p].[prgid], [p].[sysid]
FROM [Secprgbut] AS [p]
ORDER BY [p].[butorder]
2020-06-08 08:40:23,678 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 187.0597ms.
2020-06-08 08:40:23,680 [8] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 08:40:23,697 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) in 439.3491ms
2020-06-08 08:40:23,700 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 454.5556ms 200 application/json; charset=utf-8
2020-06-08 08:40:23,751 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:40:23,755 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:40:23,757 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.6394ms 204 
2020-06-08 08:40:23,761 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:40:23,763 [8] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:40:23,765 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:40:23,770 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 08:40:23,776 [8] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:40:23,802 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 08:40:23,854 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (30ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 08:40:23,858 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 53.6522ms.
2020-06-08 08:40:23,860 [8] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:40:23,864 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 90.6206ms
2020-06-08 08:40:23,867 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 105.2401ms 200 application/json; charset=utf-8
2020-06-08 08:40:28,000 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-06-08 08:40:28,002 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-06-08 08:40:28,004 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:40:28,014 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:40:28,027 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 9.3867ms 204 
2020-06-08 08:40:28,028 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 16.9084ms 204 
2020-06-08 08:40:28,039 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 170
2020-06-08 08:40:28,041 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-06-08 08:40:28,043 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:40:28,046 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:40:28,047 [8] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:40:28,051 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:40:28,056 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 08:40:28,059 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-06-08 08:40:28,061 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:40:28,063 [8] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:40:28,121 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 08:40:28,123 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 08:40:28,164 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-06-08 08:40:28,191 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-08 08:40:28,218 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-08 08:40:28,221 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 94.2328ms.
2020-06-08 08:40:28,225 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:40:28,246 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-06-08 08:40:28,248 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 188.2308ms
2020-06-08 08:40:28,250 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 122.8637ms.
2020-06-08 08:40:28,252 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 220.2192ms 200 application/json; charset=utf-8
2020-06-08 08:40:28,255 [8] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:40:28,262 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 198.7053ms
2020-06-08 08:40:28,264 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 232.2894ms 200 application/json; charset=utf-8
2020-06-08 08:40:28,268 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-08 08:40:28,271 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:40:28,274 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 4.9783ms 204 
2020-06-08 08:40:28,276 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 170
2020-06-08 08:40:28,278 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:40:28,280 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:40:28,284 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 08:40:28,288 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:40:28,307 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-08 08:40:28,359 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (27ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL) AND ([x].[qty] = 0.0)
2020-06-08 08:40:28,390 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 08:40:28,418 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 08:40:28,421 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 111.8887ms.
2020-06-08 08:40:28,424 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:40:28,427 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 141.3113ms
2020-06-08 08:40:28,429 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 153.7483ms 200 application/json; charset=utf-8
2020-06-08 08:40:53,580 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:40:53,588 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:40:53,590 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 10.0228ms 204 
2020-06-08 08:40:53,594 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:40:53,596 [15] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:40:53,598 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:40:53,628 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 08:40:53,631 [15] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:40:53,647 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 08:40:53,668 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (18ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 08:40:53,672 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 21.441ms.
2020-06-08 08:40:53,675 [15] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:40:53,684 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 47.6491ms
2020-06-08 08:40:53,689 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 92.9699ms 200 application/json; charset=utf-8
2020-06-08 08:41:23,289 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8  
2020-06-08 08:41:23,292 [20] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8  
2020-06-08 08:41:23,296 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workprocess/list?api-version=8  
2020-06-08 08:41:23,310 [20] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:41:23,313 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:41:23,326 [20] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 26.9648ms 204 
2020-06-08 08:41:23,340 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:41:23,348 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 40.8428ms 204 
2020-06-08 08:41:23,350 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 139
2020-06-08 08:41:23,360 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 59.7307ms 204 
2020-06-08 08:41:23,361 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8 application/json;charset=UTF-8 131
2020-06-08 08:41:23,364 [7] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:41:23,366 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workprocess/list?api-version=8 application/json;charset=UTF-8 150
2020-06-08 08:41:23,370 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:41:23,372 [8] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:41:23,374 [15] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:41:23,377 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:41:23,380 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:41:23,382 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-08 08:41:23,387 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:41:23,389 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkDate", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkDate(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-08 08:41:23,391 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workprocess"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workprocess.WorkprocessRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkprocessController (DncZeus.Api).
2020-06-08 08:41:23,394 [8] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:41:23,395 [15] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:41:23,444 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 08:41:23,445 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) - Validation state: Valid
2020-06-08 08:41:23,447 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-06-08 08:41:23,478 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty',isnull(h.targetOut ,0) as 'targetOut',isnull(h.realityOut,0) as 'realityOut',isnull(h.sumTime,0) as 'sumTime',isnull(h.status,0) as 'status'
from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=a.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=a.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=a.factoryGuid)
left join (
select sum(outline.output) as 'todayDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.factoryGuid
) as g on(g.factoryGuid=a.factoryGuid)
left join (
	select aa.targetOut,aa.realityOut,aa.sumTime,aa.factoryGuid,aa.status from ManFactoryWorkout aa where wrokDate=@p3 and factoryGuid=@p0
) as h on(h.factoryGuid=a.factoryGuid)
2020-06-08 08:41:23,503 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__payload_workDate_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[cadre], [x].[cadreLeave], [x].[cadreRest], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[logistic], [x].[logisticLeave], [x].[logisticRest], [x].[moddate], [x].[moduser], [x].[workDate], [x].[worker], [x].[workerLeave], [x].[workerRest]
FROM [ManFactoryWorkdate] AS [x]
WHERE ([x].[factoryGuid] = @__payload_factoryGuid_0) AND ([x].[workDate] = @__payload_workDate_1)
2020-06-08 08:41:23,517 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 68.1587ms.
2020-06-08 08:41:23,520 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:41:23,547 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[factoryGuid], [t].[workCode], [t].[workName], [t].[rate], [t].[isvalid], [t].[credate], [t].[creuser], [t].[moddate], [t].[moduser], [t].[factoryName]
FROM (
    SELECT [a].[Guid], [a].[OrgID], [a].[factoryGuid], [a].[workCode], [a].[workName], [a].[rate], [a].[isvalid], [a].[credate], [a].[creuser], [a].[moddate], [a].[moduser], [b].[name] AS [factoryName], ROW_NUMBER() OVER(ORDER BY [a].[factoryGuid], [a].[workCode]) AS [__RowNumber__]
    FROM [ManWorkProcess] AS [a]
    INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
    WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-08 08:41:23,553 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 167.9709ms
2020-06-08 08:41:23,556 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 206.5423ms 200 application/json; charset=utf-8
2020-06-08 08:41:23,586 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkProcess] AS [a]
INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
2020-06-08 08:41:23,589 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 140.3859ms.
2020-06-08 08:41:23,594 [15] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:41:23,600 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 149.7218ms.
2020-06-08 08:41:23,603 [8] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 08:41:23,606 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:41:23,608 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) in 212.8875ms
2020-06-08 08:41:23,610 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:41:23,613 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 258.3671ms 200 application/json; charset=utf-8
2020-06-08 08:41:23,616 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 9.4788ms 204 
2020-06-08 08:41:23,623 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) in 227.7331ms
2020-06-08 08:41:23,624 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:41:23,627 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 262.2054ms 200 application/json; charset=utf-8
2020-06-08 08:41:23,628 [7] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:41:23,631 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:41:23,633 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 08:41:23,636 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:41:23,654 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 08:41:23,675 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 08:41:23,678 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 21.6541ms.
2020-06-08 08:41:23,680 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:41:23,682 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 46.8877ms
2020-06-08 08:41:23,684 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 59.8369ms 200 application/json; charset=utf-8
2020-06-08 08:41:36,290 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v1/account/profile  
2020-06-08 08:41:36,293 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:41:36,298 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.7677ms 204 
2020-06-08 08:41:36,303 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v1/account/profile  
2020-06-08 08:41:36,308 [15] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:41:36,311 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:41:36,313 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Profile() on controller DncZeus.Api.Controllers.AccountController (DncZeus.Api).
2020-06-08 08:41:36,316 [15] INFO  Microsoft.AspNetCore.Authorization.DefaultAuthorizationService [(null)]  - Authorization was successful.
2020-06-08 08:41:36,321 [15] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:41:36,341 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) - Validation state: Valid
2020-06-08 08:41:36,384 [20] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (35ms) [Parameters=[@__Parse_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[ID], [x].[Code], [x].[Name], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser]
FROM [MisOrganization] AS [x]
WHERE [x].[ID] = @__Parse_0
2020-06-08 08:41:36,432 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (42ms) [Parameters=[@__guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[EmpName], [x].[EmpNo], [x].[code], [x].[credate], [x].[creuser], [x].[depname], [x].[depno], [x].[email], [x].[enabled], [x].[jobname], [x].[jobno], [x].[moddate], [x].[moduser], [x].[pwd], [x].[telno], [x].[userLogo], [x].[username], [x].[userno], [x].[utype], [x].[wxAccount], [x].[wxId], [x].[wxMail], [x].[wxName], [x].[wxPhone], [x].[wxPwd]
FROM [Secuser] AS [x]
WHERE [x].[Guid] = @__guid_0
2020-06-08 08:41:36,465 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (29ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[Alias], [x].[BeforeCloseFun], [x].[Component], [x].[CreatedByUserGuid], [x].[CreatedByUserName], [x].[CreatedOn], [x].[Description], [x].[HideInMenu], [x].[Icon], [x].[IsDefaultRouter], [x].[IsDeleted], [x].[Level], [x].[ModifiedByUserGuid], [x].[ModifiedByUserName], [x].[ModifiedOn], [x].[Name], [x].[NotCache], [x].[ParentGuid], [x].[ParentName], [x].[Sort], [x].[Status], [x].[Url]
FROM [DncMenu] AS [x]
WHERE ([x].[IsDeleted] = 0) AND ([x].[Status] = 1)
2020-06-08 08:41:36,499 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (29ms) [Parameters=[@__user_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secuprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE [x].[userid] = @__user_Guid_0
ORDER BY [b0].[prgno]
2020-06-08 08:41:36,529 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (27ms) [Parameters=[@__groupid_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secgprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE CONVERT(VARCHAR(36), [x].[groupid]) = @__groupid_0
ORDER BY [b0].[prgno]
2020-06-08 08:41:36,532 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 187.9563ms.
2020-06-08 08:41:36,537 [15] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 08:41:36,539 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) in 223.2834ms
2020-06-08 08:41:36,541 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 238.5913ms 200 application/json; charset=utf-8
2020-06-08 08:41:36,549 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-08 08:41:36,555 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:41:36,558 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 8.8302ms 204 
2020-06-08 08:41:36,561 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-08 08:41:36,564 [7] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:41:36,567 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:41:36,571 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "LoadMenuTree", controller = "Uprg"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult LoadMenuTree() on controller DncZeus.Api.Controllers.Api.Sec.UprgController (DncZeus.Api).
2020-06-08 08:41:36,574 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:41:36,593 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) - Validation state: Valid
2020-06-08 08:41:36,619 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[icon], [p].[sysname], [p].[sysno], [p].[sysorder]
FROM [Secsys] AS [p]
ORDER BY [p].[sysorder]
2020-06-08 08:41:36,641 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[funname], [p].[funno], [p].[funorder], [p].[icon], [p].[sysid]
FROM [Secfun] AS [p]
ORDER BY [p].[funorder]
2020-06-08 08:41:36,664 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[enabled], [x].[funid], [x].[icon], [x].[mainid], [x].[prgcomp], [x].[prgname], [x].[prgno], [x].[prgorder], [x].[prgtype], [x].[program], [x].[runtype], [x].[sysid]
FROM [Secprg] AS [x]
WHERE [x].[enabled] = 'Y'
ORDER BY [x].[prgorder]
2020-06-08 08:41:36,691 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[butid], [p].[butname], [p].[butno], [p].[butorder], [p].[funid], [p].[prgid], [p].[sysid]
FROM [Secprgbut] AS [p]
ORDER BY [p].[butorder]
2020-06-08 08:41:36,694 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 97.6484ms.
2020-06-08 08:41:36,696 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 08:41:36,700 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) in 125.8175ms
2020-06-08 08:41:36,703 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 141.3781ms 200 application/json; charset=utf-8
2020-06-08 08:41:37,343 [20] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/Upload/img/20200627040310.png  
2020-06-08 08:41:37,346 [20] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 2.8769ms 404 
2020-06-08 08:41:37,372 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-06-08 08:41:37,376 [25] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-06-08 08:41:37,405 [26] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:41:37,410 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:41:37,415 [25] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:41:37,424 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 44.7925ms 204 
2020-06-08 08:41:37,431 [25] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 50.0705ms 204 
2020-06-08 08:41:37,436 [26] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:41:37,438 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-06-08 08:41:37,444 [20] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 170
2020-06-08 08:41:37,449 [26] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 66.0773ms 204 
2020-06-08 08:41:37,456 [20] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:41:37,459 [7] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:41:37,461 [25] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:41:37,466 [20] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:41:37,470 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:41:37,475 [25] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:41:37,477 [20] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 08:41:37,481 [25] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:41:37,483 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-06-08 08:41:37,485 [20] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:41:37,490 [25] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 08:41:37,492 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:41:37,512 [20] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 08:41:37,514 [25] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:41:37,533 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 08:41:37,579 [25] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 08:41:37,581 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (45ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-06-08 08:41:37,583 [20] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (45ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-08 08:41:37,639 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (53ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-06-08 08:41:37,642 [25] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (50ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 08:41:37,642 [20] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-08 08:41:37,644 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 108.8079ms.
2020-06-08 08:41:37,646 [25] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 60.6836ms.
2020-06-08 08:41:37,648 [20] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 130.9618ms.
2020-06-08 08:41:37,649 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:41:37,653 [25] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:41:37,654 [20] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:41:37,656 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 166.7026ms
2020-06-08 08:41:37,660 [25] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 161.4416ms
2020-06-08 08:41:37,661 [20] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 178.3293ms
2020-06-08 08:41:37,663 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 229.4651ms 200 application/json; charset=utf-8
2020-06-08 08:41:37,665 [25] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 206.8094ms 200 application/json; charset=utf-8
2020-06-08 08:41:37,669 [20] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 228.0781ms 200 application/json; charset=utf-8
2020-06-08 08:41:37,710 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-08 08:41:37,712 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:41:37,714 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 3.9663ms 204 
2020-06-08 08:41:37,717 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 170
2020-06-08 08:41:37,721 [7] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:41:37,724 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:41:37,727 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 08:41:37,729 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:41:37,748 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-08 08:41:37,771 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL) AND ([x].[qty] = 0.0)
2020-06-08 08:41:37,793 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 08:41:37,820 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 08:41:37,822 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 71.5991ms.
2020-06-08 08:41:37,824 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:41:37,828 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 97.6655ms
2020-06-08 08:41:37,830 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 112.9806ms 200 application/json; charset=utf-8
2020-06-08 08:41:39,283 [20] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8  
2020-06-08 08:41:39,287 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8  
2020-06-08 08:41:39,291 [24] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workprocess/list?api-version=8  
2020-06-08 08:41:39,300 [20] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:41:39,305 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:41:39,306 [24] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:41:39,312 [20] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 26.9139ms 204 
2020-06-08 08:41:39,316 [24] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 24.1946ms 204 
2020-06-08 08:41:39,319 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 28.2353ms 204 
2020-06-08 08:41:39,323 [20] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8 application/json;charset=UTF-8 131
2020-06-08 08:41:39,325 [24] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workprocess/list?api-version=8 application/json;charset=UTF-8 150
2020-06-08 08:41:39,329 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 139
2020-06-08 08:41:39,331 [20] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:41:39,333 [24] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:41:39,337 [15] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:41:39,341 [20] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:41:39,343 [24] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:41:39,345 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:41:39,347 [20] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkDate", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkDate(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-08 08:41:39,348 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-08 08:41:39,351 [24] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workprocess"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workprocess.WorkprocessRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkprocessController (DncZeus.Api).
2020-06-08 08:41:39,353 [20] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:41:39,355 [15] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:41:39,358 [24] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:41:39,376 [20] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) - Validation state: Valid
2020-06-08 08:41:39,407 [24] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 08:41:39,409 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-06-08 08:41:39,448 [20] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (37ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__payload_workDate_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[cadre], [x].[cadreLeave], [x].[cadreRest], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[logistic], [x].[logisticLeave], [x].[logisticRest], [x].[moddate], [x].[moduser], [x].[workDate], [x].[worker], [x].[workerLeave], [x].[workerRest]
FROM [ManFactoryWorkdate] AS [x]
WHERE ([x].[factoryGuid] = @__payload_factoryGuid_0) AND ([x].[workDate] = @__payload_workDate_1)
2020-06-08 08:41:39,468 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (37ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty',isnull(h.targetOut ,0) as 'targetOut',isnull(h.realityOut,0) as 'realityOut',isnull(h.sumTime,0) as 'sumTime',isnull(h.status,0) as 'status'
from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=a.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=a.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=a.factoryGuid)
left join (
select sum(outline.output) as 'todayDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.factoryGuid
) as g on(g.factoryGuid=a.factoryGuid)
left join (
	select aa.targetOut,aa.realityOut,aa.sumTime,aa.factoryGuid,aa.status from ManFactoryWorkout aa where wrokDate=@p3 and factoryGuid=@p0
) as h on(h.factoryGuid=a.factoryGuid)
2020-06-08 08:41:39,474 [24] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[factoryGuid], [t].[workCode], [t].[workName], [t].[rate], [t].[isvalid], [t].[credate], [t].[creuser], [t].[moddate], [t].[moduser], [t].[factoryName]
FROM (
    SELECT [a].[Guid], [a].[OrgID], [a].[factoryGuid], [a].[workCode], [a].[workName], [a].[rate], [a].[isvalid], [a].[credate], [a].[creuser], [a].[moddate], [a].[moduser], [b].[name] AS [factoryName], ROW_NUMBER() OVER(ORDER BY [a].[factoryGuid], [a].[workCode]) AS [__RowNumber__]
    FROM [ManWorkProcess] AS [a]
    INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
    WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-08 08:41:39,476 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 43.051ms.
2020-06-08 08:41:39,476 [20] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 79.4241ms.
2020-06-08 08:41:39,479 [15] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:41:39,498 [20] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 08:41:39,503 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 146.4736ms
2020-06-08 08:41:39,504 [24] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkProcess] AS [a]
INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
2020-06-08 08:41:39,506 [20] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) in 152.3064ms
2020-06-08 08:41:39,511 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 182.1869ms 200 application/json; charset=utf-8
2020-06-08 08:41:39,513 [24] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 79.0798ms.
2020-06-08 08:41:39,537 [20] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 197.7393ms 200 application/json; charset=utf-8
2020-06-08 08:41:39,541 [24] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:41:39,544 [24] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) in 187.1922ms
2020-06-08 08:41:39,547 [24] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 225.6674ms 200 application/json; charset=utf-8
2020-06-08 08:42:07,728 [25] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:42:07,738 [25] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:42:07,752 [25] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 15.1175ms 204 
2020-06-08 08:42:07,755 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:42:07,757 [15] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:42:07,760 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:42:07,762 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 08:42:07,765 [15] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:42:07,784 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 08:42:07,807 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 08:42:07,809 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.4477ms.
2020-06-08 08:42:07,811 [15] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:42:07,813 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 48.6559ms
2020-06-08 08:42:07,817 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 61.5459ms 200 application/json; charset=utf-8
2020-06-08 08:42:37,726 [25] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:42:37,735 [25] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:42:37,743 [25] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 11.2817ms 204 
2020-06-08 08:42:37,745 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:42:37,747 [7] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:42:37,751 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:42:37,753 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 08:42:37,756 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:42:37,773 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 08:42:37,795 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 08:42:37,797 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.0765ms.
2020-06-08 08:42:37,801 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:42:37,803 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 47.4679ms
2020-06-08 08:42:37,805 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 60.5492ms 200 application/json; charset=utf-8
2020-06-08 08:42:54,552 [24] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-06-08 08:42:54,575 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-06-08 08:42:54,584 [24] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:42:54,594 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:42:54,595 [24] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 35.7882ms 204 
2020-06-08 08:42:54,598 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 45.7991ms 204 
2020-06-08 08:42:54,601 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 170
2020-06-08 08:42:54,604 [25] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-06-08 08:42:54,610 [15] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:42:54,611 [25] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:42:54,635 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:42:54,636 [25] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:42:54,642 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 08:42:54,645 [25] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-06-08 08:42:54,652 [15] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:42:54,655 [25] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:42:54,708 [25] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 08:42:54,996 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 08:42:55,040 [25] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (290ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-06-08 08:42:55,060 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (44ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-08 08:42:55,063 [25] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-06-08 08:42:55,083 [25] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 355.6609ms.
2020-06-08 08:42:55,085 [25] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:42:55,088 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-08 08:42:55,092 [25] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 438.0569ms
2020-06-08 08:42:55,100 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 94.1544ms.
2020-06-08 08:42:55,105 [25] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 499.1761ms 200 application/json; charset=utf-8
2020-06-08 08:42:55,108 [15] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:42:55,110 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 463.4349ms
2020-06-08 08:42:55,113 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 513.0583ms 200 application/json; charset=utf-8
2020-06-08 08:42:55,157 [25] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-08 08:42:55,161 [25] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:42:55,163 [25] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 7.4535ms 204 
2020-06-08 08:42:55,167 [25] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 170
2020-06-08 08:42:55,169 [25] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:42:55,172 [25] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:42:55,175 [25] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 08:42:55,179 [25] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:42:55,204 [25] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-08 08:42:55,229 [25] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL) AND ([x].[qty] = 0.0)
2020-06-08 08:42:55,261 [25] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (26ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 08:42:55,287 [25] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 08:42:55,289 [25] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 83.1541ms.
2020-06-08 08:42:55,293 [25] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:42:55,295 [25] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 116.4699ms
2020-06-08 08:42:55,297 [25] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 130.8999ms 200 application/json; charset=utf-8
2020-06-08 08:42:58,186 [33] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v1/account/profile  
2020-06-08 08:42:58,189 [33] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:42:58,194 [33] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 6.4781ms 204 
2020-06-08 08:42:58,196 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v1/account/profile  
2020-06-08 08:42:58,200 [7] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:42:58,203 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:42:58,206 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Profile() on controller DncZeus.Api.Controllers.AccountController (DncZeus.Api).
2020-06-08 08:42:58,209 [7] INFO  Microsoft.AspNetCore.Authorization.DefaultAuthorizationService [(null)]  - Authorization was successful.
2020-06-08 08:42:58,212 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:42:58,233 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) - Validation state: Valid
2020-06-08 08:42:58,292 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (52ms) [Parameters=[@__Parse_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[ID], [x].[Code], [x].[Name], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser]
FROM [MisOrganization] AS [x]
WHERE [x].[ID] = @__Parse_0
2020-06-08 08:42:58,327 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (31ms) [Parameters=[@__guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[EmpName], [x].[EmpNo], [x].[code], [x].[credate], [x].[creuser], [x].[depname], [x].[depno], [x].[email], [x].[enabled], [x].[jobname], [x].[jobno], [x].[moddate], [x].[moduser], [x].[pwd], [x].[telno], [x].[userLogo], [x].[username], [x].[userno], [x].[utype], [x].[wxAccount], [x].[wxId], [x].[wxMail], [x].[wxName], [x].[wxPhone], [x].[wxPwd]
FROM [Secuser] AS [x]
WHERE [x].[Guid] = @__guid_0
2020-06-08 08:42:58,352 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[Alias], [x].[BeforeCloseFun], [x].[Component], [x].[CreatedByUserGuid], [x].[CreatedByUserName], [x].[CreatedOn], [x].[Description], [x].[HideInMenu], [x].[Icon], [x].[IsDefaultRouter], [x].[IsDeleted], [x].[Level], [x].[ModifiedByUserGuid], [x].[ModifiedByUserName], [x].[ModifiedOn], [x].[Name], [x].[NotCache], [x].[ParentGuid], [x].[ParentName], [x].[Sort], [x].[Status], [x].[Url]
FROM [DncMenu] AS [x]
WHERE ([x].[IsDeleted] = 0) AND ([x].[Status] = 1)
2020-06-08 08:42:58,394 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (38ms) [Parameters=[@__user_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secuprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE [x].[userid] = @__user_Guid_0
ORDER BY [b0].[prgno]
2020-06-08 08:42:58,418 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__groupid_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secgprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE CONVERT(VARCHAR(36), [x].[groupid]) = @__groupid_0
ORDER BY [b0].[prgno]
2020-06-08 08:42:58,421 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 184.9931ms.
2020-06-08 08:42:58,423 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 08:42:58,425 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) in 217.4023ms
2020-06-08 08:42:58,428 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 232.3614ms 200 application/json; charset=utf-8
2020-06-08 08:42:58,436 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-08 08:42:58,438 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:42:58,441 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 4.5046ms 204 
2020-06-08 08:42:58,443 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-08 08:42:58,445 [7] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:42:58,447 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:42:58,449 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "LoadMenuTree", controller = "Uprg"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult LoadMenuTree() on controller DncZeus.Api.Controllers.Api.Sec.UprgController (DncZeus.Api).
2020-06-08 08:42:58,452 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:42:58,472 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) - Validation state: Valid
2020-06-08 08:42:58,494 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[icon], [p].[sysname], [p].[sysno], [p].[sysorder]
FROM [Secsys] AS [p]
ORDER BY [p].[sysorder]
2020-06-08 08:42:58,518 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[funname], [p].[funno], [p].[funorder], [p].[icon], [p].[sysid]
FROM [Secfun] AS [p]
ORDER BY [p].[funorder]
2020-06-08 08:42:58,542 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[enabled], [x].[funid], [x].[icon], [x].[mainid], [x].[prgcomp], [x].[prgname], [x].[prgno], [x].[prgorder], [x].[prgtype], [x].[program], [x].[runtype], [x].[sysid]
FROM [Secprg] AS [x]
WHERE [x].[enabled] = 'Y'
ORDER BY [x].[prgorder]
2020-06-08 08:42:58,567 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[butid], [p].[butname], [p].[butno], [p].[butorder], [p].[funid], [p].[prgid], [p].[sysid]
FROM [Secprgbut] AS [p]
ORDER BY [p].[butorder]
2020-06-08 08:42:58,570 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 96.1152ms.
2020-06-08 08:42:58,572 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 08:42:58,575 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) in 122.8243ms
2020-06-08 08:42:58,578 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 134.0242ms 200 application/json; charset=utf-8
2020-06-08 08:42:59,118 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/Upload/img/20200627040310.png  
2020-06-08 08:42:59,121 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 2.909ms 404 
2020-06-08 08:42:59,141 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-06-08 08:42:59,143 [25] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:42:59,145 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 170
2020-06-08 08:42:59,152 [25] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:42:59,158 [15] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:42:59,165 [25] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 20.0681ms 204 
2020-06-08 08:42:59,161 [7] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:42:59,167 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:42:59,174 [25] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:42:59,178 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:42:59,184 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-06-08 08:42:59,186 [25] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:42:59,189 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 08:42:59,192 [25] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:42:59,194 [15] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:42:59,198 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:42:59,203 [25] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 08:42:59,258 [25] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:42:59,288 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 08:42:59,305 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 08:42:59,306 [25] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 08:42:59,344 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (36ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-08 08:42:59,346 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-06-08 08:42:59,384 [25] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 08:42:59,404 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (38ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-08 08:42:59,406 [25] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 78.3836ms.
2020-06-08 08:42:59,407 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-06-08 08:42:59,409 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 100.8629ms.
2020-06-08 08:42:59,410 [25] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:42:59,412 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 103.5871ms.
2020-06-08 08:42:59,414 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:42:59,416 [25] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 189.5944ms
2020-06-08 08:42:59,419 [15] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:42:59,421 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 226.0356ms
2020-06-08 08:42:59,423 [25] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 252.9992ms 200 application/json; charset=utf-8
2020-06-08 08:42:59,426 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 234.4286ms
2020-06-08 08:42:59,427 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 282.2482ms 200 application/json; charset=utf-8
2020-06-08 08:42:59,430 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 289.0246ms 200 application/json; charset=utf-8
2020-06-08 08:42:59,451 [24] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 170
2020-06-08 08:42:59,456 [24] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:42:59,458 [24] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:42:59,460 [24] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 08:42:59,463 [24] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:42:59,486 [24] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-08 08:42:59,508 [24] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL) AND ([x].[qty] = 0.0)
2020-06-08 08:42:59,530 [24] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 08:42:59,554 [24] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 08:42:59,556 [24] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 67.838ms.
2020-06-08 08:42:59,558 [24] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:42:59,562 [24] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 98.8388ms
2020-06-08 08:42:59,565 [24] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 113.96ms 200 application/json; charset=utf-8
2020-06-08 08:43:00,430 [33] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8  
2020-06-08 08:43:00,432 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8  
2020-06-08 08:43:00,435 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workprocess/list?api-version=8  
2020-06-08 08:43:00,437 [33] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:43:00,441 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:43:00,446 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:43:00,459 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 27.3005ms 204 
2020-06-08 08:43:00,456 [33] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 17.7753ms 204 
2020-06-08 08:43:00,477 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 44.0981ms 204 
2020-06-08 08:43:00,478 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 139
2020-06-08 08:43:00,480 [33] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8 application/json;charset=UTF-8 131
2020-06-08 08:43:00,481 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workprocess/list?api-version=8 application/json;charset=UTF-8 150
2020-06-08 08:43:00,486 [33] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:43:00,489 [15] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:43:00,491 [7] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:43:00,493 [33] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:43:00,495 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:43:00,497 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:43:00,499 [33] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkDate", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkDate(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-08 08:43:00,503 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-08 08:43:00,506 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workprocess"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workprocess.WorkprocessRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkprocessController (DncZeus.Api).
2020-06-08 08:43:00,507 [33] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:43:00,510 [15] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:43:00,512 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:43:00,529 [33] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) - Validation state: Valid
2020-06-08 08:43:00,576 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 08:43:00,595 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-06-08 08:43:00,615 [33] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__payload_workDate_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[cadre], [x].[cadreLeave], [x].[cadreRest], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[logistic], [x].[logisticLeave], [x].[logisticRest], [x].[moddate], [x].[moduser], [x].[workDate], [x].[worker], [x].[workerLeave], [x].[workerRest]
FROM [ManFactoryWorkdate] AS [x]
WHERE ([x].[factoryGuid] = @__payload_factoryGuid_0) AND ([x].[workDate] = @__payload_workDate_1)
2020-06-08 08:43:00,635 [33] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 102.9979ms.
2020-06-08 08:43:00,639 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (38ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty',isnull(h.targetOut ,0) as 'targetOut',isnull(h.realityOut,0) as 'realityOut',isnull(h.sumTime,0) as 'sumTime',isnull(h.status,0) as 'status'
from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=a.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=a.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=a.factoryGuid)
left join (
select sum(outline.output) as 'todayDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.factoryGuid
) as g on(g.factoryGuid=a.factoryGuid)
left join (
	select aa.targetOut,aa.realityOut,aa.sumTime,aa.factoryGuid,aa.status from ManFactoryWorkout aa where wrokDate=@p3 and factoryGuid=@p0
) as h on(h.factoryGuid=a.factoryGuid)
2020-06-08 08:43:00,641 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (38ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[factoryGuid], [t].[workCode], [t].[workName], [t].[rate], [t].[isvalid], [t].[credate], [t].[creuser], [t].[moddate], [t].[moduser], [t].[factoryName]
FROM (
    SELECT [a].[Guid], [a].[OrgID], [a].[factoryGuid], [a].[workCode], [a].[workName], [a].[rate], [a].[isvalid], [a].[credate], [a].[creuser], [a].[moddate], [a].[moduser], [b].[name] AS [factoryName], ROW_NUMBER() OVER(ORDER BY [a].[factoryGuid], [a].[workCode]) AS [__RowNumber__]
    FROM [ManWorkProcess] AS [a]
    INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
    WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-08 08:43:00,642 [33] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 08:43:00,644 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 47.3985ms.
2020-06-08 08:43:00,649 [33] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) in 141.7214ms
2020-06-08 08:43:00,669 [15] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:43:00,673 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkProcess] AS [a]
INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
2020-06-08 08:43:00,676 [33] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 193.2479ms 200 application/json; charset=utf-8
2020-06-08 08:43:00,677 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 166.2268ms
2020-06-08 08:43:00,679 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 81.9448ms.
2020-06-08 08:43:00,681 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 204.0899ms 200 application/json; charset=utf-8
2020-06-08 08:43:00,684 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:43:00,687 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) in 176.3221ms
2020-06-08 08:43:00,690 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 207.8999ms 200 application/json; charset=utf-8
2020-06-08 08:45:59,513 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v1/account/profile  
2020-06-08 08:45:59,539 [42] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:45:59,553 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 29.8842ms 204 
2020-06-08 08:45:59,558 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v1/account/profile  
2020-06-08 08:45:59,570 [42] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:45:59,573 [42] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:45:59,583 [42] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Profile() on controller DncZeus.Api.Controllers.AccountController (DncZeus.Api).
2020-06-08 08:45:59,601 [42] INFO  Microsoft.AspNetCore.Authorization.DefaultAuthorizationService [(null)]  - Authorization was successful.
2020-06-08 08:45:59,614 [42] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:45:59,655 [42] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) - Validation state: Valid
2020-06-08 08:45:59,697 [43] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (32ms) [Parameters=[@__Parse_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[ID], [x].[Code], [x].[Name], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser]
FROM [MisOrganization] AS [x]
WHERE [x].[ID] = @__Parse_0
2020-06-08 08:45:59,735 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (35ms) [Parameters=[@__guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[EmpName], [x].[EmpNo], [x].[code], [x].[credate], [x].[creuser], [x].[depname], [x].[depno], [x].[email], [x].[enabled], [x].[jobname], [x].[jobno], [x].[moddate], [x].[moduser], [x].[pwd], [x].[telno], [x].[userLogo], [x].[username], [x].[userno], [x].[utype], [x].[wxAccount], [x].[wxId], [x].[wxMail], [x].[wxName], [x].[wxPhone], [x].[wxPwd]
FROM [Secuser] AS [x]
WHERE [x].[Guid] = @__guid_0
2020-06-08 08:45:59,759 [42] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[Alias], [x].[BeforeCloseFun], [x].[Component], [x].[CreatedByUserGuid], [x].[CreatedByUserName], [x].[CreatedOn], [x].[Description], [x].[HideInMenu], [x].[Icon], [x].[IsDefaultRouter], [x].[IsDeleted], [x].[Level], [x].[ModifiedByUserGuid], [x].[ModifiedByUserName], [x].[ModifiedOn], [x].[Name], [x].[NotCache], [x].[ParentGuid], [x].[ParentName], [x].[Sort], [x].[Status], [x].[Url]
FROM [DncMenu] AS [x]
WHERE ([x].[IsDeleted] = 0) AND ([x].[Status] = 1)
2020-06-08 08:45:59,788 [42] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__user_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secuprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE [x].[userid] = @__user_Guid_0
ORDER BY [b0].[prgno]
2020-06-08 08:45:59,814 [42] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__groupid_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secgprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE CONVERT(VARCHAR(36), [x].[groupid]) = @__groupid_0
ORDER BY [b0].[prgno]
2020-06-08 08:45:59,816 [42] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 157.09ms.
2020-06-08 08:45:59,818 [42] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 08:45:59,821 [42] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) in 236.0157ms
2020-06-08 08:45:59,823 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 266.6531ms 200 application/json; charset=utf-8
2020-06-08 08:45:59,831 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-08 08:45:59,833 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:45:59,836 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 4.2006ms 204 
2020-06-08 08:45:59,840 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-08 08:45:59,845 [42] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:45:59,847 [42] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:45:59,849 [42] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "LoadMenuTree", controller = "Uprg"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult LoadMenuTree() on controller DncZeus.Api.Controllers.Api.Sec.UprgController (DncZeus.Api).
2020-06-08 08:45:59,852 [42] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:45:59,872 [42] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) - Validation state: Valid
2020-06-08 08:45:59,897 [42] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[icon], [p].[sysname], [p].[sysno], [p].[sysorder]
FROM [Secsys] AS [p]
ORDER BY [p].[sysorder]
2020-06-08 08:45:59,923 [42] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[funname], [p].[funno], [p].[funorder], [p].[icon], [p].[sysid]
FROM [Secfun] AS [p]
ORDER BY [p].[funorder]
2020-06-08 08:45:59,947 [42] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[enabled], [x].[funid], [x].[icon], [x].[mainid], [x].[prgcomp], [x].[prgname], [x].[prgno], [x].[prgorder], [x].[prgtype], [x].[program], [x].[runtype], [x].[sysid]
FROM [Secprg] AS [x]
WHERE [x].[enabled] = 'Y'
ORDER BY [x].[prgorder]
2020-06-08 08:45:59,972 [42] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[butid], [p].[butname], [p].[butno], [p].[butorder], [p].[funid], [p].[prgid], [p].[sysid]
FROM [Secprgbut] AS [p]
ORDER BY [p].[butorder]
2020-06-08 08:45:59,974 [42] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 99.9636ms.
2020-06-08 08:45:59,977 [42] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 08:45:59,980 [42] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) in 127.8934ms
2020-06-08 08:45:59,982 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 141.7233ms 200 application/json; charset=utf-8
2020-06-08 08:46:00,544 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/Upload/img/20200627040310.png  
2020-06-08 08:46:00,549 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 4.1576ms 404 
2020-06-08 08:46:00,572 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-06-08 08:46:00,579 [51] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-06-08 08:46:00,585 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:46:00,596 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:46:00,602 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 30.3733ms 204 
2020-06-08 08:46:00,599 [51] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:46:00,605 [42] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:46:00,608 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-06-08 08:46:00,614 [51] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 32.5888ms 204 
2020-06-08 08:46:00,617 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 35.1415ms 204 
2020-06-08 08:46:00,621 [51] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 170
2020-06-08 08:46:00,624 [15] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:46:00,644 [51] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:46:00,647 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:46:00,651 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:46:00,654 [51] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:46:00,656 [43] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:46:00,658 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-06-08 08:46:00,661 [43] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:46:00,664 [51] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 08:46:00,690 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 08:46:00,694 [51] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:46:00,696 [43] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:46:00,699 [15] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:46:00,730 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 08:46:00,732 [51] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 08:46:00,771 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 08:46:00,803 [43] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 08:46:00,807 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 71.5938ms.
2020-06-08 08:46:00,812 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (34ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-06-08 08:46:00,814 [51] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (35ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-08 08:46:00,816 [43] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:46:00,854 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 125.9132ms
2020-06-08 08:46:00,859 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 230.896ms 200 application/json; charset=utf-8
2020-06-08 08:46:00,864 [51] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (40ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-08 08:46:00,866 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (40ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-06-08 08:46:00,874 [51] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 115.7995ms.
2020-06-08 08:46:00,875 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 96.971ms.
2020-06-08 08:46:00,880 [51] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:46:00,882 [15] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:46:00,885 [51] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 217.0542ms
2020-06-08 08:46:00,890 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 220.1108ms
2020-06-08 08:46:00,904 [51] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 269.7232ms 200 application/json; charset=utf-8
2020-06-08 08:46:00,906 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 287.6298ms 200 application/json; charset=utf-8
2020-06-08 08:46:00,931 [52] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-08 08:46:00,935 [52] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:46:00,940 [52] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 8.8087ms 204 
2020-06-08 08:46:00,946 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 170
2020-06-08 08:46:00,950 [43] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:46:00,953 [43] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:46:00,961 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 08:46:00,966 [43] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:46:00,989 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-08 08:46:01,012 [43] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL) AND ([x].[qty] = 0.0)
2020-06-08 08:46:01,035 [43] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 08:46:01,058 [43] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 08:46:01,061 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 69.4343ms.
2020-06-08 08:46:01,064 [43] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:46:01,067 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 102.4394ms
2020-06-08 08:46:01,070 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 127.1073ms 200 application/json; charset=utf-8
2020-06-08 08:46:04,123 [55] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8  
2020-06-08 08:46:04,126 [51] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8  
2020-06-08 08:46:04,128 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workprocess/list?api-version=8  
2020-06-08 08:46:04,130 [55] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:46:04,132 [51] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:46:04,145 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:46:04,147 [55] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 14.5671ms 204 
2020-06-08 08:46:04,151 [51] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 16.2372ms 204 
2020-06-08 08:46:04,156 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 28.36ms 204 
2020-06-08 08:46:04,158 [55] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 139
2020-06-08 08:46:04,162 [51] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8 application/json;charset=UTF-8 131
2020-06-08 08:46:04,165 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workprocess/list?api-version=8 application/json;charset=UTF-8 150
2020-06-08 08:46:04,166 [51] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:46:04,168 [55] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:46:04,170 [51] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:46:04,172 [15] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:46:04,174 [55] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:46:04,177 [51] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkDate", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkDate(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-08 08:46:04,181 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:46:04,204 [55] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-08 08:46:04,208 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workprocess"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workprocess.WorkprocessRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkprocessController (DncZeus.Api).
2020-06-08 08:46:04,208 [51] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:46:04,211 [55] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:46:04,231 [15] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:46:04,233 [51] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) - Validation state: Valid
2020-06-08 08:46:04,249 [55] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-06-08 08:46:04,288 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 08:46:04,306 [51] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (37ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__payload_workDate_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[cadre], [x].[cadreLeave], [x].[cadreRest], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[logistic], [x].[logisticLeave], [x].[logisticRest], [x].[moddate], [x].[moduser], [x].[workDate], [x].[worker], [x].[workerLeave], [x].[workerRest]
FROM [ManFactoryWorkdate] AS [x]
WHERE ([x].[factoryGuid] = @__payload_factoryGuid_0) AND ([x].[workDate] = @__payload_workDate_1)
2020-06-08 08:46:04,308 [55] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (39ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty',isnull(h.targetOut ,0) as 'targetOut',isnull(h.realityOut,0) as 'realityOut',isnull(h.sumTime,0) as 'sumTime',isnull(h.status,0) as 'status'
from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=a.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=a.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=a.factoryGuid)
left join (
select sum(outline.output) as 'todayDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.factoryGuid
) as g on(g.factoryGuid=a.factoryGuid)
left join (
	select aa.targetOut,aa.realityOut,aa.sumTime,aa.factoryGuid,aa.status from ManFactoryWorkout aa where wrokDate=@p3 and factoryGuid=@p0
) as h on(h.factoryGuid=a.factoryGuid)
2020-06-08 08:46:04,312 [51] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 58.1768ms.
2020-06-08 08:46:04,331 [55] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 43.616ms.
2020-06-08 08:46:04,333 [51] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 08:46:04,334 [55] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:46:04,336 [51] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) in 151.9575ms
2020-06-08 08:46:04,340 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (25ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[factoryGuid], [t].[workCode], [t].[workName], [t].[rate], [t].[isvalid], [t].[credate], [t].[creuser], [t].[moddate], [t].[moduser], [t].[factoryName]
FROM (
    SELECT [a].[Guid], [a].[OrgID], [a].[factoryGuid], [a].[workCode], [a].[workName], [a].[rate], [a].[isvalid], [a].[credate], [a].[creuser], [a].[moddate], [a].[moduser], [b].[name] AS [factoryName], ROW_NUMBER() OVER(ORDER BY [a].[factoryGuid], [a].[workCode]) AS [__RowNumber__]
    FROM [ManWorkProcess] AS [a]
    INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
    WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-08 08:46:04,341 [55] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 131.6442ms
2020-06-08 08:46:04,343 [51] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 182.9921ms 200 application/json; charset=utf-8
2020-06-08 08:46:04,346 [55] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 192.1637ms 200 application/json; charset=utf-8
2020-06-08 08:46:04,367 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkProcess] AS [a]
INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
2020-06-08 08:46:04,369 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 63.6449ms.
2020-06-08 08:46:04,371 [15] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:46:04,374 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) in 160.8248ms
2020-06-08 08:46:04,378 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 212.3436ms 200 application/json; charset=utf-8
2020-06-08 08:46:12,336 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-08 08:46:12,338 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:46:12,341 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 4.8076ms 204 
2020-06-08 08:46:12,345 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 206
2020-06-08 08:46:12,352 [15] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:46:12,354 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:46:12,357 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 08:46:12,362 [15] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:46:12,386 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-08 08:46:12,411 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND ([x].[qty] = 0.0)
2020-06-08 08:46:12,434 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)
2020-06-08 08:46:12,464 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (27ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)
2020-06-08 08:46:12,467 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 78.5736ms.
2020-06-08 08:46:12,468 [15] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:46:12,470 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 110.9736ms
2020-06-08 08:46:12,474 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 128.8832ms 200 application/json; charset=utf-8
2020-06-08 08:46:13,963 [51] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-06-08 08:46:13,966 [51] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:46:13,970 [51] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 6.344ms 204 
2020-06-08 08:46:13,974 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 242
2020-06-08 08:46:13,977 [15] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:46:13,979 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:46:13,982 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 08:46:13,984 [15] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:46:14,002 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 08:46:14,023 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-08 08:46:14,045 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-08 08:46:14,047 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 43.1829ms.
2020-06-08 08:46:14,049 [15] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:46:14,051 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 66.8348ms
2020-06-08 08:46:14,053 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 79.3237ms 200 application/json; charset=utf-8
2020-06-08 08:46:14,066 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 242
2020-06-08 08:46:14,069 [43] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:46:14,071 [43] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:46:14,072 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 08:46:14,075 [43] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:46:14,092 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-08 08:46:14,114 [43] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND ([x].[qty] = 0.0)
2020-06-08 08:46:14,134 [43] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (18ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)
2020-06-08 08:46:14,155 [43] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)
2020-06-08 08:46:14,157 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 63.1394ms.
2020-06-08 08:46:14,160 [43] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:46:14,163 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 87.6391ms
2020-06-08 08:46:14,167 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 100.6248ms 200 application/json; charset=utf-8
2020-06-08 08:46:16,523 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetHistoryList?api-version=8  
2020-06-08 08:46:16,526 [43] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:46:16,531 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.6679ms 204 
2020-06-08 08:46:16,534 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetHistoryList?api-version=8 application/json;charset=UTF-8 206
2020-06-08 08:46:16,538 [43] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:46:16,541 [43] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:46:16,545 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetHistoryList", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetHistoryList(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 08:46:16,549 [43] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:46:16,578 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetHistoryList (DncZeus.Api) - Validation state: Valid
2020-06-08 08:46:16,679 [43] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (61ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where datediff(week,a.workDate,getdate())=0 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid )
    where b.factoryGuid=@p0 and b.countType=@p2 
    Group by b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty
) AS [h]
2020-06-08 08:46:16,753 [43] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (54ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[ordCode], [t].[ordQty]
FROM (
    SELECT [h].[factoryPrice], [h].[itemCode], [h].[itemName], [h].[ordCode], [h].[ordQty], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where datediff(week,a.workDate,getdate())=0 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid )
        where b.factoryGuid=@p0 and b.countType=@p2 
        Group by b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty
    ) AS [h]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-08 08:46:16,755 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetHistoryList (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 175.0782ms.
2020-06-08 08:46:16,757 [43] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:46:16,763 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetHistoryList (DncZeus.Api) in 214.5778ms
2020-06-08 08:46:16,766 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 231.5255ms 200 application/json; charset=utf-8
2020-06-08 08:46:17,771 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/create?api-version=8  
2020-06-08 08:46:17,773 [43] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:46:17,777 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 3.9884ms 204 
2020-06-08 08:46:17,779 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/create?api-version=8 application/json;charset=UTF-8 294
2020-06-08 08:46:17,782 [15] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:46:17,785 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:46:17,788 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Create", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Create(DncZeus.Api.ViewModels.Man.Workshop.WorkshopCreateViewModel) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 08:46:17,790 [15] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:46:17,819 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.Create (DncZeus.Api) - Validation state: Valid
2020-06-08 08:46:17,853 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (25ms) [Parameters=[@__model_factoryGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[cadre], [x].[code], [x].[countType], [x].[credate], [x].[creuser], [x].[logistic], [x].[moddate], [x].[moduser], [x].[name], [x].[pertargetOut], [x].[worker]
FROM [ManFactory] AS [x]
WHERE [x].[Guid] = @__model_factoryGuid_0
2020-06-08 08:46:17,904 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__model_ordCode_0='?' (Size = 20) (DbType = AnsiString), @__model_itemCode_1='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[countType], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[itemCode], [x].[itemName], [x].[moddate], [x].[moduser], [x].[ordCode], [x].[status]
FROM [ManOutSplit] AS [x]
WHERE ([x].[ordCode] = @__model_ordCode_0) AND ([x].[itemCode] = @__model_itemCode_1)
2020-06-08 08:46:18,016 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (40ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Int32), @p2='?' (Size = 1) (DbType = Byte), @p3='?' (DbType = DateTime2), @p4='?' (Size = 20), @p5='?' (DbType = Guid), @p6='?' (DbType = Decimal), @p7='?' (Size = 20) (DbType = AnsiString), @p8='?' (Size = 200) (DbType = AnsiString), @p9='?' (Size = 20) (DbType = AnsiString), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SET NOCOUNT ON;
INSERT INTO [ManWorkshopOut] ([Guid], [OrgID], [countType], [credate], [creuser], [factoryGuid], [factoryPrice], [itemCode], [itemName], [ordCode], [ordQty], [sumQty], [workProcessGuid])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2020-06-08 08:46:18,040 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20), @p3='?' (DbType = DateTime2), @p4='?' (Size = 20), @p5='?' (DbType = Decimal), @p6='?' (DbType = Decimal), @p7='?' (Size = 200) (DbType = AnsiString), @p8='?' (DbType = DateTime2), @p9='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SET NOCOUNT ON;
INSERT INTO [ManWorkshopOutLine] ([Guid], [credate], [creuser], [moddate], [moduser], [output], [qty], [remark], [workDate], [workshopOutGuid])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2020-06-08 08:46:18,046 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.Create (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 224.6249ms.
2020-06-08 08:46:18,048 [15] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 08:46:18,050 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.Create (DncZeus.Api) in 260.4824ms
2020-06-08 08:46:18,054 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 274.0404ms 200 application/json; charset=utf-8
2020-06-08 08:46:18,080 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 242
2020-06-08 08:46:18,084 [15] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:46:18,087 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:46:18,089 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 08:46:18,092 [15] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:46:18,110 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 08:46:18,132 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-08 08:46:18,154 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-08 08:46:18,156 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 44.0492ms.
2020-06-08 08:46:18,159 [15] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:46:18,166 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 74.2405ms
2020-06-08 08:46:18,168 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 92.7936ms 200 application/json; charset=utf-8
2020-06-08 08:46:18,190 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-08 08:46:18,193 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:46:18,196 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.2912ms 204 
2020-06-08 08:46:18,199 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 242
2020-06-08 08:46:18,203 [43] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:46:18,205 [43] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:46:18,207 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 08:46:18,210 [43] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:46:18,229 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-08 08:46:18,250 [43] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (18ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND ([x].[qty] = 0.0)
2020-06-08 08:46:18,282 [43] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid), @__item_workName_2='?' (Size = 30) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND (([b0].[workName] <> @__item_workName_2) OR [b0].[workName] IS NULL)
2020-06-08 08:46:18,313 [43] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (25ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid), @__item_workName_2='?' (Size = 30) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND (([b0].[workName] <> @__item_workName_2) OR [b0].[workName] IS NULL)
2020-06-08 08:46:18,316 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 84.836ms.
2020-06-08 08:46:18,318 [43] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:46:18,320 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 110.0706ms
2020-06-08 08:46:18,322 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 122.7305ms 200 application/json; charset=utf-8
2020-06-08 08:46:23,069 [51] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/editQty?api-version=8  
2020-06-08 08:46:23,071 [51] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:46:23,073 [51] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 3.976ms 204 
2020-06-08 08:46:23,078 [51] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/editQty?api-version=8 application/json;charset=UTF-8 158
2020-06-08 08:46:23,081 [51] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:46:23,084 [51] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:46:23,087 [51] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "EditQty", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult EditQty(DncZeus.Api.ViewModels.Man.Workshop.QueryWorkshopout) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 08:46:23,090 [51] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:46:23,114 [51] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.EditQty (DncZeus.Api) - Validation state: Valid
2020-06-08 08:46:23,149 [51] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (26ms) [Parameters=[@__model_workshopOutGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[countType], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[factoryPrice], [x].[itemCode], [x].[itemName], [x].[ordCode], [x].[ordQty], [x].[sumQty], [x].[workProcessGuid]
FROM [ManWorkshopOut] AS [x]
WHERE [x].[Guid] = @__model_workshopOutGuid_0
2020-06-08 08:46:23,184 [51] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__model_workDate_0='?' (DbType = DateTime2), @__model_workshopOutGuid_1='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser], [x].[output], [x].[qty], [x].[remark], [x].[workDate], [x].[workshopOutGuid]
FROM [ManWorkshopOutLine] AS [x]
WHERE ([x].[workDate] = @__model_workDate_0) AND ([x].[workshopOutGuid] = @__model_workshopOutGuid_1)
2020-06-08 08:46:23,215 [51] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal)], CommandType='Text', CommandTimeout='6000000']
SET NOCOUNT ON;
UPDATE [ManWorkshopOutLine] SET [output] = @p0, [qty] = @p1
WHERE [Guid] = @p2;
SELECT @@ROWCOUNT;
2020-06-08 08:46:23,218 [51] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.EditQty (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 101.5601ms.
2020-06-08 08:46:23,220 [51] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 08:46:23,222 [51] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.EditQty (DncZeus.Api) in 132.7519ms
2020-06-08 08:46:23,226 [51] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 148.3714ms 200 application/json; charset=utf-8
2020-06-08 08:46:23,255 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-06-08 08:46:23,259 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:46:23,264 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 10.0343ms 204 
2020-06-08 08:46:23,268 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 242
2020-06-08 08:46:23,272 [15] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:46:23,274 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:46:23,277 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 08:46:23,280 [15] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:46:23,297 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 08:46:23,319 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-08 08:46:23,341 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-08 08:46:23,344 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 44.0848ms.
2020-06-08 08:46:23,346 [15] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:46:23,349 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 69.7304ms
2020-06-08 08:46:23,351 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 82.832ms 200 application/json; charset=utf-8
2020-06-08 08:46:23,366 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-08 08:46:23,369 [43] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:46:23,371 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.7634ms 204 
2020-06-08 08:46:23,374 [55] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 242
2020-06-08 08:46:23,376 [55] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:46:23,379 [55] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:46:23,381 [55] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 08:46:23,383 [55] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:46:23,400 [55] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-08 08:46:23,421 [55] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (18ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)) AND ([x].[qty] = 0.0)
2020-06-08 08:46:23,441 [55] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (18ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)
2020-06-08 08:46:23,465 [55] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2), @__payload_factoryGuid_1='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND ([b].[factoryGuid] = @__payload_factoryGuid_1)
2020-06-08 08:46:23,466 [55] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 64.9133ms.
2020-06-08 08:46:23,468 [55] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:46:23,471 [55] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 87.6274ms
2020-06-08 08:46:23,474 [55] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 99.5723ms 200 application/json; charset=utf-8
2020-06-08 08:46:25,211 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8  
2020-06-08 08:46:25,213 [42] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:46:25,216 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 4.6508ms 204 
2020-06-08 08:46:25,219 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 139
2020-06-08 08:46:25,222 [42] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:46:25,224 [42] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:46:25,227 [42] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-08 08:46:25,230 [42] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:46:25,247 [42] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-06-08 08:46:25,271 [42] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty',isnull(h.targetOut ,0) as 'targetOut',isnull(h.realityOut,0) as 'realityOut',isnull(h.sumTime,0) as 'sumTime',isnull(h.status,0) as 'status'
from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=a.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=a.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=a.factoryGuid)
left join (
select sum(outline.output) as 'todayDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.factoryGuid
) as g on(g.factoryGuid=a.factoryGuid)
left join (
	select aa.targetOut,aa.realityOut,aa.sumTime,aa.factoryGuid,aa.status from ManFactoryWorkout aa where wrokDate=@p3 and factoryGuid=@p0
) as h on(h.factoryGuid=a.factoryGuid)
2020-06-08 08:46:25,273 [42] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23.6083ms.
2020-06-08 08:46:25,276 [42] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:46:25,279 [42] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 48.8301ms
2020-06-08 08:46:25,282 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 62.3316ms 200 application/json; charset=utf-8
2020-06-08 08:46:30,441 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:46:30,444 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:46:30,448 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 7.0517ms 204 
2020-06-08 08:46:30,450 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:46:30,454 [42] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:46:30,456 [42] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:46:30,460 [42] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 08:46:30,464 [42] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:46:30,483 [42] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 08:46:30,506 [42] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 08:46:30,510 [42] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23.1641ms.
2020-06-08 08:46:30,513 [42] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:46:30,515 [42] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 52.448ms
2020-06-08 08:46:30,519 [42] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 67.6939ms 200 application/json; charset=utf-8
2020-06-08 08:47:00,444 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:47:00,458 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:47:00,475 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 29.0432ms 204 
2020-06-08 08:47:00,486 [55] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:47:00,489 [55] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:47:00,492 [55] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:47:00,501 [55] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 08:47:00,503 [55] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:47:00,520 [55] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 08:47:00,542 [55] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 08:47:00,545 [55] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.126ms.
2020-06-08 08:47:00,547 [55] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:47:00,570 [55] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 46.3454ms
2020-06-08 08:47:00,582 [55] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 94.0519ms 200 application/json; charset=utf-8
2020-06-08 08:47:30,450 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:47:30,470 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:47:30,472 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 22.1293ms 204 
2020-06-08 08:47:30,484 [55] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:47:30,495 [55] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:47:30,497 [55] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:47:30,501 [55] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 08:47:30,504 [55] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:47:30,523 [55] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 08:47:30,545 [55] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 08:47:30,548 [55] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 21.8765ms.
2020-06-08 08:47:30,550 [55] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:47:30,552 [55] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 48.8693ms
2020-06-08 08:47:30,555 [55] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 71.3022ms 200 application/json; charset=utf-8
2020-06-08 08:48:00,442 [60] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:48:00,452 [60] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:48:00,454 [60] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 13.1814ms 204 
2020-06-08 08:48:00,466 [60] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:48:00,469 [60] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:48:00,472 [60] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:48:00,475 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 08:48:00,478 [60] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:48:00,497 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 08:48:00,518 [60] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 08:48:00,521 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 21.8095ms.
2020-06-08 08:48:00,523 [60] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:48:00,525 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 47.4021ms
2020-06-08 08:48:00,528 [60] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 60.8794ms 200 application/json; charset=utf-8
2020-06-08 08:48:30,440 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:48:30,448 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:48:30,457 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 11.1413ms 204 
2020-06-08 08:48:30,459 [60] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:48:30,461 [60] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:48:30,464 [60] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:48:30,466 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 08:48:30,469 [60] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:48:30,487 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 08:48:30,513 [60] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 08:48:30,515 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 25.6215ms.
2020-06-08 08:48:30,517 [60] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:48:30,519 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 50.6905ms
2020-06-08 08:48:30,522 [60] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 62.7195ms 200 application/json; charset=utf-8
2020-06-08 08:49:00,441 [60] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:49:00,450 [60] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:49:00,455 [60] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 11.3357ms 204 
2020-06-08 08:49:00,465 [60] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:49:00,468 [60] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:49:00,471 [60] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:49:00,474 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 08:49:00,477 [60] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:49:00,495 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 08:49:00,516 [60] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 08:49:00,519 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 21.2106ms.
2020-06-08 08:49:00,522 [60] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:49:00,524 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 47.6562ms
2020-06-08 08:49:00,527 [60] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 61.7693ms 200 application/json; charset=utf-8
2020-06-08 08:49:30,441 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:49:30,449 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:49:30,452 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 10.2742ms 204 
2020-06-08 08:49:30,468 [60] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:49:30,471 [60] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:49:30,473 [60] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:49:30,476 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 08:49:30,479 [60] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:49:30,497 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 08:49:30,520 [60] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 08:49:30,522 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23.743ms.
2020-06-08 08:49:30,524 [60] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:49:30,526 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 48.3555ms
2020-06-08 08:49:30,530 [60] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 60.7985ms 200 application/json; charset=utf-8
2020-06-08 08:50:00,439 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:50:00,449 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:50:00,461 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 11.9881ms 204 
2020-06-08 08:50:00,465 [67] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:50:00,469 [67] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:50:00,471 [67] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:50:00,474 [67] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 08:50:00,477 [67] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:50:00,495 [67] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 08:50:00,517 [67] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 08:50:00,519 [67] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.0207ms.
2020-06-08 08:50:00,522 [67] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:50:00,524 [67] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 48.0333ms
2020-06-08 08:50:00,526 [67] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 60.7723ms 200 application/json; charset=utf-8
2020-06-08 08:50:30,439 [67] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:50:30,448 [67] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:50:30,459 [67] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 11.6844ms 204 
2020-06-08 08:50:30,461 [60] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:50:30,463 [60] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:50:30,469 [60] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:50:30,471 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 08:50:30,474 [60] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:50:30,492 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 08:50:30,513 [60] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (18ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 08:50:30,515 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 20.8331ms.
2020-06-08 08:50:30,517 [60] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:50:30,526 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 46.4274ms
2020-06-08 08:50:30,535 [60] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 73.7367ms 200 application/json; charset=utf-8
2020-06-08 08:51:00,441 [71] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:51:00,454 [71] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:51:00,466 [71] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 17.3307ms 204 
2020-06-08 08:51:00,475 [67] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:51:00,478 [67] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:51:00,480 [67] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:51:00,483 [67] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 08:51:00,489 [67] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:51:00,511 [67] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 08:51:00,535 [67] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 08:51:00,538 [67] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 24.578ms.
2020-06-08 08:51:00,541 [67] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:51:00,543 [67] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 56.9167ms
2020-06-08 08:51:00,546 [67] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 71.8412ms 200 application/json; charset=utf-8
2020-06-08 08:51:01,899 [67] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v1/account/profile  
2020-06-08 08:51:01,903 [67] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:51:01,906 [67] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 6.7317ms 204 
2020-06-08 08:51:01,912 [67] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v1/account/profile  
2020-06-08 08:51:01,917 [67] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:51:01,919 [67] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:51:01,922 [67] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Profile() on controller DncZeus.Api.Controllers.AccountController (DncZeus.Api).
2020-06-08 08:51:01,927 [67] INFO  Microsoft.AspNetCore.Authorization.DefaultAuthorizationService [(null)]  - Authorization was successful.
2020-06-08 08:51:01,930 [67] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:51:01,953 [67] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) - Validation state: Valid
2020-06-08 08:51:01,981 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (25ms) [Parameters=[@__Parse_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[ID], [x].[Code], [x].[Name], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser]
FROM [MisOrganization] AS [x]
WHERE [x].[ID] = @__Parse_0
2020-06-08 08:51:02,011 [60] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (26ms) [Parameters=[@__guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[EmpName], [x].[EmpNo], [x].[code], [x].[credate], [x].[creuser], [x].[depname], [x].[depno], [x].[email], [x].[enabled], [x].[jobname], [x].[jobno], [x].[moddate], [x].[moduser], [x].[pwd], [x].[telno], [x].[userLogo], [x].[username], [x].[userno], [x].[utype], [x].[wxAccount], [x].[wxId], [x].[wxMail], [x].[wxName], [x].[wxPhone], [x].[wxPwd]
FROM [Secuser] AS [x]
WHERE [x].[Guid] = @__guid_0
2020-06-08 08:51:02,058 [67] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (38ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[Alias], [x].[BeforeCloseFun], [x].[Component], [x].[CreatedByUserGuid], [x].[CreatedByUserName], [x].[CreatedOn], [x].[Description], [x].[HideInMenu], [x].[Icon], [x].[IsDefaultRouter], [x].[IsDeleted], [x].[Level], [x].[ModifiedByUserGuid], [x].[ModifiedByUserName], [x].[ModifiedOn], [x].[Name], [x].[NotCache], [x].[ParentGuid], [x].[ParentName], [x].[Sort], [x].[Status], [x].[Url]
FROM [DncMenu] AS [x]
WHERE ([x].[IsDeleted] = 0) AND ([x].[Status] = 1)
2020-06-08 08:51:02,097 [67] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (30ms) [Parameters=[@__user_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secuprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE [x].[userid] = @__user_Guid_0
ORDER BY [b0].[prgno]
2020-06-08 08:51:02,122 [67] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__groupid_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secgprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE CONVERT(VARCHAR(36), [x].[groupid]) = @__groupid_0
ORDER BY [b0].[prgno]
2020-06-08 08:51:02,126 [67] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 169.0337ms.
2020-06-08 08:51:02,131 [67] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 08:51:02,138 [67] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) in 210.337ms
2020-06-08 08:51:02,155 [67] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 230.886ms 200 application/json; charset=utf-8
2020-06-08 08:51:02,196 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-08 08:51:02,201 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:51:02,206 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 10.371ms 204 
2020-06-08 08:51:02,209 [60] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-08 08:51:02,211 [60] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:51:02,214 [60] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:51:02,218 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "LoadMenuTree", controller = "Uprg"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult LoadMenuTree() on controller DncZeus.Api.Controllers.Api.Sec.UprgController (DncZeus.Api).
2020-06-08 08:51:02,220 [60] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:51:02,240 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) - Validation state: Valid
2020-06-08 08:51:02,268 [60] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[icon], [p].[sysname], [p].[sysno], [p].[sysorder]
FROM [Secsys] AS [p]
ORDER BY [p].[sysorder]
2020-06-08 08:51:02,292 [60] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[funname], [p].[funno], [p].[funorder], [p].[icon], [p].[sysid]
FROM [Secfun] AS [p]
ORDER BY [p].[funorder]
2020-06-08 08:51:02,327 [60] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (27ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[enabled], [x].[funid], [x].[icon], [x].[mainid], [x].[prgcomp], [x].[prgname], [x].[prgno], [x].[prgorder], [x].[prgtype], [x].[program], [x].[runtype], [x].[sysid]
FROM [Secprg] AS [x]
WHERE [x].[enabled] = 'Y'
ORDER BY [x].[prgorder]
2020-06-08 08:51:02,363 [60] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (32ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[butid], [p].[butname], [p].[butno], [p].[butorder], [p].[funid], [p].[prgid], [p].[sysid]
FROM [Secprgbut] AS [p]
ORDER BY [p].[butorder]
2020-06-08 08:51:02,371 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 128.6882ms.
2020-06-08 08:51:02,397 [60] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 08:51:02,407 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) in 180.0223ms
2020-06-08 08:51:02,420 [60] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 200.4717ms 200 application/json; charset=utf-8
2020-06-08 08:51:02,995 [67] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/Upload/img/20200627040310.png  
2020-06-08 08:51:02,998 [67] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 4.6804ms 404 
2020-06-08 08:51:03,020 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-06-08 08:51:03,025 [74] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-06-08 08:51:03,036 [60] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:51:03,040 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:51:03,041 [74] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:51:03,046 [60] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:51:03,059 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 26.1483ms 204 
2020-06-08 08:51:03,060 [60] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:51:03,063 [74] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 26.8793ms 204 
2020-06-08 08:51:03,065 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-06-08 08:51:03,068 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 08:51:03,070 [74] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 170
2020-06-08 08:51:03,072 [15] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:51:03,074 [60] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:51:03,077 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:51:03,079 [74] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:51:03,117 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-06-08 08:51:03,124 [74] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:51:03,126 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 08:51:03,135 [74] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 08:51:03,154 [15] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:51:03,158 [74] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:51:03,160 [60] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (26ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 08:51:03,177 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 08:51:03,205 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 48.2945ms.
2020-06-08 08:51:03,223 [74] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 08:51:03,225 [60] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:51:03,226 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-06-08 08:51:03,228 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 155.6282ms
2020-06-08 08:51:03,231 [60] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 208.2742ms 200 application/json; charset=utf-8
2020-06-08 08:51:03,252 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-06-08 08:51:03,271 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 75.9018ms.
2020-06-08 08:51:03,273 [15] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:51:03,275 [74] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-08 08:51:03,277 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 148.3818ms
2020-06-08 08:51:03,297 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 232.5616ms 200 application/json; charset=utf-8
2020-06-08 08:51:03,301 [74] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-08 08:51:03,304 [74] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 76.2558ms.
2020-06-08 08:51:03,307 [74] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:51:03,309 [74] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 152.1455ms
2020-06-08 08:51:03,313 [74] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 243.4528ms 200 application/json; charset=utf-8
2020-06-08 08:51:03,349 [74] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-08 08:51:03,353 [74] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:51:03,355 [74] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 6.4198ms 204 
2020-06-08 08:51:03,358 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 170
2020-06-08 08:51:03,360 [15] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:51:03,362 [15] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:51:03,364 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 08:51:03,368 [15] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:51:03,386 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-08 08:51:03,411 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL) AND ([x].[qty] = 0.0)
2020-06-08 08:51:03,435 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 08:51:03,456 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 08:51:03,458 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 70.1571ms.
2020-06-08 08:51:03,460 [15] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:51:03,462 [15] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 95.6108ms
2020-06-08 08:51:03,464 [15] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 106.4246ms 200 application/json; charset=utf-8
2020-06-08 08:51:32,903 [60] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:51:32,912 [60] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:51:32,914 [60] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 11.3522ms 204 
2020-06-08 08:51:32,924 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:51:32,927 [75] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:51:32,929 [75] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:51:32,932 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 08:51:32,935 [75] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:51:32,954 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 08:51:32,978 [75] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 08:51:32,981 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23.8191ms.
2020-06-08 08:51:32,984 [75] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:51:32,986 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 51.8002ms
2020-06-08 08:51:32,989 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 70.5535ms 200 application/json; charset=utf-8
2020-06-08 08:52:02,903 [71] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:52:02,911 [71] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:52:02,914 [71] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 11.3333ms 204 
2020-06-08 08:52:02,925 [71] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:52:02,928 [71] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:52:02,930 [71] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:52:02,933 [71] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 08:52:02,936 [71] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:52:02,954 [71] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 08:52:02,976 [71] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 08:52:02,978 [71] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 21.516ms.
2020-06-08 08:52:02,980 [71] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:52:02,983 [71] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 47.3605ms
2020-06-08 08:52:02,986 [71] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 60.1008ms 200 application/json; charset=utf-8
2020-06-08 08:52:32,900 [76] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:52:32,903 [76] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:52:32,919 [76] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 10.754ms 204 
2020-06-08 08:52:32,921 [60] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:52:32,923 [60] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:52:32,927 [60] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:52:32,929 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 08:52:32,932 [60] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:52:32,951 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 08:52:32,974 [60] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 08:52:32,976 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.35ms.
2020-06-08 08:52:32,978 [60] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:52:33,003 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 49.0904ms
2020-06-08 08:52:33,012 [60] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 90.5233ms 200 application/json; charset=utf-8
2020-06-08 08:52:43,824 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8  
2020-06-08 08:52:43,834 [80] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8  
2020-06-08 08:52:43,838 [76] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workprocess/list?api-version=8  
2020-06-08 08:52:43,843 [75] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:52:43,846 [76] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:52:43,851 [80] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:52:43,854 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 27.1515ms 204 
2020-06-08 08:52:43,857 [76] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 26.5019ms 204 
2020-06-08 08:52:43,859 [80] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 29.6506ms 204 
2020-06-08 08:52:43,870 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8 application/json;charset=UTF-8 131
2020-06-08 08:52:43,881 [76] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workprocess/list?api-version=8 application/json;charset=UTF-8 150
2020-06-08 08:52:43,884 [80] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 139
2020-06-08 08:52:43,886 [75] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:52:43,889 [76] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:52:43,891 [80] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:52:43,893 [75] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:52:43,895 [76] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:52:43,898 [80] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:52:43,902 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkDate", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkDate(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-08 08:52:43,903 [76] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workprocess"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workprocess.WorkprocessRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkprocessController (DncZeus.Api).
2020-06-08 08:52:43,905 [80] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-08 08:52:43,908 [76] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:52:43,910 [75] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:52:43,913 [80] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:52:43,940 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) - Validation state: Valid
2020-06-08 08:52:43,942 [76] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 08:52:43,976 [80] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-06-08 08:52:43,995 [75] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (36ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__payload_workDate_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[cadre], [x].[cadreLeave], [x].[cadreRest], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[logistic], [x].[logisticLeave], [x].[logisticRest], [x].[moddate], [x].[moduser], [x].[workDate], [x].[worker], [x].[workerLeave], [x].[workerRest]
FROM [ManFactoryWorkdate] AS [x]
WHERE ([x].[factoryGuid] = @__payload_factoryGuid_0) AND ([x].[workDate] = @__payload_workDate_1)
2020-06-08 08:52:43,999 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 39.0968ms.
2020-06-08 08:52:44,000 [76] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[factoryGuid], [t].[workCode], [t].[workName], [t].[rate], [t].[isvalid], [t].[credate], [t].[creuser], [t].[moddate], [t].[moduser], [t].[factoryName]
FROM (
    SELECT [a].[Guid], [a].[OrgID], [a].[factoryGuid], [a].[workCode], [a].[workName], [a].[rate], [a].[isvalid], [a].[credate], [a].[creuser], [a].[moddate], [a].[moduser], [b].[name] AS [factoryName], ROW_NUMBER() OVER(ORDER BY [a].[factoryGuid], [a].[workCode]) AS [__RowNumber__]
    FROM [ManWorkProcess] AS [a]
    INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
    WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-08 08:52:44,002 [75] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 08:52:44,023 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) in 116.5039ms
2020-06-08 08:52:44,040 [80] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty',isnull(h.targetOut ,0) as 'targetOut',isnull(h.realityOut,0) as 'realityOut',isnull(h.sumTime,0) as 'sumTime',isnull(h.status,0) as 'status'
from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=a.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=a.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=a.factoryGuid)
left join (
select sum(outline.output) as 'todayDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.factoryGuid
) as g on(g.factoryGuid=a.factoryGuid)
left join (
	select aa.targetOut,aa.realityOut,aa.sumTime,aa.factoryGuid,aa.status from ManFactoryWorkout aa where wrokDate=@p3 and factoryGuid=@p0
) as h on(h.factoryGuid=a.factoryGuid)
2020-06-08 08:52:44,065 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 182.9205ms 200 application/json; charset=utf-8
2020-06-08 08:52:44,072 [76] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkProcess] AS [a]
INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
2020-06-08 08:52:44,074 [80] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 89.0955ms.
2020-06-08 08:52:44,076 [76] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 117.3356ms.
2020-06-08 08:52:44,078 [80] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:52:44,082 [76] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:52:44,083 [80] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 172.9992ms
2020-06-08 08:52:44,087 [76] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) in 178.6076ms
2020-06-08 08:52:44,089 [80] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 212.8817ms 200 application/json; charset=utf-8
2020-06-08 08:52:44,091 [76] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 217.1215ms 200 application/json; charset=utf-8
2020-06-08 08:53:02,902 [76] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:53:02,911 [76] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:53:02,915 [76] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 10.9526ms 204 
2020-06-08 08:53:02,928 [60] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:53:02,931 [60] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:53:02,934 [60] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:53:02,936 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 08:53:02,939 [60] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:53:02,959 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 08:53:02,981 [60] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 08:53:02,983 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.1057ms.
2020-06-08 08:53:02,985 [60] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:53:02,988 [60] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 48.3765ms
2020-06-08 08:53:02,991 [60] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 64.5759ms 200 application/json; charset=utf-8
2020-06-08 08:53:32,900 [60] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:53:32,908 [60] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:53:32,911 [60] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 10.0412ms 204 
2020-06-08 08:53:32,919 [81] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:53:32,922 [81] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:53:32,924 [81] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:53:32,927 [81] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 08:53:32,930 [81] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:53:32,948 [81] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 08:53:32,971 [81] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 08:53:32,973 [81] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.2292ms.
2020-06-08 08:53:32,976 [81] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:53:32,979 [81] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 49.2661ms
2020-06-08 08:53:32,982 [81] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 68.7484ms 200 application/json; charset=utf-8
2020-06-08 08:54:02,901 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:54:02,912 [75] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:54:02,916 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 13.6303ms 204 
2020-06-08 08:54:02,930 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:54:02,941 [75] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:54:02,945 [75] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:54:02,949 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 08:54:02,953 [75] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:54:02,972 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 08:54:02,996 [75] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 08:54:03,000 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 24.1061ms.
2020-06-08 08:54:03,004 [75] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:54:03,007 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 54.4883ms
2020-06-08 08:54:03,010 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 81.0887ms 200 application/json; charset=utf-8
2020-06-08 08:54:33,726 [83] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:54:33,737 [83] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:54:33,739 [83] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 12.6039ms 204 
2020-06-08 08:54:33,742 [76] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:54:33,745 [76] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:54:33,747 [76] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:54:33,750 [76] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 08:54:33,752 [76] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:54:33,770 [76] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 08:54:33,790 [76] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (18ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 08:54:33,793 [76] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 20.6676ms.
2020-06-08 08:54:33,795 [76] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:54:33,797 [76] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 45.4934ms
2020-06-08 08:54:33,800 [76] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 58.0042ms 200 application/json; charset=utf-8
2020-06-08 08:55:03,727 [76] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:55:03,736 [76] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:55:03,744 [76] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 10.2052ms 204 
2020-06-08 08:55:03,746 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:55:03,748 [75] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:55:03,757 [75] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:55:03,759 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 08:55:03,761 [75] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:55:03,779 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 08:55:03,800 [75] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 08:55:03,803 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 21.2666ms.
2020-06-08 08:55:03,805 [75] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:55:03,807 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 46.1043ms
2020-06-08 08:55:03,811 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 63.924ms 200 application/json; charset=utf-8
2020-06-08 08:55:33,728 [88] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:55:33,737 [88] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:55:33,746 [88] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 11.4193ms 204 
2020-06-08 08:55:33,748 [83] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:55:33,751 [83] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:55:33,753 [83] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:55:33,756 [83] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 08:55:33,758 [83] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:55:33,776 [83] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 08:55:33,798 [83] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 08:55:33,800 [83] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.0643ms.
2020-06-08 08:55:33,802 [83] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:55:33,804 [83] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 46.5341ms
2020-06-08 08:55:33,814 [83] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 58.6465ms 200 application/json; charset=utf-8
2020-06-08 08:56:03,727 [76] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:56:03,737 [76] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:56:03,740 [76] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 12.8611ms 204 
2020-06-08 08:56:03,743 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:56:03,745 [96] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:56:03,754 [96] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:56:03,756 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 08:56:03,759 [96] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:56:03,777 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 08:56:03,799 [96] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 08:56:03,801 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.6902ms.
2020-06-08 08:56:03,803 [96] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:56:03,805 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 47.4746ms
2020-06-08 08:56:03,808 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 65.3054ms 200 application/json; charset=utf-8
2020-06-08 08:56:33,728 [97] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:56:33,738 [97] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:56:33,747 [97] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 12.1689ms 204 
2020-06-08 08:56:33,749 [88] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:56:33,751 [88] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:56:33,753 [88] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:56:33,755 [88] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 08:56:33,759 [88] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:56:33,776 [88] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 08:56:33,798 [88] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 08:56:33,800 [88] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 21.9295ms.
2020-06-08 08:56:33,802 [88] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:56:33,804 [88] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 46.0693ms
2020-06-08 08:56:33,806 [88] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 57.4239ms 200 application/json; charset=utf-8
2020-06-08 08:57:03,728 [88] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:57:03,737 [88] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:57:03,740 [88] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 11.38ms 204 
2020-06-08 08:57:03,744 [97] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:57:03,747 [97] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:57:03,749 [97] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:57:03,760 [97] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 08:57:03,763 [97] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:57:03,782 [97] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 08:57:03,804 [97] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 08:57:03,807 [97] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 21.668ms.
2020-06-08 08:57:03,809 [97] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:57:03,811 [97] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 48.6114ms
2020-06-08 08:57:03,814 [97] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 69.2823ms 200 application/json; charset=utf-8
2020-06-08 08:57:33,727 [101] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:57:33,736 [101] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:57:33,738 [101] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 11.2446ms 204 
2020-06-08 08:57:33,748 [101] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:57:33,757 [101] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:57:33,759 [101] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:57:33,762 [101] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 08:57:33,764 [101] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:57:33,782 [101] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 08:57:33,804 [101] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 08:57:33,808 [101] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 21.7217ms.
2020-06-08 08:57:33,811 [101] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:57:33,813 [101] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 49.2159ms
2020-06-08 08:57:33,816 [101] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 67.5298ms 200 application/json; charset=utf-8
2020-06-08 08:57:41,881 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v1/account/profile  
2020-06-08 08:57:41,884 [96] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:57:41,888 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 4.6884ms 204 
2020-06-08 08:57:41,891 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v1/account/profile  
2020-06-08 08:57:41,894 [96] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:57:41,897 [96] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:57:41,900 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Profile() on controller DncZeus.Api.Controllers.AccountController (DncZeus.Api).
2020-06-08 08:57:41,902 [96] INFO  Microsoft.AspNetCore.Authorization.DefaultAuthorizationService [(null)]  - Authorization was successful.
2020-06-08 08:57:41,905 [96] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:57:41,933 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) - Validation state: Valid
2020-06-08 08:57:41,976 [101] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (37ms) [Parameters=[@__Parse_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[ID], [x].[Code], [x].[Name], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser]
FROM [MisOrganization] AS [x]
WHERE [x].[ID] = @__Parse_0
2020-06-08 08:57:42,009 [101] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (30ms) [Parameters=[@__guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[EmpName], [x].[EmpNo], [x].[code], [x].[credate], [x].[creuser], [x].[depname], [x].[depno], [x].[email], [x].[enabled], [x].[jobname], [x].[jobno], [x].[moddate], [x].[moduser], [x].[pwd], [x].[telno], [x].[userLogo], [x].[username], [x].[userno], [x].[utype], [x].[wxAccount], [x].[wxId], [x].[wxMail], [x].[wxName], [x].[wxPhone], [x].[wxPwd]
FROM [Secuser] AS [x]
WHERE [x].[Guid] = @__guid_0
2020-06-08 08:57:42,035 [96] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[Alias], [x].[BeforeCloseFun], [x].[Component], [x].[CreatedByUserGuid], [x].[CreatedByUserName], [x].[CreatedOn], [x].[Description], [x].[HideInMenu], [x].[Icon], [x].[IsDefaultRouter], [x].[IsDeleted], [x].[Level], [x].[ModifiedByUserGuid], [x].[ModifiedByUserName], [x].[ModifiedOn], [x].[Name], [x].[NotCache], [x].[ParentGuid], [x].[ParentName], [x].[Sort], [x].[Status], [x].[Url]
FROM [DncMenu] AS [x]
WHERE ([x].[IsDeleted] = 0) AND ([x].[Status] = 1)
2020-06-08 08:57:42,071 [96] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (28ms) [Parameters=[@__user_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secuprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE [x].[userid] = @__user_Guid_0
ORDER BY [b0].[prgno]
2020-06-08 08:57:42,095 [96] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__groupid_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secgprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE CONVERT(VARCHAR(36), [x].[groupid]) = @__groupid_0
ORDER BY [b0].[prgno]
2020-06-08 08:57:42,097 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 160.8706ms.
2020-06-08 08:57:42,100 [96] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 08:57:42,102 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) in 199.994ms
2020-06-08 08:57:42,107 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 215.5646ms 200 application/json; charset=utf-8
2020-06-08 08:57:42,126 [88] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-08 08:57:42,128 [88] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:57:42,132 [88] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 15.9892ms 204 
2020-06-08 08:57:42,135 [88] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-08 08:57:42,144 [88] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:57:42,147 [88] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:57:42,150 [88] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "LoadMenuTree", controller = "Uprg"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult LoadMenuTree() on controller DncZeus.Api.Controllers.Api.Sec.UprgController (DncZeus.Api).
2020-06-08 08:57:42,158 [88] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:57:42,178 [88] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) - Validation state: Valid
2020-06-08 08:57:42,201 [88] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[icon], [p].[sysname], [p].[sysno], [p].[sysorder]
FROM [Secsys] AS [p]
ORDER BY [p].[sysorder]
2020-06-08 08:57:42,224 [88] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[funname], [p].[funno], [p].[funorder], [p].[icon], [p].[sysid]
FROM [Secfun] AS [p]
ORDER BY [p].[funorder]
2020-06-08 08:57:42,249 [88] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[enabled], [x].[funid], [x].[icon], [x].[mainid], [x].[prgcomp], [x].[prgname], [x].[prgno], [x].[prgorder], [x].[prgtype], [x].[program], [x].[runtype], [x].[sysid]
FROM [Secprg] AS [x]
WHERE [x].[enabled] = 'Y'
ORDER BY [x].[prgorder]
2020-06-08 08:57:42,274 [88] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[butid], [p].[butname], [p].[butno], [p].[butorder], [p].[funid], [p].[prgid], [p].[sysid]
FROM [Secprgbut] AS [p]
ORDER BY [p].[butorder]
2020-06-08 08:57:42,277 [88] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 96.8784ms.
2020-06-08 08:57:42,279 [88] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 08:57:42,282 [88] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) in 129.0462ms
2020-06-08 08:57:42,285 [88] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 149.7876ms 200 application/json; charset=utf-8
2020-06-08 08:57:42,855 [88] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/Upload/img/20200627040310.png  
2020-06-08 08:57:42,858 [88] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 3.2043ms 404 
2020-06-08 08:57:42,891 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-06-08 08:57:42,892 [88] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:57:42,907 [101] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-06-08 08:57:42,908 [96] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:57:42,910 [88] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:57:42,914 [101] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:57:42,919 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 29.0401ms 204 
2020-06-08 08:57:42,945 [88] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 30.9377ms 204 
2020-06-08 08:57:42,983 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-06-08 08:57:42,974 [101] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 29.4506ms 204 
2020-06-08 08:57:42,992 [88] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:57:42,993 [96] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:57:42,995 [101] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 170
2020-06-08 08:57:42,996 [88] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:57:42,998 [96] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:57:42,999 [101] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:57:43,001 [88] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:57:43,002 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-06-08 08:57:43,004 [101] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:57:43,007 [88] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 08:57:43,009 [101] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 08:57:43,011 [96] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:57:43,014 [101] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:57:43,015 [88] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:57:43,033 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 08:57:43,064 [101] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 08:57:43,066 [88] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 08:57:43,087 [96] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-06-08 08:57:43,125 [88] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (35ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 08:57:43,128 [101] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-08 08:57:43,130 [88] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 43.1112ms.
2020-06-08 08:57:43,150 [88] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:57:43,170 [101] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-08 08:57:43,180 [88] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 158.8809ms
2020-06-08 08:57:43,183 [101] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 115.4395ms.
2020-06-08 08:57:43,181 [96] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-06-08 08:57:43,184 [88] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 192.7493ms 200 application/json; charset=utf-8
2020-06-08 08:57:43,188 [101] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:57:43,190 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 139.4566ms.
2020-06-08 08:57:43,193 [101] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 178.9267ms
2020-06-08 08:57:43,200 [96] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:57:43,202 [101] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 206.6274ms 200 application/json; charset=utf-8
2020-06-08 08:57:43,205 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 197.6472ms
2020-06-08 08:57:43,208 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 225.5305ms 200 application/json; charset=utf-8
2020-06-08 08:57:43,225 [97] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-08 08:57:43,228 [97] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:57:43,232 [97] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.8916ms 204 
2020-06-08 08:57:43,236 [97] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 170
2020-06-08 08:57:43,239 [97] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:57:43,241 [97] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:57:43,244 [97] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 08:57:43,246 [97] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:57:43,267 [97] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-08 08:57:43,291 [97] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL) AND ([x].[qty] = 0.0)
2020-06-08 08:57:43,313 [97] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 08:57:43,334 [97] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 08:57:43,337 [97] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 66.9169ms.
2020-06-08 08:57:43,339 [97] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:57:43,342 [97] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 95.9829ms
2020-06-08 08:57:43,345 [97] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 108.9227ms 200 application/json; charset=utf-8
2020-06-08 08:57:44,545 [88] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8  
2020-06-08 08:57:44,547 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workprocess/list?api-version=8  
2020-06-08 08:57:44,550 [88] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:57:44,552 [96] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:57:44,555 [88] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 9.9718ms 204 
2020-06-08 08:57:44,564 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 10.9527ms 204 
2020-06-08 08:57:44,568 [97] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8 application/json;charset=UTF-8 131
2020-06-08 08:57:44,571 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workprocess/list?api-version=8 application/json;charset=UTF-8 150
2020-06-08 08:57:44,575 [97] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:57:44,578 [96] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:57:44,580 [97] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:57:44,583 [96] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:57:44,584 [97] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkDate", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkDate(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-08 08:57:44,587 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workprocess"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workprocess.WorkprocessRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkprocessController (DncZeus.Api).
2020-06-08 08:57:44,590 [97] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:57:44,592 [96] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:57:44,619 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 08:57:44,620 [97] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) - Validation state: Valid
2020-06-08 08:57:44,662 [97] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (38ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__payload_workDate_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[cadre], [x].[cadreLeave], [x].[cadreRest], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[logistic], [x].[logisticLeave], [x].[logisticRest], [x].[moddate], [x].[moduser], [x].[workDate], [x].[worker], [x].[workerLeave], [x].[workerRest]
FROM [ManFactoryWorkdate] AS [x]
WHERE ([x].[factoryGuid] = @__payload_factoryGuid_0) AND ([x].[workDate] = @__payload_workDate_1)
2020-06-08 08:57:44,665 [96] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (39ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[factoryGuid], [t].[workCode], [t].[workName], [t].[rate], [t].[isvalid], [t].[credate], [t].[creuser], [t].[moddate], [t].[moduser], [t].[factoryName]
FROM (
    SELECT [a].[Guid], [a].[OrgID], [a].[factoryGuid], [a].[workCode], [a].[workName], [a].[rate], [a].[isvalid], [a].[credate], [a].[creuser], [a].[moddate], [a].[moduser], [b].[name] AS [factoryName], ROW_NUMBER() OVER(ORDER BY [a].[factoryGuid], [a].[workCode]) AS [__RowNumber__]
    FROM [ManWorkProcess] AS [a]
    INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
    WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-08 08:57:44,666 [97] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 43.5339ms.
2020-06-08 08:57:44,671 [97] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 08:57:44,692 [97] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) in 104.9699ms
2020-06-08 08:57:44,694 [96] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkProcess] AS [a]
INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
2020-06-08 08:57:44,696 [97] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 128.9674ms 200 application/json; charset=utf-8
2020-06-08 08:57:44,699 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 75.6381ms.
2020-06-08 08:57:44,702 [96] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:57:44,707 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) in 115.6494ms
2020-06-08 08:57:44,710 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 142.1293ms 200 application/json; charset=utf-8
2020-06-08 08:57:45,490 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8  
2020-06-08 08:57:45,492 [96] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:57:45,495 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 4.9316ms 204 
2020-06-08 08:57:45,521 [88] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 139
2020-06-08 08:57:45,524 [88] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:57:45,527 [88] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:57:45,529 [88] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-08 08:57:45,531 [88] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:57:45,550 [88] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-06-08 08:57:45,574 [88] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty',isnull(h.targetOut ,0) as 'targetOut',isnull(h.realityOut,0) as 'realityOut',isnull(h.sumTime,0) as 'sumTime',isnull(h.status,0) as 'status'
from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=a.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=a.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=a.factoryGuid)
left join (
select sum(outline.output) as 'todayDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.factoryGuid
) as g on(g.factoryGuid=a.factoryGuid)
left join (
	select aa.targetOut,aa.realityOut,aa.sumTime,aa.factoryGuid,aa.status from ManFactoryWorkout aa where wrokDate=@p3 and factoryGuid=@p0
) as h on(h.factoryGuid=a.factoryGuid)
2020-06-08 08:57:45,578 [88] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 24.1862ms.
2020-06-08 08:57:45,580 [88] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:57:45,585 [88] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 51.9782ms
2020-06-08 08:57:45,589 [88] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 89.7423ms 200 application/json; charset=utf-8
2020-06-08 08:58:12,745 [109] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:58:12,755 [109] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:58:12,757 [109] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 12.2216ms 204 
2020-06-08 08:58:12,761 [104] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:58:12,763 [104] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:58:12,772 [104] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:58:12,775 [104] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 08:58:12,778 [104] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:58:12,797 [104] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 08:58:12,821 [104] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 08:58:12,823 [104] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23.0786ms.
2020-06-08 08:58:12,825 [104] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:58:12,828 [104] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 50.4639ms
2020-06-08 08:58:12,831 [104] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 70.1218ms 200 application/json; charset=utf-8
2020-06-08 08:58:33,786 [106] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-06-08 08:58:33,805 [106] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:58:33,823 [106] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 22.363ms 204 
2020-06-08 08:58:33,825 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-06-08 08:58:33,847 [111] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-06-08 08:58:33,857 [96] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:58:33,859 [111] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:58:33,863 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 50.2828ms 204 
2020-06-08 08:58:33,872 [111] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:58:33,880 [106] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 170
2020-06-08 08:58:33,881 [111] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-06-08 08:58:33,883 [106] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:58:33,888 [106] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:58:33,891 [111] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:58:33,893 [106] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 08:58:33,915 [111] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 08:58:33,917 [106] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:58:33,958 [111] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (40ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-06-08 08:58:33,961 [106] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 08:58:34,000 [111] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-06-08 08:58:34,004 [111] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 84.6168ms.
2020-06-08 08:58:34,006 [106] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (25ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-08 08:58:34,008 [111] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:58:34,029 [111] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 126.9659ms
2020-06-08 08:58:34,031 [111] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 205.5176ms 200 application/json; charset=utf-8
2020-06-08 08:58:34,032 [106] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-08 08:58:34,035 [106] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 54.2359ms.
2020-06-08 08:58:34,038 [106] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:58:34,041 [106] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 125.2533ms
2020-06-08 08:58:34,043 [106] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 169.4793ms 200 application/json; charset=utf-8
2020-06-08 08:58:34,073 [106] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-08 08:58:34,076 [106] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:58:34,078 [106] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 4.3214ms 204 
2020-06-08 08:58:34,081 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 170
2020-06-08 08:58:34,083 [96] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:58:34,085 [96] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:58:34,087 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 08:58:34,090 [96] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:58:34,107 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-08 08:58:34,129 [96] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL) AND ([x].[qty] = 0.0)
2020-06-08 08:58:34,150 [96] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 08:58:34,173 [96] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 08:58:34,175 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 66.1458ms.
2020-06-08 08:58:34,177 [96] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:58:34,179 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 88.9479ms
2020-06-08 08:58:34,181 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 99.8873ms 200 application/json; charset=utf-8
2020-06-08 08:58:35,338 [111] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8  
2020-06-08 08:58:35,341 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8  
2020-06-08 08:58:35,345 [115] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workprocess/list?api-version=8  
2020-06-08 08:58:35,346 [111] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:58:35,350 [96] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:58:35,353 [115] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:58:35,363 [111] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 15.4428ms 204 
2020-06-08 08:58:35,365 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 19.3799ms 204 
2020-06-08 08:58:35,369 [115] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 20.2388ms 204 
2020-06-08 08:58:35,373 [111] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8 application/json;charset=UTF-8 131
2020-06-08 08:58:35,375 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 139
2020-06-08 08:58:35,378 [111] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:58:35,380 [115] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workprocess/list?api-version=8 application/json;charset=UTF-8 150
2020-06-08 08:58:35,383 [96] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:58:35,386 [111] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:58:35,388 [115] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:58:35,391 [96] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:58:35,392 [111] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkDate", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkDate(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-08 08:58:35,394 [115] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:58:35,396 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-08 08:58:35,397 [115] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workprocess"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workprocess.WorkprocessRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkprocessController (DncZeus.Api).
2020-06-08 08:58:35,399 [111] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:58:35,400 [96] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:58:35,403 [115] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:58:35,430 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-06-08 08:58:35,431 [111] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) - Validation state: Valid
2020-06-08 08:58:35,449 [115] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 08:58:35,505 [111] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (56ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__payload_workDate_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[cadre], [x].[cadreLeave], [x].[cadreRest], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[logistic], [x].[logisticLeave], [x].[logisticRest], [x].[moddate], [x].[moduser], [x].[workDate], [x].[worker], [x].[workerLeave], [x].[workerRest]
FROM [ManFactoryWorkdate] AS [x]
WHERE ([x].[factoryGuid] = @__payload_factoryGuid_0) AND ([x].[workDate] = @__payload_workDate_1)
2020-06-08 08:58:35,507 [96] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (56ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty',isnull(h.targetOut ,0) as 'targetOut',isnull(h.realityOut,0) as 'realityOut',isnull(h.sumTime,0) as 'sumTime',isnull(h.status,0) as 'status'
from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=a.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=a.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=a.factoryGuid)
left join (
select sum(outline.output) as 'todayDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.factoryGuid
) as g on(g.factoryGuid=a.factoryGuid)
left join (
	select aa.targetOut,aa.realityOut,aa.sumTime,aa.factoryGuid,aa.status from ManFactoryWorkout aa where wrokDate=@p3 and factoryGuid=@p0
) as h on(h.factoryGuid=a.factoryGuid)
2020-06-08 08:58:35,509 [115] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[factoryGuid], [t].[workCode], [t].[workName], [t].[rate], [t].[isvalid], [t].[credate], [t].[creuser], [t].[moddate], [t].[moduser], [t].[factoryName]
FROM (
    SELECT [a].[Guid], [a].[OrgID], [a].[factoryGuid], [a].[workCode], [a].[workName], [a].[rate], [a].[isvalid], [a].[credate], [a].[creuser], [a].[moddate], [a].[moduser], [b].[name] AS [factoryName], ROW_NUMBER() OVER(ORDER BY [a].[factoryGuid], [a].[workCode]) AS [__RowNumber__]
    FROM [ManWorkProcess] AS [a]
    INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
    WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-08 08:58:35,511 [111] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 76.7781ms.
2020-06-08 08:58:35,512 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 79.4306ms.
2020-06-08 08:58:35,533 [111] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 08:58:35,536 [96] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:58:35,538 [111] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) in 139.1448ms
2020-06-08 08:58:35,540 [115] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkProcess] AS [a]
INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
2020-06-08 08:58:35,544 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 142.431ms
2020-06-08 08:58:35,545 [111] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 175.065ms 200 application/json; charset=utf-8
2020-06-08 08:58:35,547 [115] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 74.96ms.
2020-06-08 08:58:35,549 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 176.5145ms 200 application/json; charset=utf-8
2020-06-08 08:58:35,552 [115] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:58:35,555 [115] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) in 153.8948ms
2020-06-08 08:58:35,558 [115] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 184.8305ms 200 application/json; charset=utf-8
2020-06-08 08:58:42,750 [104] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:58:42,754 [104] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:58:42,757 [104] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 7.1417ms 204 
2020-06-08 08:58:42,760 [104] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:58:42,763 [104] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:58:42,765 [104] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:58:42,768 [104] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 08:58:42,771 [104] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:58:42,791 [104] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 08:58:42,813 [104] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 08:58:42,815 [104] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.2052ms.
2020-06-08 08:58:42,819 [104] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:58:42,821 [104] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 50.9018ms
2020-06-08 08:58:42,824 [104] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 63.4053ms 200 application/json; charset=utf-8
2020-06-08 08:59:12,743 [104] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:59:12,755 [104] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:59:12,763 [104] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 14.4437ms 204 
2020-06-08 08:59:12,766 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:59:12,769 [96] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:59:12,771 [96] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:59:12,773 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 08:59:12,776 [96] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:59:12,794 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 08:59:12,816 [96] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 08:59:12,820 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23.995ms.
2020-06-08 08:59:12,822 [96] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:59:12,825 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 48.9823ms
2020-06-08 08:59:12,828 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 61.9766ms 200 application/json; charset=utf-8
2020-06-08 08:59:21,081 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-06-08 08:59:21,083 [106] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-06-08 08:59:21,093 [96] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:59:21,095 [106] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:59:21,113 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 16.1495ms 204 
2020-06-08 08:59:21,115 [106] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 19.5382ms 204 
2020-06-08 08:59:21,120 [118] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-06-08 08:59:21,127 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 170
2020-06-08 08:59:21,130 [96] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:59:21,132 [118] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:59:21,137 [96] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:59:21,138 [118] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:59:21,141 [118] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-06-08 08:59:21,143 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 08:59:21,145 [96] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:59:21,147 [118] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:59:21,176 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 08:59:21,176 [118] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 08:59:21,214 [96] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (35ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-08 08:59:21,215 [118] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (35ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-06-08 08:59:21,275 [118] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (56ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-06-08 08:59:21,276 [96] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (57ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-08 08:59:21,278 [118] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 99.4881ms.
2020-06-08 08:59:21,279 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 101.2787ms.
2020-06-08 08:59:21,281 [118] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:59:21,283 [96] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:59:21,286 [118] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 139.7551ms
2020-06-08 08:59:21,290 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 143.4337ms
2020-06-08 08:59:21,291 [118] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 175.5413ms 200 application/json; charset=utf-8
2020-06-08 08:59:21,295 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 174.4344ms 200 application/json; charset=utf-8
2020-06-08 08:59:21,322 [107] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-08 08:59:21,324 [107] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:59:21,327 [107] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 4.4965ms 204 
2020-06-08 08:59:21,330 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 170
2020-06-08 08:59:21,332 [96] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:59:21,335 [96] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:59:21,337 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 08:59:21,339 [96] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:59:21,357 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-08 08:59:21,379 [96] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (18ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL) AND ([x].[qty] = 0.0)
2020-06-08 08:59:21,401 [96] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (18ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 08:59:21,423 [96] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 08:59:21,425 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 65.9683ms.
2020-06-08 08:59:21,427 [96] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:59:21,429 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 89.6575ms
2020-06-08 08:59:21,431 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 100.5739ms 200 application/json; charset=utf-8
2020-06-08 08:59:22,986 [107] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8  
2020-06-08 08:59:22,995 [106] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8  
2020-06-08 08:59:23,006 [104] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workprocess/list?api-version=8  
2020-06-08 08:59:23,013 [106] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:59:23,015 [104] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:59:23,020 [107] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:59:23,022 [106] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 44.6771ms 204 
2020-06-08 08:59:23,027 [104] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 39.2346ms 204 
2020-06-08 08:59:23,028 [107] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 51.7275ms 204 
2020-06-08 08:59:23,036 [106] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8 application/json;charset=UTF-8 131
2020-06-08 08:59:23,039 [104] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workprocess/list?api-version=8 application/json;charset=UTF-8 150
2020-06-08 08:59:23,042 [106] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:59:23,044 [107] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 139
2020-06-08 08:59:23,047 [106] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:59:23,049 [104] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:59:23,051 [107] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:59:23,056 [106] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkDate", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkDate(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-08 08:59:23,059 [104] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:59:23,061 [107] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:59:23,063 [106] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:59:23,064 [107] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-08 08:59:23,066 [104] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workprocess"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workprocess.WorkprocessRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkprocessController (DncZeus.Api).
2020-06-08 08:59:23,085 [107] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:59:23,087 [106] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) - Validation state: Valid
2020-06-08 08:59:23,089 [104] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:59:23,106 [107] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-06-08 08:59:23,141 [106] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (33ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__payload_workDate_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[cadre], [x].[cadreLeave], [x].[cadreRest], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[logistic], [x].[logisticLeave], [x].[logisticRest], [x].[moddate], [x].[moduser], [x].[workDate], [x].[worker], [x].[workerLeave], [x].[workerRest]
FROM [ManFactoryWorkdate] AS [x]
WHERE ([x].[factoryGuid] = @__payload_factoryGuid_0) AND ([x].[workDate] = @__payload_workDate_1)
2020-06-08 08:59:23,163 [104] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 08:59:23,181 [106] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 89.8701ms.
2020-06-08 08:59:23,184 [106] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 08:59:23,186 [107] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (41ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty',isnull(h.targetOut ,0) as 'targetOut',isnull(h.realityOut,0) as 'realityOut',isnull(h.sumTime,0) as 'sumTime',isnull(h.status,0) as 'status'
from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=a.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=a.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=a.factoryGuid)
left join (
select sum(outline.output) as 'todayDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.factoryGuid
) as g on(g.factoryGuid=a.factoryGuid)
left join (
	select aa.targetOut,aa.realityOut,aa.sumTime,aa.factoryGuid,aa.status from ManFactoryWorkout aa where wrokDate=@p3 and factoryGuid=@p0
) as h on(h.factoryGuid=a.factoryGuid)
2020-06-08 08:59:23,206 [106] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) in 146.118ms
2020-06-08 08:59:23,209 [104] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[factoryGuid], [t].[workCode], [t].[workName], [t].[rate], [t].[isvalid], [t].[credate], [t].[creuser], [t].[moddate], [t].[moduser], [t].[factoryName]
FROM (
    SELECT [a].[Guid], [a].[OrgID], [a].[factoryGuid], [a].[workCode], [a].[workName], [a].[rate], [a].[isvalid], [a].[credate], [a].[creuser], [a].[moddate], [a].[moduser], [b].[name] AS [factoryName], ROW_NUMBER() OVER(ORDER BY [a].[factoryGuid], [a].[workCode]) AS [__RowNumber__]
    FROM [ManWorkProcess] AS [a]
    INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
    WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-08 08:59:23,210 [107] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 81.4632ms.
2020-06-08 08:59:23,211 [106] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 180.1815ms 200 application/json; charset=utf-8
2020-06-08 08:59:23,231 [107] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:59:23,233 [107] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 165.1229ms
2020-06-08 08:59:23,235 [104] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkProcess] AS [a]
INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
2020-06-08 08:59:23,237 [107] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 203.6513ms 200 application/json; charset=utf-8
2020-06-08 08:59:23,240 [104] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 57.0972ms.
2020-06-08 08:59:23,242 [104] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:59:23,244 [104] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) in 174.0746ms
2020-06-08 08:59:23,247 [104] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 214.7263ms 200 application/json; charset=utf-8
2020-06-08 08:59:42,744 [118] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:59:42,757 [118] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:59:42,768 [118] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 15.8454ms 204 
2020-06-08 08:59:42,771 [107] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 08:59:42,773 [107] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 08:59:42,775 [107] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 08:59:42,778 [107] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 08:59:42,780 [107] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 08:59:42,798 [107] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 08:59:42,822 [107] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 08:59:42,824 [107] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23.7326ms.
2020-06-08 08:59:42,826 [107] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 08:59:42,828 [107] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 48.062ms
2020-06-08 08:59:42,831 [107] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 60.1416ms 200 application/json; charset=utf-8
2020-06-08 09:00:12,753 [119] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:00:12,761 [119] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:00:12,764 [119] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 10.3724ms 204 
2020-06-08 09:00:12,767 [119] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:00:12,776 [119] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:00:12,778 [119] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:00:12,782 [119] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:00:12,785 [119] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:00:12,804 [119] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:00:12,826 [119] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:00:12,829 [119] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.373ms.
2020-06-08 09:00:12,832 [119] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:00:12,835 [119] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 49.7301ms
2020-06-08 09:00:12,838 [119] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 70.9184ms 200 application/json; charset=utf-8
2020-06-08 09:00:42,745 [118] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:00:42,758 [118] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:00:42,774 [118] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 17.0467ms 204 
2020-06-08 09:00:42,776 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:00:42,779 [96] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:00:42,783 [96] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:00:42,785 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:00:42,788 [96] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:00:42,807 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:00:42,829 [96] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:00:42,831 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 21.2198ms.
2020-06-08 09:00:42,834 [96] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:00:42,836 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 48.7533ms
2020-06-08 09:00:42,839 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 62.1324ms 200 application/json; charset=utf-8
2020-06-08 09:01:12,745 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:01:12,774 [96] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:01:12,787 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 41.8632ms 204 
2020-06-08 09:01:12,792 [123] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:01:12,795 [123] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:01:12,801 [123] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:01:12,804 [123] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:01:12,807 [123] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:01:12,826 [123] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:01:12,848 [123] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:01:12,851 [123] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.1578ms.
2020-06-08 09:01:12,853 [123] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:01:12,855 [123] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 48.6779ms
2020-06-08 09:01:12,858 [123] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 65.1783ms 200 application/json; charset=utf-8
2020-06-08 09:01:17,632 [106] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-06-08 09:01:17,634 [124] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-06-08 09:01:17,641 [124] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:01:17,649 [106] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:01:17,656 [124] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 16.5958ms 204 
2020-06-08 09:01:17,668 [106] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 23.7533ms 204 
2020-06-08 09:01:17,688 [124] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-06-08 09:01:17,705 [119] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 170
2020-06-08 09:01:17,712 [124] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:01:17,715 [119] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:01:17,721 [124] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:01:17,724 [119] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:01:17,728 [124] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-06-08 09:01:17,730 [119] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 09:01:17,735 [124] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:01:17,738 [119] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:01:17,768 [119] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 09:01:17,769 [124] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 09:01:17,808 [124] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (35ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-06-08 09:01:17,809 [119] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (36ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-08 09:01:17,847 [124] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (35ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-06-08 09:01:17,851 [119] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-08 09:01:17,853 [124] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 79.4693ms.
2020-06-08 09:01:17,855 [119] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 83.4484ms.
2020-06-08 09:01:17,857 [124] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:01:17,862 [119] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:01:17,866 [124] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 130.7005ms
2020-06-08 09:01:17,868 [119] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 132.9241ms
2020-06-08 09:01:17,872 [124] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 200.2238ms 200 application/json; charset=utf-8
2020-06-08 09:01:17,875 [119] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 201.6689ms 200 application/json; charset=utf-8
2020-06-08 09:01:17,922 [127] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-08 09:01:17,924 [127] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:01:17,929 [127] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 8.3781ms 204 
2020-06-08 09:01:17,940 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 170
2020-06-08 09:01:17,944 [96] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:01:17,949 [96] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:01:17,953 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 09:01:17,956 [96] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:01:17,974 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-08 09:01:18,001 [96] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL) AND ([x].[qty] = 0.0)
2020-06-08 09:01:18,023 [96] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 09:01:18,044 [96] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 09:01:18,046 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 70.1366ms.
2020-06-08 09:01:18,050 [96] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:01:18,053 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 97.0829ms
2020-06-08 09:01:18,057 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 122.4055ms 200 application/json; charset=utf-8
2020-06-08 09:01:19,244 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8  
2020-06-08 09:01:19,246 [106] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8  
2020-06-08 09:01:19,249 [123] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workprocess/list?api-version=8  
2020-06-08 09:01:19,252 [96] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:01:19,254 [106] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:01:19,260 [123] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:01:19,268 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 13.0233ms 204 
2020-06-08 09:01:19,274 [106] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 16.6708ms 204 
2020-06-08 09:01:19,275 [123] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 16.8233ms 204 
2020-06-08 09:01:19,278 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8 application/json;charset=UTF-8 131
2020-06-08 09:01:19,283 [106] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 139
2020-06-08 09:01:19,285 [123] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workprocess/list?api-version=8 application/json;charset=UTF-8 150
2020-06-08 09:01:19,295 [96] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:01:19,298 [106] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:01:19,302 [123] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:01:19,300 [96] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:01:19,304 [106] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:01:19,306 [123] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:01:19,307 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkDate", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkDate(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-08 09:01:19,310 [106] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-08 09:01:19,311 [123] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workprocess"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workprocess.WorkprocessRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkprocessController (DncZeus.Api).
2020-06-08 09:01:19,315 [96] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:01:19,319 [123] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:01:19,320 [106] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:01:19,338 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) - Validation state: Valid
2020-06-08 09:01:19,355 [123] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 09:01:19,373 [106] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-06-08 09:01:19,429 [96] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (39ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__payload_workDate_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[cadre], [x].[cadreLeave], [x].[cadreRest], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[logistic], [x].[logisticLeave], [x].[logisticRest], [x].[moddate], [x].[moduser], [x].[workDate], [x].[worker], [x].[workerLeave], [x].[workerRest]
FROM [ManFactoryWorkdate] AS [x]
WHERE ([x].[factoryGuid] = @__payload_factoryGuid_0) AND ([x].[workDate] = @__payload_workDate_1)
2020-06-08 09:01:19,432 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 76.5733ms.
2020-06-08 09:01:19,434 [123] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (37ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[factoryGuid], [t].[workCode], [t].[workName], [t].[rate], [t].[isvalid], [t].[credate], [t].[creuser], [t].[moddate], [t].[moduser], [t].[factoryName]
FROM (
    SELECT [a].[Guid], [a].[OrgID], [a].[factoryGuid], [a].[workCode], [a].[workName], [a].[rate], [a].[isvalid], [a].[credate], [a].[creuser], [a].[moddate], [a].[moduser], [b].[name] AS [factoryName], ROW_NUMBER() OVER(ORDER BY [a].[factoryGuid], [a].[workCode]) AS [__RowNumber__]
    FROM [ManWorkProcess] AS [a]
    INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
    WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-08 09:01:19,435 [106] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (39ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty',isnull(h.targetOut ,0) as 'targetOut',isnull(h.realityOut,0) as 'realityOut',isnull(h.sumTime,0) as 'sumTime',isnull(h.status,0) as 'status'
from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=a.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=a.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=a.factoryGuid)
left join (
select sum(outline.output) as 'todayDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.factoryGuid
) as g on(g.factoryGuid=a.factoryGuid)
left join (
	select aa.targetOut,aa.realityOut,aa.sumTime,aa.factoryGuid,aa.status from ManFactoryWorkout aa where wrokDate=@p3 and factoryGuid=@p0
) as h on(h.factoryGuid=a.factoryGuid)
2020-06-08 09:01:19,437 [96] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 09:01:19,440 [106] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 45.8798ms.
2020-06-08 09:01:19,460 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) in 148.0646ms
2020-06-08 09:01:19,462 [106] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:01:19,465 [123] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkProcess] AS [a]
INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
2020-06-08 09:01:19,469 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 191.3303ms 200 application/json; charset=utf-8
2020-06-08 09:01:19,471 [106] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 155.3421ms
2020-06-08 09:01:19,474 [123] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 98.3542ms.
2020-06-08 09:01:19,477 [106] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 196.3379ms 200 application/json; charset=utf-8
2020-06-08 09:01:19,480 [123] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:01:19,485 [123] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) in 166.8776ms
2020-06-08 09:01:19,488 [123] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 206.4023ms 200 application/json; charset=utf-8
2020-06-08 09:01:42,744 [119] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:01:42,755 [119] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:01:42,769 [119] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 14.1103ms 204 
2020-06-08 09:01:42,771 [106] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:01:42,775 [106] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:01:42,777 [106] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:01:42,781 [106] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:01:42,785 [106] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:01:42,804 [106] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:01:42,829 [106] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:01:42,832 [106] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 25.3684ms.
2020-06-08 09:01:42,835 [106] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:01:42,837 [106] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 53.4405ms
2020-06-08 09:01:42,841 [106] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 69.3741ms 200 application/json; charset=utf-8
2020-06-08 09:02:12,744 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:02:12,755 [96] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:02:12,769 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 14.5095ms 204 
2020-06-08 09:02:12,772 [127] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:02:12,775 [127] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:02:12,779 [127] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:02:12,784 [127] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:02:12,788 [127] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:02:12,806 [127] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:02:12,828 [127] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:02:12,831 [127] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.6699ms.
2020-06-08 09:02:12,833 [127] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:02:12,836 [127] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 49.1092ms
2020-06-08 09:02:12,859 [127] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 66.7272ms 200 application/json; charset=utf-8
2020-06-08 09:02:42,744 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:02:42,754 [96] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:02:42,758 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 13.1332ms 204 
2020-06-08 09:02:42,766 [124] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:02:42,776 [124] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:02:42,780 [124] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:02:42,782 [124] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:02:42,785 [124] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:02:42,803 [124] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:02:42,825 [124] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:02:42,828 [124] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 21.9611ms.
2020-06-08 09:02:42,830 [124] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:02:42,833 [124] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 48.1869ms
2020-06-08 09:02:42,836 [124] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 75.1851ms 200 application/json; charset=utf-8
2020-06-08 09:03:12,744 [132] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:03:12,755 [132] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:03:12,762 [132] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 13.7256ms 204 
2020-06-08 09:03:12,765 [133] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:03:12,769 [133] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:03:12,780 [133] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:03:12,782 [133] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:03:12,785 [133] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:03:12,825 [133] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:03:12,849 [133] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:03:12,850 [133] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23.1148ms.
2020-06-08 09:03:12,852 [133] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:03:12,854 [133] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 70.0663ms
2020-06-08 09:03:12,857 [133] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 93.4203ms 200 application/json; charset=utf-8
2020-06-08 09:03:42,744 [127] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:03:42,754 [127] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:03:42,758 [127] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 12.8464ms 204 
2020-06-08 09:03:42,772 [124] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:03:42,777 [124] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:03:42,780 [124] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:03:42,784 [124] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:03:42,787 [124] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:03:42,805 [124] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:03:42,828 [124] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:03:42,830 [124] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.6929ms.
2020-06-08 09:03:42,832 [124] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:03:42,834 [124] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 47.4922ms
2020-06-08 09:03:42,836 [124] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 64.3353ms 200 application/json; charset=utf-8
2020-06-08 09:04:12,744 [124] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:04:12,755 [124] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:04:12,760 [124] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 12.5316ms 204 
2020-06-08 09:04:12,775 [124] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:04:12,779 [124] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:04:12,782 [124] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:04:12,785 [124] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:04:12,787 [124] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:04:12,804 [124] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:04:12,828 [124] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:04:12,831 [124] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23.8657ms.
2020-06-08 09:04:12,833 [124] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:04:12,836 [124] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 49.109ms
2020-06-08 09:04:12,839 [124] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 65.6136ms 200 application/json; charset=utf-8
2020-06-08 09:04:43,737 [124] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:04:43,760 [124] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:04:43,762 [124] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 33.8552ms 204 
2020-06-08 09:04:43,765 [124] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:04:43,768 [124] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:04:43,771 [124] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:04:43,773 [124] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:04:43,776 [124] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:04:43,794 [124] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:04:43,817 [124] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:04:43,819 [124] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.1437ms.
2020-06-08 09:04:43,820 [124] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:04:43,822 [124] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 47.2771ms
2020-06-08 09:04:43,826 [124] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 59.8102ms 200 application/json; charset=utf-8
2020-06-08 09:05:13,740 [124] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:05:13,750 [124] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:05:13,752 [124] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 19.1638ms 204 
2020-06-08 09:05:13,756 [141] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:05:13,759 [141] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:05:13,770 [141] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:05:13,772 [141] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:05:13,775 [141] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:05:13,794 [141] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:05:13,816 [141] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:05:13,818 [141] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 21.8213ms.
2020-06-08 09:05:13,820 [141] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:05:13,823 [141] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 47.9589ms
2020-06-08 09:05:13,825 [141] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 69.5877ms 200 application/json; charset=utf-8
2020-06-08 09:05:43,728 [140] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:05:43,737 [140] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:05:43,747 [140] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 12.5946ms 204 
2020-06-08 09:05:43,749 [141] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:05:43,752 [141] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:05:43,755 [141] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:05:43,764 [141] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:05:43,766 [141] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:05:43,785 [141] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:05:43,808 [141] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:05:43,812 [141] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23.5934ms.
2020-06-08 09:05:43,815 [141] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:05:43,824 [141] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 52.9857ms
2020-06-08 09:05:43,834 [141] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 77.653ms 200 application/json; charset=utf-8
2020-06-08 09:06:13,726 [141] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:06:13,734 [141] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:06:13,744 [141] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 10.3015ms 204 
2020-06-08 09:06:13,746 [140] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:06:13,748 [140] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:06:13,750 [140] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:06:13,752 [140] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:06:13,756 [140] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:06:13,775 [140] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:06:13,797 [140] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:06:13,799 [140] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.2935ms.
2020-06-08 09:06:13,801 [140] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:06:13,823 [140] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 48.2592ms
2020-06-08 09:06:13,832 [140] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 86.0559ms 200 application/json; charset=utf-8
2020-06-08 09:06:38,376 [145] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-06-08 09:06:38,377 [139] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-06-08 09:06:38,394 [145] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:06:38,395 [139] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:06:38,398 [145] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 21.9097ms 204 
2020-06-08 09:06:38,401 [139] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 22.8813ms 204 
2020-06-08 09:06:38,403 [141] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-06-08 09:06:38,413 [133] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 170
2020-06-08 09:06:38,414 [141] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:06:38,417 [133] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:06:38,418 [141] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:06:38,420 [133] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:06:38,423 [141] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-06-08 09:06:38,424 [133] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 09:06:38,427 [141] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:06:38,429 [133] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:06:38,462 [141] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 09:06:38,463 [133] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 09:06:38,484 [141] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-06-08 09:06:38,505 [141] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-06-08 09:06:38,524 [141] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 59.0478ms.
2020-06-08 09:06:38,526 [133] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-08 09:06:38,527 [141] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:06:38,546 [141] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 102.8063ms
2020-06-08 09:06:38,549 [141] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 145.5836ms 200 application/json; charset=utf-8
2020-06-08 09:06:38,550 [133] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-08 09:06:38,553 [133] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 86.8795ms.
2020-06-08 09:06:38,556 [133] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:06:38,558 [133] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 131.3577ms
2020-06-08 09:06:38,560 [133] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 147.6696ms 200 application/json; charset=utf-8
2020-06-08 09:06:38,594 [133] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-08 09:06:38,596 [133] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:06:38,598 [133] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 4.3079ms 204 
2020-06-08 09:06:38,602 [133] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 170
2020-06-08 09:06:38,605 [133] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:06:38,607 [133] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:06:38,609 [133] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 09:06:38,611 [133] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:06:38,646 [133] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-08 09:06:38,667 [133] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (18ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL) AND ([x].[qty] = 0.0)
2020-06-08 09:06:38,688 [133] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (18ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 09:06:38,709 [133] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (18ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 09:06:38,711 [133] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 62.6854ms.
2020-06-08 09:06:38,712 [133] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:06:38,714 [133] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 103.2405ms
2020-06-08 09:06:38,717 [133] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 115.0859ms 200 application/json; charset=utf-8
2020-06-08 09:06:43,729 [133] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:06:43,731 [133] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:06:43,733 [133] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 4.153ms 204 
2020-06-08 09:06:43,737 [145] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:06:43,740 [145] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:06:43,743 [145] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:06:43,746 [145] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:06:43,750 [145] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:06:43,770 [145] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:06:43,792 [145] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:06:43,795 [145] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.16ms.
2020-06-08 09:06:43,797 [145] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:06:43,799 [145] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 50.443ms
2020-06-08 09:06:43,802 [145] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 66.1728ms 200 application/json; charset=utf-8
2020-06-08 09:07:00,402 [139] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-06-08 09:07:00,405 [145] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-06-08 09:07:00,422 [139] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:07:00,423 [145] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:07:00,427 [139] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 23.7939ms 204 
2020-06-08 09:07:00,434 [145] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 24.728ms 204 
2020-06-08 09:07:00,437 [139] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-06-08 09:07:00,439 [145] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 170
2020-06-08 09:07:00,441 [139] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:07:00,443 [145] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:07:00,445 [139] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:07:00,446 [145] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:07:00,448 [139] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-06-08 09:07:00,450 [145] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 09:07:00,452 [139] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:07:00,454 [145] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:07:00,486 [139] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 09:07:00,487 [145] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 09:07:00,524 [139] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (35ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-06-08 09:07:00,526 [145] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (36ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-08 09:07:00,563 [139] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-06-08 09:07:00,565 [139] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 76.0525ms.
2020-06-08 09:07:00,566 [145] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-08 09:07:00,568 [139] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:07:00,570 [145] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 80.1706ms.
2020-06-08 09:07:00,573 [145] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:07:00,574 [139] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 120.7545ms
2020-06-08 09:07:00,577 [145] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 124.2283ms
2020-06-08 09:07:00,578 [139] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 140.2732ms 200 application/json; charset=utf-8
2020-06-08 09:07:00,580 [145] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 141.4317ms 200 application/json; charset=utf-8
2020-06-08 09:07:00,612 [139] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-08 09:07:00,614 [139] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:07:00,617 [139] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 3.8825ms 204 
2020-06-08 09:07:00,619 [133] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 170
2020-06-08 09:07:00,622 [133] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:07:00,625 [133] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:07:00,628 [133] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 09:07:00,631 [133] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:07:00,647 [133] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-08 09:07:00,669 [133] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL) AND ([x].[qty] = 0.0)
2020-06-08 09:07:00,689 [133] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (18ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 09:07:00,712 [133] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 09:07:00,715 [133] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 64.8901ms.
2020-06-08 09:07:00,718 [133] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:07:00,721 [133] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 90.1634ms
2020-06-08 09:07:00,725 [133] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 104.0135ms 200 application/json; charset=utf-8
2020-06-08 09:07:12,255 [139] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v1/account/profile  
2020-06-08 09:07:12,260 [139] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:07:12,266 [139] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 7.7621ms 204 
2020-06-08 09:07:12,270 [139] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v1/account/profile  
2020-06-08 09:07:12,272 [139] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:07:12,276 [139] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:07:12,279 [139] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Profile() on controller DncZeus.Api.Controllers.AccountController (DncZeus.Api).
2020-06-08 09:07:12,281 [139] INFO  Microsoft.AspNetCore.Authorization.DefaultAuthorizationService [(null)]  - Authorization was successful.
2020-06-08 09:07:12,286 [139] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:07:12,323 [139] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) - Validation state: Valid
2020-06-08 09:07:12,360 [145] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (32ms) [Parameters=[@__Parse_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[ID], [x].[Code], [x].[Name], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser]
FROM [MisOrganization] AS [x]
WHERE [x].[ID] = @__Parse_0
2020-06-08 09:07:12,403 [140] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (34ms) [Parameters=[@__guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[EmpName], [x].[EmpNo], [x].[code], [x].[credate], [x].[creuser], [x].[depname], [x].[depno], [x].[email], [x].[enabled], [x].[jobname], [x].[jobno], [x].[moddate], [x].[moduser], [x].[pwd], [x].[telno], [x].[userLogo], [x].[username], [x].[userno], [x].[utype], [x].[wxAccount], [x].[wxId], [x].[wxMail], [x].[wxName], [x].[wxPhone], [x].[wxPwd]
FROM [Secuser] AS [x]
WHERE [x].[Guid] = @__guid_0
2020-06-08 09:07:12,445 [139] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (29ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[Alias], [x].[BeforeCloseFun], [x].[Component], [x].[CreatedByUserGuid], [x].[CreatedByUserName], [x].[CreatedOn], [x].[Description], [x].[HideInMenu], [x].[Icon], [x].[IsDefaultRouter], [x].[IsDeleted], [x].[Level], [x].[ModifiedByUserGuid], [x].[ModifiedByUserName], [x].[ModifiedOn], [x].[Name], [x].[NotCache], [x].[ParentGuid], [x].[ParentName], [x].[Sort], [x].[Status], [x].[Url]
FROM [DncMenu] AS [x]
WHERE ([x].[IsDeleted] = 0) AND ([x].[Status] = 1)
2020-06-08 09:07:12,478 [139] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (29ms) [Parameters=[@__user_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secuprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE [x].[userid] = @__user_Guid_0
ORDER BY [b0].[prgno]
2020-06-08 09:07:12,515 [139] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (34ms) [Parameters=[@__groupid_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secgprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE CONVERT(VARCHAR(36), [x].[groupid]) = @__groupid_0
ORDER BY [b0].[prgno]
2020-06-08 09:07:12,519 [139] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 192.3264ms.
2020-06-08 09:07:12,521 [139] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 09:07:12,524 [139] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) in 242.3396ms
2020-06-08 09:07:12,527 [139] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 257.3706ms 200 application/json; charset=utf-8
2020-06-08 09:07:12,536 [139] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-08 09:07:12,539 [139] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:07:12,542 [139] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 6.7846ms 204 
2020-06-08 09:07:12,546 [139] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-08 09:07:12,549 [139] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:07:12,553 [139] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:07:12,557 [139] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "LoadMenuTree", controller = "Uprg"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult LoadMenuTree() on controller DncZeus.Api.Controllers.Api.Sec.UprgController (DncZeus.Api).
2020-06-08 09:07:12,559 [139] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:07:12,580 [139] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) - Validation state: Valid
2020-06-08 09:07:12,604 [139] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[icon], [p].[sysname], [p].[sysno], [p].[sysorder]
FROM [Secsys] AS [p]
ORDER BY [p].[sysorder]
2020-06-08 09:07:12,629 [139] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[funname], [p].[funno], [p].[funorder], [p].[icon], [p].[sysid]
FROM [Secfun] AS [p]
ORDER BY [p].[funorder]
2020-06-08 09:07:12,666 [139] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (31ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[enabled], [x].[funid], [x].[icon], [x].[mainid], [x].[prgcomp], [x].[prgname], [x].[prgno], [x].[prgorder], [x].[prgtype], [x].[program], [x].[runtype], [x].[sysid]
FROM [Secprg] AS [x]
WHERE [x].[enabled] = 'Y'
ORDER BY [x].[prgorder]
2020-06-08 09:07:12,693 [139] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[butid], [p].[butname], [p].[butno], [p].[butorder], [p].[funid], [p].[prgid], [p].[sysid]
FROM [Secprgbut] AS [p]
ORDER BY [p].[butorder]
2020-06-08 09:07:12,696 [139] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 114.1087ms.
2020-06-08 09:07:12,698 [139] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 09:07:12,702 [139] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) in 141.5672ms
2020-06-08 09:07:12,705 [139] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 158.196ms 200 application/json; charset=utf-8
2020-06-08 09:07:13,236 [139] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/Upload/img/20200627040310.png  
2020-06-08 09:07:13,239 [139] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 2.8857ms 404 
2020-06-08 09:07:13,261 [139] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-06-08 09:07:13,262 [145] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:07:13,288 [150] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-06-08 09:07:13,290 [139] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:07:13,292 [145] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:07:13,294 [150] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:07:13,296 [139] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 35.7692ms 204 
2020-06-08 09:07:13,308 [145] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 38.2462ms 204 
2020-06-08 09:07:13,310 [150] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 35.6905ms 204 
2020-06-08 09:07:13,314 [133] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 170
2020-06-08 09:07:13,335 [147] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-06-08 09:07:13,344 [150] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:07:13,346 [133] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:07:13,350 [147] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:07:13,354 [150] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:07:13,364 [133] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:07:13,367 [147] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:07:13,371 [150] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:07:13,376 [133] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 09:07:13,377 [147] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-06-08 09:07:13,380 [150] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:07:13,383 [133] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:07:13,386 [150] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:07:13,388 [147] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:07:13,425 [150] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:07:13,427 [133] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 09:07:13,469 [147] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 09:07:13,489 [150] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (39ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:07:13,491 [133] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-08 09:07:13,493 [150] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 63.2544ms.
2020-06-08 09:07:13,514 [150] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:07:13,533 [133] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (38ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-08 09:07:13,538 [147] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-06-08 09:07:13,536 [150] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 149.3378ms
2020-06-08 09:07:13,540 [133] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 91.5639ms.
2020-06-08 09:07:13,562 [150] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 229.2951ms 200 application/json; charset=utf-8
2020-06-08 09:07:13,563 [133] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:07:13,565 [147] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-06-08 09:07:13,575 [133] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 187.3851ms
2020-06-08 09:07:13,580 [147] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 88.5796ms.
2020-06-08 09:07:13,581 [133] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 267.2646ms 200 application/json; charset=utf-8
2020-06-08 09:07:13,583 [147] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:07:13,587 [147] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 201.6023ms
2020-06-08 09:07:13,591 [147] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 274.8487ms 200 application/json; charset=utf-8
2020-06-08 09:07:13,601 [133] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-08 09:07:13,605 [133] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:07:13,608 [133] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 6.3618ms 204 
2020-06-08 09:07:13,611 [140] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 170
2020-06-08 09:07:13,615 [140] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:07:13,617 [140] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:07:13,620 [140] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 09:07:13,623 [140] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:07:13,642 [140] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-08 09:07:13,664 [140] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL) AND ([x].[qty] = 0.0)
2020-06-08 09:07:13,685 [140] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (18ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 09:07:13,709 [140] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 09:07:13,711 [140] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 67.0728ms.
2020-06-08 09:07:13,714 [140] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:07:13,717 [140] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 93.7938ms
2020-06-08 09:07:13,722 [140] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 108.1098ms 200 application/json; charset=utf-8
2020-06-08 09:07:15,042 [133] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8  
2020-06-08 09:07:15,051 [139] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8  
2020-06-08 09:07:15,056 [140] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workprocess/list?api-version=8  
2020-06-08 09:07:15,062 [133] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:07:15,059 [139] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:07:15,065 [140] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:07:15,071 [133] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 26.2914ms 204 
2020-06-08 09:07:15,074 [139] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 29.2034ms 204 
2020-06-08 09:07:15,077 [140] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 23.2274ms 204 
2020-06-08 09:07:15,080 [133] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8 application/json;charset=UTF-8 131
2020-06-08 09:07:15,083 [139] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 139
2020-06-08 09:07:15,087 [140] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workprocess/list?api-version=8 application/json;charset=UTF-8 150
2020-06-08 09:07:15,090 [133] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:07:15,092 [139] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:07:15,095 [133] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:07:15,097 [139] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:07:15,098 [140] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:07:15,100 [133] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkDate", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkDate(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-08 09:07:15,103 [139] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-08 09:07:15,106 [140] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:07:15,108 [133] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:07:15,110 [139] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:07:15,111 [140] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workprocess"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workprocess.WorkprocessRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkprocessController (DncZeus.Api).
2020-06-08 09:07:15,144 [133] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) - Validation state: Valid
2020-06-08 09:07:15,145 [139] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-06-08 09:07:15,147 [140] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:07:15,188 [139] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (38ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty',isnull(h.targetOut ,0) as 'targetOut',isnull(h.realityOut,0) as 'realityOut',isnull(h.sumTime,0) as 'sumTime',isnull(h.status,0) as 'status'
from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=a.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=a.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=a.factoryGuid)
left join (
select sum(outline.output) as 'todayDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.factoryGuid
) as g on(g.factoryGuid=a.factoryGuid)
left join (
	select aa.targetOut,aa.realityOut,aa.sumTime,aa.factoryGuid,aa.status from ManFactoryWorkout aa where wrokDate=@p3 and factoryGuid=@p0
) as h on(h.factoryGuid=a.factoryGuid)
2020-06-08 09:07:15,210 [133] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__payload_workDate_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[cadre], [x].[cadreLeave], [x].[cadreRest], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[logistic], [x].[logisticLeave], [x].[logisticRest], [x].[moddate], [x].[moduser], [x].[workDate], [x].[worker], [x].[workerLeave], [x].[workerRest]
FROM [ManFactoryWorkdate] AS [x]
WHERE ([x].[factoryGuid] = @__payload_factoryGuid_0) AND ([x].[workDate] = @__payload_workDate_1)
2020-06-08 09:07:15,212 [140] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 09:07:15,215 [139] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 63.2255ms.
2020-06-08 09:07:15,218 [133] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 68.9086ms.
2020-06-08 09:07:15,224 [139] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:07:15,226 [133] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 09:07:15,231 [139] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 119.7167ms
2020-06-08 09:07:15,259 [139] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 171.404ms 200 application/json; charset=utf-8
2020-06-08 09:07:15,268 [133] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) in 153.1276ms
2020-06-08 09:07:15,271 [140] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (27ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[factoryGuid], [t].[workCode], [t].[workName], [t].[rate], [t].[isvalid], [t].[credate], [t].[creuser], [t].[moddate], [t].[moduser], [t].[factoryName]
FROM (
    SELECT [a].[Guid], [a].[OrgID], [a].[factoryGuid], [a].[workCode], [a].[workName], [a].[rate], [a].[isvalid], [a].[credate], [a].[creuser], [a].[moddate], [a].[moduser], [b].[name] AS [factoryName], ROW_NUMBER() OVER(ORDER BY [a].[factoryGuid], [a].[workCode]) AS [__RowNumber__]
    FROM [ManWorkProcess] AS [a]
    INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
    WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-08 09:07:15,278 [133] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 193.2169ms 200 application/json; charset=utf-8
2020-06-08 09:07:15,307 [140] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (32ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkProcess] AS [a]
INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
2020-06-08 09:07:15,311 [140] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 88.2688ms.
2020-06-08 09:07:15,314 [140] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:07:15,317 [140] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) in 201.7223ms
2020-06-08 09:07:15,321 [140] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 237.4163ms 200 application/json; charset=utf-8
2020-06-08 09:07:43,162 [154] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:07:43,171 [154] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:07:43,173 [154] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 12.5462ms 204 
2020-06-08 09:07:43,177 [139] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:07:43,187 [139] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:07:43,189 [139] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:07:43,192 [139] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:07:43,194 [139] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:07:43,213 [139] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:07:43,239 [139] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:07:43,242 [139] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 26.2272ms.
2020-06-08 09:07:43,244 [139] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:07:43,247 [139] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 52.5676ms
2020-06-08 09:07:43,250 [139] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 72.2598ms 200 application/json; charset=utf-8
2020-06-08 09:08:13,160 [133] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:08:13,162 [133] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:08:13,171 [133] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 11.2533ms 204 
2020-06-08 09:08:13,184 [133] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:08:13,186 [133] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:08:13,189 [133] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:08:13,192 [133] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:08:13,194 [133] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:08:13,213 [133] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:08:13,236 [133] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:08:13,238 [133] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23.3024ms.
2020-06-08 09:08:13,240 [133] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:08:13,242 [133] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 48.4159ms
2020-06-08 09:08:13,245 [133] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 61.3839ms 200 application/json; charset=utf-8
2020-06-08 09:08:43,162 [139] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:08:43,171 [139] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:08:43,180 [139] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 11.5235ms 204 
2020-06-08 09:08:43,184 [152] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:08:43,187 [152] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:08:43,190 [152] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:08:43,193 [152] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:08:43,195 [152] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:08:43,214 [152] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:08:43,250 [152] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (29ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:08:43,253 [152] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 35.5831ms.
2020-06-08 09:08:43,255 [152] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:08:43,258 [152] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 62.8707ms
2020-06-08 09:08:43,260 [152] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 78.1117ms 200 application/json; charset=utf-8
2020-06-08 09:09:13,163 [154] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:09:13,173 [154] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:09:13,175 [154] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 11.9384ms 204 
2020-06-08 09:09:13,187 [154] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:09:13,196 [154] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:09:13,199 [154] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:09:13,201 [154] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:09:13,204 [154] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:09:13,225 [154] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:09:13,251 [154] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:09:13,253 [154] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 25.4439ms.
2020-06-08 09:09:13,255 [154] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:09:13,262 [154] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 55.1672ms
2020-06-08 09:09:13,269 [154] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 78.0128ms 200 application/json; charset=utf-8
2020-06-08 09:09:43,161 [139] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:09:43,172 [139] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:09:43,175 [139] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 14.2466ms 204 
2020-06-08 09:09:43,187 [153] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:09:43,189 [153] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:09:43,192 [153] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:09:43,194 [153] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:09:43,199 [153] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:09:43,218 [153] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:09:43,242 [153] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:09:43,244 [153] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23.525ms.
2020-06-08 09:09:43,247 [153] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:09:43,250 [153] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 52.7578ms
2020-06-08 09:09:43,253 [153] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 74.0913ms 200 application/json; charset=utf-8
2020-06-08 09:10:13,165 [153] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:10:13,177 [153] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:10:13,181 [153] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 16.938ms 204 
2020-06-08 09:10:13,195 [139] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:10:13,199 [139] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:10:13,208 [139] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:10:13,210 [139] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:10:13,213 [139] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:10:13,232 [139] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:10:13,254 [139] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:10:13,257 [139] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 21.9066ms.
2020-06-08 09:10:13,258 [139] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:10:13,261 [139] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 48.7218ms
2020-06-08 09:10:13,264 [139] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 68.3027ms 200 application/json; charset=utf-8
2020-06-08 09:10:43,161 [153] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:10:43,171 [153] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:10:43,180 [153] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 12.3552ms 204 
2020-06-08 09:10:43,182 [50] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:10:43,185 [50] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:10:43,188 [50] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:10:43,190 [50] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:10:43,193 [50] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:10:43,210 [50] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:10:43,233 [50] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:10:43,235 [50] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.4896ms.
2020-06-08 09:10:43,237 [50] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:10:43,239 [50] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 47.1848ms
2020-06-08 09:10:43,242 [50] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 59.7492ms 200 application/json; charset=utf-8
2020-06-08 09:11:13,162 [50] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:11:13,172 [50] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:11:13,183 [50] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 14.3497ms 204 
2020-06-08 09:11:13,185 [161] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:11:13,188 [161] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:11:13,190 [161] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:11:13,192 [161] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:11:13,196 [161] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:11:13,215 [161] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:11:13,239 [161] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:11:13,241 [161] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 24.8522ms.
2020-06-08 09:11:13,243 [161] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:11:13,247 [161] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 51.449ms
2020-06-08 09:11:13,249 [161] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 64.1216ms 200 application/json; charset=utf-8
2020-06-08 09:11:43,162 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:11:43,173 [164] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:11:43,184 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 14.4979ms 204 
2020-06-08 09:11:43,185 [46] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:11:43,188 [46] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:11:43,191 [46] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:11:43,194 [46] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:11:43,198 [46] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:11:43,218 [46] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:11:43,243 [46] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:11:43,246 [46] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 24.9867ms.
2020-06-08 09:11:43,248 [46] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:11:43,251 [46] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 54.766ms
2020-06-08 09:11:43,255 [46] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 68.3627ms 200 application/json; charset=utf-8
2020-06-08 09:11:55,104 [46] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-06-08 09:11:55,109 [153] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-06-08 09:11:55,121 [46] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:11:55,142 [153] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:11:55,150 [46] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 22.699ms 204 
2020-06-08 09:11:55,153 [153] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 39.8496ms 204 
2020-06-08 09:11:55,156 [44] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-06-08 09:11:55,173 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 170
2020-06-08 09:11:55,181 [44] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:11:55,183 [164] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:11:55,186 [44] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:11:55,188 [164] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:11:55,190 [44] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-06-08 09:11:55,192 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 09:11:55,195 [44] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:11:55,198 [164] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:11:55,216 [44] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 09:11:55,233 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 09:11:55,254 [44] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-06-08 09:11:55,291 [44] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (34ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-06-08 09:11:55,294 [44] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 74.3877ms.
2020-06-08 09:11:55,298 [164] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-08 09:11:55,299 [44] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:11:55,321 [44] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 127.9019ms
2020-06-08 09:11:55,327 [44] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 170.7775ms 200 application/json; charset=utf-8
2020-06-08 09:11:55,329 [164] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-08 09:11:55,334 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 80.9315ms.
2020-06-08 09:11:55,336 [164] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:11:55,339 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 142.7749ms
2020-06-08 09:11:55,342 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 174.6593ms 200 application/json; charset=utf-8
2020-06-08 09:11:55,367 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-08 09:11:55,369 [164] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:11:55,372 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 4.2737ms 204 
2020-06-08 09:11:55,379 [153] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 170
2020-06-08 09:11:55,382 [153] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:11:55,384 [153] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:11:55,386 [153] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 09:11:55,388 [153] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:11:55,407 [153] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-08 09:11:55,432 [153] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL) AND ([x].[qty] = 0.0)
2020-06-08 09:11:55,454 [153] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 09:11:55,474 [153] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (18ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 09:11:55,477 [153] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 66.72ms.
2020-06-08 09:11:55,479 [153] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:11:55,482 [153] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 93.6038ms
2020-06-08 09:11:55,485 [153] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 109.8783ms 200 application/json; charset=utf-8
2020-06-08 09:11:57,199 [46] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v1/account/profile  
2020-06-08 09:11:57,201 [46] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:11:57,205 [46] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 4.7575ms 204 
2020-06-08 09:11:57,208 [46] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v1/account/profile  
2020-06-08 09:11:57,210 [46] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:11:57,212 [46] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:11:57,214 [46] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Profile() on controller DncZeus.Api.Controllers.AccountController (DncZeus.Api).
2020-06-08 09:11:57,216 [46] INFO  Microsoft.AspNetCore.Authorization.DefaultAuthorizationService [(null)]  - Authorization was successful.
2020-06-08 09:11:57,219 [46] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:11:57,237 [46] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) - Validation state: Valid
2020-06-08 09:11:57,281 [164] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (38ms) [Parameters=[@__Parse_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[ID], [x].[Code], [x].[Name], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser]
FROM [MisOrganization] AS [x]
WHERE [x].[ID] = @__Parse_0
2020-06-08 09:11:57,321 [45] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (37ms) [Parameters=[@__guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[EmpName], [x].[EmpNo], [x].[code], [x].[credate], [x].[creuser], [x].[depname], [x].[depno], [x].[email], [x].[enabled], [x].[jobname], [x].[jobno], [x].[moddate], [x].[moduser], [x].[pwd], [x].[telno], [x].[userLogo], [x].[username], [x].[userno], [x].[utype], [x].[wxAccount], [x].[wxId], [x].[wxMail], [x].[wxName], [x].[wxPhone], [x].[wxPwd]
FROM [Secuser] AS [x]
WHERE [x].[Guid] = @__guid_0
2020-06-08 09:11:57,349 [46] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[Alias], [x].[BeforeCloseFun], [x].[Component], [x].[CreatedByUserGuid], [x].[CreatedByUserName], [x].[CreatedOn], [x].[Description], [x].[HideInMenu], [x].[Icon], [x].[IsDefaultRouter], [x].[IsDeleted], [x].[Level], [x].[ModifiedByUserGuid], [x].[ModifiedByUserName], [x].[ModifiedOn], [x].[Name], [x].[NotCache], [x].[ParentGuid], [x].[ParentName], [x].[Sort], [x].[Status], [x].[Url]
FROM [DncMenu] AS [x]
WHERE ([x].[IsDeleted] = 0) AND ([x].[Status] = 1)
2020-06-08 09:11:57,379 [46] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__user_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secuprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE [x].[userid] = @__user_Guid_0
ORDER BY [b0].[prgno]
2020-06-08 09:11:57,414 [46] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (26ms) [Parameters=[@__groupid_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secgprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE CONVERT(VARCHAR(36), [x].[groupid]) = @__groupid_0
ORDER BY [b0].[prgno]
2020-06-08 09:11:57,421 [46] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 178.0251ms.
2020-06-08 09:11:57,424 [46] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 09:11:57,428 [46] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) in 210.082ms
2020-06-08 09:11:57,430 [46] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 222.7518ms 200 application/json; charset=utf-8
2020-06-08 09:11:57,436 [153] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-08 09:11:57,439 [153] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:11:57,441 [153] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 4.5188ms 204 
2020-06-08 09:11:57,447 [46] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-08 09:11:57,449 [46] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:11:57,451 [46] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:11:57,454 [46] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "LoadMenuTree", controller = "Uprg"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult LoadMenuTree() on controller DncZeus.Api.Controllers.Api.Sec.UprgController (DncZeus.Api).
2020-06-08 09:11:57,457 [46] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:11:57,483 [46] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) - Validation state: Valid
2020-06-08 09:11:57,517 [46] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (31ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[icon], [p].[sysname], [p].[sysno], [p].[sysorder]
FROM [Secsys] AS [p]
ORDER BY [p].[sysorder]
2020-06-08 09:11:57,576 [46] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (55ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[funname], [p].[funno], [p].[funorder], [p].[icon], [p].[sysid]
FROM [Secfun] AS [p]
ORDER BY [p].[funorder]
2020-06-08 09:11:57,606 [46] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (27ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[enabled], [x].[funid], [x].[icon], [x].[mainid], [x].[prgcomp], [x].[prgname], [x].[prgno], [x].[prgorder], [x].[prgtype], [x].[program], [x].[runtype], [x].[sysid]
FROM [Secprg] AS [x]
WHERE [x].[enabled] = 'Y'
ORDER BY [x].[prgorder]
2020-06-08 09:11:57,631 [46] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[butid], [p].[butname], [p].[butno], [p].[butorder], [p].[funid], [p].[prgid], [p].[sysid]
FROM [Secprgbut] AS [p]
ORDER BY [p].[butorder]
2020-06-08 09:11:57,634 [46] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 148.2593ms.
2020-06-08 09:11:57,636 [46] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 09:11:57,640 [46] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) in 183.0254ms
2020-06-08 09:11:57,647 [46] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 196.9068ms 200 application/json; charset=utf-8
2020-06-08 09:11:58,194 [46] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/Upload/img/20200627040310.png  
2020-06-08 09:11:58,198 [46] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 3.5841ms 404 
2020-06-08 09:11:58,221 [46] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-06-08 09:11:58,227 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:11:58,235 [45] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 170
2020-06-08 09:11:58,241 [164] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:11:58,248 [46] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:11:58,253 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 26.6807ms 204 
2020-06-08 09:11:58,254 [46] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:11:58,256 [45] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:11:58,260 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:11:58,264 [46] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-06-08 09:11:58,266 [45] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:11:58,269 [164] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:11:58,274 [46] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:11:58,278 [164] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:11:58,294 [45] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 09:11:58,305 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:11:58,325 [45] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:11:58,328 [46] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 09:11:58,364 [164] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:11:58,366 [45] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 09:11:58,392 [46] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (37ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-06-08 09:11:58,412 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:11:58,432 [45] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (40ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-08 09:11:58,433 [46] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-06-08 09:11:58,453 [46] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 105.9824ms.
2020-06-08 09:11:58,455 [46] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:11:58,456 [45] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-08 09:11:58,458 [46] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 191.5792ms
2020-06-08 09:11:58,462 [45] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 92.2571ms.
2020-06-08 09:11:58,482 [46] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 263.197ms 200 application/json; charset=utf-8
2020-06-08 09:11:58,484 [164] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:11:58,486 [45] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:11:58,490 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 75.4959ms.
2020-06-08 09:11:58,494 [45] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 191.1202ms
2020-06-08 09:11:58,496 [164] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:11:58,498 [45] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 275.5549ms 200 application/json; charset=utf-8
2020-06-08 09:11:58,500 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 170.3833ms
2020-06-08 09:11:58,504 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 244.0355ms 200 application/json; charset=utf-8
2020-06-08 09:11:58,536 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 170
2020-06-08 09:11:58,539 [164] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:11:58,540 [164] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:11:58,542 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 09:11:58,545 [164] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:11:58,564 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-08 09:11:58,586 [164] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL) AND ([x].[qty] = 0.0)
2020-06-08 09:11:58,608 [164] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 09:11:58,632 [164] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 09:11:58,634 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 68.1006ms.
2020-06-08 09:11:58,636 [164] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:11:58,638 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 93.1266ms
2020-06-08 09:11:58,640 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 103.913ms 200 application/json; charset=utf-8
2020-06-08 09:12:25,329 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8  
2020-06-08 09:12:25,332 [44] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workprocess/list?api-version=8  
2020-06-08 09:12:25,353 [164] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:12:25,354 [44] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:12:25,369 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 28.8162ms 204 
2020-06-08 09:12:25,382 [44] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 26.762ms 204 
2020-06-08 09:12:25,384 [40] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8 application/json;charset=UTF-8 131
2020-06-08 09:12:25,388 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workprocess/list?api-version=8 application/json;charset=UTF-8 150
2020-06-08 09:12:25,392 [40] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:12:25,395 [40] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:12:25,398 [164] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:12:25,400 [40] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkDate", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkDate(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-08 09:12:25,402 [164] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:12:25,405 [40] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:12:25,406 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workprocess"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workprocess.WorkprocessRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkprocessController (DncZeus.Api).
2020-06-08 09:12:25,448 [164] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:12:25,449 [40] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) - Validation state: Valid
2020-06-08 09:12:25,468 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 09:12:25,503 [40] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__payload_workDate_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[cadre], [x].[cadreLeave], [x].[cadreRest], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[logistic], [x].[logisticLeave], [x].[logisticRest], [x].[moddate], [x].[moduser], [x].[workDate], [x].[worker], [x].[workerLeave], [x].[workerRest]
FROM [ManFactoryWorkdate] AS [x]
WHERE ([x].[factoryGuid] = @__payload_factoryGuid_0) AND ([x].[workDate] = @__payload_workDate_1)
2020-06-08 09:12:25,505 [40] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 53.9194ms.
2020-06-08 09:12:25,507 [164] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[factoryGuid], [t].[workCode], [t].[workName], [t].[rate], [t].[isvalid], [t].[credate], [t].[creuser], [t].[moddate], [t].[moduser], [t].[factoryName]
FROM (
    SELECT [a].[Guid], [a].[OrgID], [a].[factoryGuid], [a].[workCode], [a].[workName], [a].[rate], [a].[isvalid], [a].[credate], [a].[creuser], [a].[moddate], [a].[moduser], [b].[name] AS [factoryName], ROW_NUMBER() OVER(ORDER BY [a].[factoryGuid], [a].[workCode]) AS [__RowNumber__]
    FROM [ManWorkProcess] AS [a]
    INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
    WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-08 09:12:25,509 [40] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 09:12:25,530 [40] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) in 108.8182ms
2020-06-08 09:12:25,533 [40] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 163.2651ms 200 application/json; charset=utf-8
2020-06-08 09:12:25,535 [164] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkProcess] AS [a]
INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
2020-06-08 09:12:25,538 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 51.2025ms.
2020-06-08 09:12:25,544 [164] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:12:25,547 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) in 137.7581ms
2020-06-08 09:12:25,550 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 165.0595ms 200 application/json; charset=utf-8
2020-06-08 09:12:25,583 [45] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8  
2020-06-08 09:12:25,586 [45] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:12:25,590 [45] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 4.5218ms 204 
2020-06-08 09:12:25,594 [45] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 139
2020-06-08 09:12:25,597 [45] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:12:25,599 [45] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:12:25,601 [45] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-08 09:12:25,603 [45] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:12:25,622 [45] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-06-08 09:12:25,645 [45] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty',isnull(h.targetOut ,0) as 'targetOut',isnull(h.realityOut,0) as 'realityOut',isnull(h.sumTime,0) as 'sumTime',isnull(h.status,0) as 'status'
from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=a.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=a.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=a.factoryGuid)
left join (
select sum(outline.output) as 'todayDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.factoryGuid
) as g on(g.factoryGuid=a.factoryGuid)
left join (
	select aa.targetOut,aa.realityOut,aa.sumTime,aa.factoryGuid,aa.status from ManFactoryWorkout aa where wrokDate=@p3 and factoryGuid=@p0
) as h on(h.factoryGuid=a.factoryGuid)
2020-06-08 09:12:25,649 [45] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 24.1507ms.
2020-06-08 09:12:25,652 [45] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:12:25,655 [45] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 51.4764ms
2020-06-08 09:12:25,663 [45] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 63.9212ms 200 application/json; charset=utf-8
2020-06-08 09:12:28,096 [32] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:12:28,099 [32] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:12:28,102 [32] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 7.0274ms 204 
2020-06-08 09:12:28,107 [40] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:12:28,112 [40] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:12:28,114 [40] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:12:28,117 [40] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:12:28,119 [40] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:12:28,147 [40] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:12:28,172 [40] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:12:28,174 [40] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 25.197ms.
2020-06-08 09:12:28,178 [40] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:12:28,181 [40] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 61.4099ms
2020-06-08 09:12:28,185 [40] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 77.6243ms 200 application/json; charset=utf-8
2020-06-08 09:12:58,084 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:12:58,095 [164] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:12:58,097 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 13.081ms 204 
2020-06-08 09:12:58,114 [32] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:12:58,117 [32] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:12:58,127 [32] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:12:58,130 [32] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:12:58,132 [32] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:12:58,152 [32] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:12:58,176 [32] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:12:58,179 [32] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 24.5316ms.
2020-06-08 09:12:58,182 [32] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:12:58,184 [32] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 52.2959ms
2020-06-08 09:12:58,188 [32] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 73.2349ms 200 application/json; charset=utf-8
2020-06-08 09:13:21,858 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v1/account/profile  
2020-06-08 09:13:21,869 [164] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:13:21,872 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 14.3914ms 204 
2020-06-08 09:13:21,883 [40] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v1/account/profile  
2020-06-08 09:13:21,886 [40] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:13:21,888 [40] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:13:21,892 [40] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Profile() on controller DncZeus.Api.Controllers.AccountController (DncZeus.Api).
2020-06-08 09:13:21,894 [40] INFO  Microsoft.AspNetCore.Authorization.DefaultAuthorizationService [(null)]  - Authorization was successful.
2020-06-08 09:13:21,896 [40] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:13:21,944 [40] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) - Validation state: Valid
2020-06-08 09:13:21,987 [32] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (37ms) [Parameters=[@__Parse_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[ID], [x].[Code], [x].[Name], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser]
FROM [MisOrganization] AS [x]
WHERE [x].[ID] = @__Parse_0
2020-06-08 09:13:22,020 [164] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (28ms) [Parameters=[@__guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[EmpName], [x].[EmpNo], [x].[code], [x].[credate], [x].[creuser], [x].[depname], [x].[depno], [x].[email], [x].[enabled], [x].[jobname], [x].[jobno], [x].[moddate], [x].[moduser], [x].[pwd], [x].[telno], [x].[userLogo], [x].[username], [x].[userno], [x].[utype], [x].[wxAccount], [x].[wxId], [x].[wxMail], [x].[wxName], [x].[wxPhone], [x].[wxPwd]
FROM [Secuser] AS [x]
WHERE [x].[Guid] = @__guid_0
2020-06-08 09:13:22,054 [40] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[Alias], [x].[BeforeCloseFun], [x].[Component], [x].[CreatedByUserGuid], [x].[CreatedByUserName], [x].[CreatedOn], [x].[Description], [x].[HideInMenu], [x].[Icon], [x].[IsDefaultRouter], [x].[IsDeleted], [x].[Level], [x].[ModifiedByUserGuid], [x].[ModifiedByUserName], [x].[ModifiedOn], [x].[Name], [x].[NotCache], [x].[ParentGuid], [x].[ParentName], [x].[Sort], [x].[Status], [x].[Url]
FROM [DncMenu] AS [x]
WHERE ([x].[IsDeleted] = 0) AND ([x].[Status] = 1)
2020-06-08 09:13:22,086 [40] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (27ms) [Parameters=[@__user_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secuprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE [x].[userid] = @__user_Guid_0
ORDER BY [b0].[prgno]
2020-06-08 09:13:22,128 [40] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (35ms) [Parameters=[@__groupid_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secgprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE CONVERT(VARCHAR(36), [x].[groupid]) = @__groupid_0
ORDER BY [b0].[prgno]
2020-06-08 09:13:22,130 [40] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 183.6804ms.
2020-06-08 09:13:22,133 [40] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 09:13:22,137 [40] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) in 242.0472ms
2020-06-08 09:13:22,143 [40] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 256.4376ms 200 application/json; charset=utf-8
2020-06-08 09:13:22,149 [40] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-08 09:13:22,152 [40] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:13:22,155 [40] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.2158ms 204 
2020-06-08 09:13:22,160 [32] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-08 09:13:22,162 [32] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:13:22,164 [32] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:13:22,167 [32] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "LoadMenuTree", controller = "Uprg"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult LoadMenuTree() on controller DncZeus.Api.Controllers.Api.Sec.UprgController (DncZeus.Api).
2020-06-08 09:13:22,169 [32] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:13:22,188 [32] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) - Validation state: Valid
2020-06-08 09:13:22,213 [32] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[icon], [p].[sysname], [p].[sysno], [p].[sysorder]
FROM [Secsys] AS [p]
ORDER BY [p].[sysorder]
2020-06-08 09:13:22,237 [32] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[funname], [p].[funno], [p].[funorder], [p].[icon], [p].[sysid]
FROM [Secfun] AS [p]
ORDER BY [p].[funorder]
2020-06-08 09:13:22,264 [32] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[enabled], [x].[funid], [x].[icon], [x].[mainid], [x].[prgcomp], [x].[prgname], [x].[prgno], [x].[prgorder], [x].[prgtype], [x].[program], [x].[runtype], [x].[sysid]
FROM [Secprg] AS [x]
WHERE [x].[enabled] = 'Y'
ORDER BY [x].[prgorder]
2020-06-08 09:13:22,291 [32] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[butid], [p].[butname], [p].[butno], [p].[butorder], [p].[funid], [p].[prgid], [p].[sysid]
FROM [Secprgbut] AS [p]
ORDER BY [p].[butorder]
2020-06-08 09:13:22,294 [32] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 103.5795ms.
2020-06-08 09:13:22,296 [32] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 09:13:22,300 [32] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) in 129.7806ms
2020-06-08 09:13:22,302 [32] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 143.0529ms 200 application/json; charset=utf-8
2020-06-08 09:13:22,910 [32] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/Upload/img/20200627040310.png  
2020-06-08 09:13:22,912 [32] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 2.347ms 404 
2020-06-08 09:13:22,933 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-06-08 09:13:22,944 [31] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:13:22,952 [40] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-06-08 09:13:22,958 [31] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:13:22,961 [40] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:13:22,963 [164] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:13:22,999 [40] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 21.8906ms 204 
2020-06-08 09:13:23,028 [31] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 21.8728ms 204 
2020-06-08 09:13:23,042 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 104.1382ms 204 
2020-06-08 09:13:23,071 [31] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:13:23,072 [24] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-06-08 09:13:23,075 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 170
2020-06-08 09:13:23,078 [31] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:13:23,080 [24] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:13:23,082 [31] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:13:23,083 [164] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:13:23,084 [24] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:13:23,086 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:13:23,088 [164] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:13:23,090 [24] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-06-08 09:13:23,092 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 09:13:23,094 [31] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:13:23,097 [24] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:13:23,099 [164] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:13:23,118 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:13:23,147 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 09:13:23,148 [24] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 09:13:23,201 [31] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (35ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:13:23,204 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 82.9823ms.
2020-06-08 09:13:23,205 [24] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (36ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-06-08 09:13:23,228 [164] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (38ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-08 09:13:23,230 [31] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:13:23,251 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 159.946ms
2020-06-08 09:13:23,255 [24] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-06-08 09:13:23,276 [31] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 217.8015ms 200 application/json; charset=utf-8
2020-06-08 09:13:23,278 [24] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 109.8239ms.
2020-06-08 09:13:23,281 [164] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-08 09:13:23,282 [24] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:13:23,284 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 116.6364ms.
2020-06-08 09:13:23,286 [24] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 192.42ms
2020-06-08 09:13:23,295 [164] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:13:23,296 [24] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 245.2411ms 200 application/json; charset=utf-8
2020-06-08 09:13:23,299 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 201.1089ms
2020-06-08 09:13:23,301 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 227.0328ms 200 application/json; charset=utf-8
2020-06-08 09:13:23,337 [32] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-08 09:13:23,339 [32] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:13:23,342 [32] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 4.8884ms 204 
2020-06-08 09:13:23,345 [40] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 170
2020-06-08 09:13:23,354 [40] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:13:23,356 [40] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:13:23,360 [40] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 09:13:23,362 [40] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:13:23,381 [40] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-08 09:13:23,403 [40] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL) AND ([x].[qty] = 0.0)
2020-06-08 09:13:23,426 [40] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 09:13:23,449 [40] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 09:13:23,452 [40] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 68.8118ms.
2020-06-08 09:13:23,454 [40] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:13:23,457 [40] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 93.8424ms
2020-06-08 09:13:23,460 [40] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 114.4796ms 200 application/json; charset=utf-8
2020-06-08 09:13:25,069 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workprocess/list?api-version=8  
2020-06-08 09:13:25,072 [26] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8  
2020-06-08 09:13:25,080 [164] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:13:25,081 [26] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:13:25,087 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 29.4318ms 204 
2020-06-08 09:13:25,090 [26] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 27.5787ms 204 
2020-06-08 09:13:25,093 [32] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workprocess/list?api-version=8 application/json;charset=UTF-8 150
2020-06-08 09:13:25,095 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8 application/json;charset=UTF-8 131
2020-06-08 09:13:25,098 [32] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:13:25,099 [164] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:13:25,101 [32] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:13:25,103 [164] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:13:25,105 [32] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workprocess"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workprocess.WorkprocessRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkprocessController (DncZeus.Api).
2020-06-08 09:13:25,108 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkDate", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkDate(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-08 09:13:25,111 [32] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:13:25,113 [164] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:13:25,147 [32] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 09:13:25,149 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) - Validation state: Valid
2020-06-08 09:13:25,185 [164] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (32ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__payload_workDate_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[cadre], [x].[cadreLeave], [x].[cadreRest], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[logistic], [x].[logisticLeave], [x].[logisticRest], [x].[moddate], [x].[moduser], [x].[workDate], [x].[worker], [x].[workerLeave], [x].[workerRest]
FROM [ManFactoryWorkdate] AS [x]
WHERE ([x].[factoryGuid] = @__payload_factoryGuid_0) AND ([x].[workDate] = @__payload_workDate_1)
2020-06-08 09:13:25,190 [32] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (31ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[factoryGuid], [t].[workCode], [t].[workName], [t].[rate], [t].[isvalid], [t].[credate], [t].[creuser], [t].[moddate], [t].[moduser], [t].[factoryName]
FROM (
    SELECT [a].[Guid], [a].[OrgID], [a].[factoryGuid], [a].[workCode], [a].[workName], [a].[rate], [a].[isvalid], [a].[credate], [a].[creuser], [a].[moddate], [a].[moduser], [b].[name] AS [factoryName], ROW_NUMBER() OVER(ORDER BY [a].[factoryGuid], [a].[workCode]) AS [__RowNumber__]
    FROM [ManWorkProcess] AS [a]
    INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
    WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-08 09:13:25,194 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 41.391ms.
2020-06-08 09:13:25,198 [164] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 09:13:25,220 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) in 107.4578ms
2020-06-08 09:13:25,221 [32] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkProcess] AS [a]
INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
2020-06-08 09:13:25,225 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 128.8214ms 200 application/json; charset=utf-8
2020-06-08 09:13:25,228 [32] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 76.0452ms.
2020-06-08 09:13:25,231 [32] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:13:25,236 [32] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) in 124.235ms
2020-06-08 09:13:25,242 [32] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 150.4234ms 200 application/json; charset=utf-8
2020-06-08 09:13:25,274 [40] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8  
2020-06-08 09:13:25,276 [40] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:13:25,279 [40] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.7706ms 204 
2020-06-08 09:13:25,282 [31] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 139
2020-06-08 09:13:25,284 [31] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:13:25,286 [31] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:13:25,289 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-08 09:13:25,292 [31] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:13:25,313 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-06-08 09:13:25,336 [31] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty',isnull(h.targetOut ,0) as 'targetOut',isnull(h.realityOut,0) as 'realityOut',isnull(h.sumTime,0) as 'sumTime',isnull(h.status,0) as 'status'
from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=a.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=a.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=a.factoryGuid)
left join (
select sum(outline.output) as 'todayDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.factoryGuid
) as g on(g.factoryGuid=a.factoryGuid)
left join (
	select aa.targetOut,aa.realityOut,aa.sumTime,aa.factoryGuid,aa.status from ManFactoryWorkout aa where wrokDate=@p3 and factoryGuid=@p0
) as h on(h.factoryGuid=a.factoryGuid)
2020-06-08 09:13:25,339 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23.2628ms.
2020-06-08 09:13:25,341 [31] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:13:25,345 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 53.6594ms
2020-06-08 09:13:25,349 [31] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 66.1209ms 200 application/json; charset=utf-8
2020-06-08 09:13:53,729 [40] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:13:53,739 [40] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:13:53,741 [40] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 11.7843ms 204 
2020-06-08 09:13:53,745 [23] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:13:53,753 [23] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:13:53,756 [23] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:13:53,758 [23] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:13:53,761 [23] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:13:53,780 [23] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:13:53,801 [23] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:13:53,803 [23] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 21.0957ms.
2020-06-08 09:13:53,805 [23] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:13:53,808 [23] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 47.004ms
2020-06-08 09:13:53,811 [23] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 66.6585ms 200 application/json; charset=utf-8
2020-06-08 09:14:22,826 [40] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:14:22,837 [40] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:14:22,841 [40] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 14.043ms 204 
2020-06-08 09:14:22,851 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:14:22,853 [164] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:14:22,856 [164] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:14:22,859 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:14:22,863 [164] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:14:22,882 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:14:22,906 [164] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:14:22,908 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 24.1586ms.
2020-06-08 09:14:22,911 [164] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:14:22,913 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 51.3003ms
2020-06-08 09:14:22,916 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 64.5364ms 200 application/json; charset=utf-8
2020-06-08 09:14:52,826 [13] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:14:52,838 [13] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:14:52,851 [13] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 15.1078ms 204 
2020-06-08 09:14:52,854 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:14:52,858 [164] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:14:52,860 [164] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:14:52,863 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:14:52,866 [164] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:14:52,885 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:14:52,908 [164] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:14:52,911 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23.3332ms.
2020-06-08 09:14:52,913 [164] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:14:52,915 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 49.6477ms
2020-06-08 09:14:52,918 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 68.5615ms 200 application/json; charset=utf-8
2020-06-08 09:15:22,825 [13] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:15:22,836 [13] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:15:22,839 [13] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 14.4376ms 204 
2020-06-08 09:15:22,844 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:15:22,858 [164] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:15:22,864 [164] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:15:22,866 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:15:22,868 [164] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:15:22,889 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:15:22,912 [164] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:15:22,914 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.626ms.
2020-06-08 09:15:22,915 [164] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:15:22,918 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 49.6537ms
2020-06-08 09:15:22,923 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 77.0358ms 200 application/json; charset=utf-8
2020-06-08 09:15:52,827 [14] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:15:52,837 [14] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:15:52,840 [14] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 14.2295ms 204 
2020-06-08 09:15:52,860 [13] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:15:52,862 [13] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:15:52,864 [13] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:15:52,866 [13] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:15:52,869 [13] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:15:52,888 [13] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:15:52,910 [13] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:15:52,913 [13] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.209ms.
2020-06-08 09:15:52,915 [13] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:15:52,918 [13] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 48.7528ms
2020-06-08 09:15:52,922 [13] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 59.8856ms 200 application/json; charset=utf-8
2020-06-08 09:16:22,825 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:16:22,837 [164] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:16:22,849 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 22.7556ms 204 
2020-06-08 09:16:22,854 [14] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:16:22,857 [14] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:16:22,859 [14] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:16:22,861 [14] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:16:22,864 [14] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:16:22,882 [14] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:16:22,908 [14] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:16:22,910 [14] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 26.0371ms.
2020-06-08 09:16:22,914 [14] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:16:22,923 [14] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 52.8566ms
2020-06-08 09:16:22,927 [14] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 72.1022ms 200 application/json; charset=utf-8
2020-06-08 09:16:28,448 [14] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-06-08 09:16:28,449 [4] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-06-08 09:16:28,461 [4] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:16:28,463 [14] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:16:28,477 [4] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 19.2292ms 204 
2020-06-08 09:16:28,478 [14] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 20.7492ms 204 
2020-06-08 09:16:28,483 [3] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 170
2020-06-08 09:16:28,486 [4] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-06-08 09:16:28,489 [3] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:16:28,492 [4] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:16:28,499 [3] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:16:28,505 [4] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:16:28,508 [3] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 09:16:28,512 [4] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-06-08 09:16:28,516 [3] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:16:28,539 [4] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:16:28,540 [3] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 09:16:28,580 [4] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 09:16:28,600 [3] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (39ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-08 09:16:28,604 [4] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-06-08 09:16:28,641 [3] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (35ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-08 09:16:28,643 [4] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-06-08 09:16:28,645 [3] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 101.7751ms.
2020-06-08 09:16:28,646 [4] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 63.2755ms.
2020-06-08 09:16:28,647 [3] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:16:28,649 [4] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:16:28,653 [3] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 138.2507ms
2020-06-08 09:16:28,655 [4] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 135.1827ms
2020-06-08 09:16:28,659 [3] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 177.4307ms 200 application/json; charset=utf-8
2020-06-08 09:16:28,660 [4] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 174.1316ms 200 application/json; charset=utf-8
2020-06-08 09:16:28,674 [14] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-08 09:16:28,676 [14] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:16:28,680 [14] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 4.7718ms 204 
2020-06-08 09:16:28,683 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 170
2020-06-08 09:16:28,694 [164] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:16:28,697 [164] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:16:28,699 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 09:16:28,704 [164] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:16:28,722 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-08 09:16:28,754 [164] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (27ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL) AND ([x].[qty] = 0.0)
2020-06-08 09:16:28,777 [164] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 09:16:28,797 [164] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 09:16:28,799 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 75.1417ms.
2020-06-08 09:16:28,803 [164] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:16:28,806 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 103.4753ms
2020-06-08 09:16:28,808 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 126.1723ms 200 application/json; charset=utf-8
2020-06-08 09:16:32,371 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v1/account/profile  
2020-06-08 09:16:32,374 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:16:32,382 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 7.1691ms 204 
2020-06-08 09:16:32,389 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v1/account/profile  
2020-06-08 09:16:32,395 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:16:32,398 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:16:32,401 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Profile() on controller DncZeus.Api.Controllers.AccountController (DncZeus.Api).
2020-06-08 09:16:32,404 [9] INFO  Microsoft.AspNetCore.Authorization.DefaultAuthorizationService [(null)]  - Authorization was successful.
2020-06-08 09:16:32,408 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:16:32,471 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) - Validation state: Valid
2020-06-08 09:16:32,516 [14] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (42ms) [Parameters=[@__Parse_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[ID], [x].[Code], [x].[Name], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser]
FROM [MisOrganization] AS [x]
WHERE [x].[ID] = @__Parse_0
2020-06-08 09:16:32,549 [14] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (28ms) [Parameters=[@__guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[EmpName], [x].[EmpNo], [x].[code], [x].[credate], [x].[creuser], [x].[depname], [x].[depno], [x].[email], [x].[enabled], [x].[jobname], [x].[jobno], [x].[moddate], [x].[moduser], [x].[pwd], [x].[telno], [x].[userLogo], [x].[username], [x].[userno], [x].[utype], [x].[wxAccount], [x].[wxId], [x].[wxMail], [x].[wxName], [x].[wxPhone], [x].[wxPwd]
FROM [Secuser] AS [x]
WHERE [x].[Guid] = @__guid_0
2020-06-08 09:16:32,590 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (37ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[Alias], [x].[BeforeCloseFun], [x].[Component], [x].[CreatedByUserGuid], [x].[CreatedByUserName], [x].[CreatedOn], [x].[Description], [x].[HideInMenu], [x].[Icon], [x].[IsDefaultRouter], [x].[IsDeleted], [x].[Level], [x].[ModifiedByUserGuid], [x].[ModifiedByUserName], [x].[ModifiedOn], [x].[Name], [x].[NotCache], [x].[ParentGuid], [x].[ParentName], [x].[Sort], [x].[Status], [x].[Url]
FROM [DncMenu] AS [x]
WHERE ([x].[IsDeleted] = 0) AND ([x].[Status] = 1)
2020-06-08 09:16:32,615 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__user_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secuprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE [x].[userid] = @__user_Guid_0
ORDER BY [b0].[prgno]
2020-06-08 09:16:32,640 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__groupid_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secgprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE CONVERT(VARCHAR(36), [x].[groupid]) = @__groupid_0
ORDER BY [b0].[prgno]
2020-06-08 09:16:32,643 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 169.5912ms.
2020-06-08 09:16:32,645 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 09:16:32,649 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) in 244.4299ms
2020-06-08 09:16:32,654 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 262.1504ms 200 application/json; charset=utf-8
2020-06-08 09:16:32,677 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-08 09:16:32,681 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:16:32,688 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 7.3296ms 204 
2020-06-08 09:16:32,691 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-08 09:16:32,694 [164] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:16:32,696 [164] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:16:32,699 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "LoadMenuTree", controller = "Uprg"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult LoadMenuTree() on controller DncZeus.Api.Controllers.Api.Sec.UprgController (DncZeus.Api).
2020-06-08 09:16:32,703 [164] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:16:32,722 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) - Validation state: Valid
2020-06-08 09:16:32,746 [164] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[icon], [p].[sysname], [p].[sysno], [p].[sysorder]
FROM [Secsys] AS [p]
ORDER BY [p].[sysorder]
2020-06-08 09:16:32,773 [164] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[funname], [p].[funno], [p].[funorder], [p].[icon], [p].[sysid]
FROM [Secfun] AS [p]
ORDER BY [p].[funorder]
2020-06-08 09:16:32,799 [164] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[enabled], [x].[funid], [x].[icon], [x].[mainid], [x].[prgcomp], [x].[prgname], [x].[prgno], [x].[prgorder], [x].[prgtype], [x].[program], [x].[runtype], [x].[sysid]
FROM [Secprg] AS [x]
WHERE [x].[enabled] = 'Y'
ORDER BY [x].[prgorder]
2020-06-08 09:16:32,834 [164] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[butid], [p].[butname], [p].[butno], [p].[butorder], [p].[funid], [p].[prgid], [p].[sysid]
FROM [Secprgbut] AS [p]
ORDER BY [p].[butorder]
2020-06-08 09:16:32,839 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 113.0357ms.
2020-06-08 09:16:32,843 [164] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 09:16:32,849 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) in 145.3073ms
2020-06-08 09:16:32,854 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 160.5347ms 200 application/json; charset=utf-8
2020-06-08 09:16:33,400 [13] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/Upload/img/20200627040310.png  
2020-06-08 09:16:33,404 [13] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 2.9039ms 404 
2020-06-08 09:16:33,421 [13] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-06-08 09:16:33,423 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:16:33,425 [14] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 170
2020-06-08 09:16:33,437 [13] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:16:33,443 [13] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:16:33,447 [164] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:16:33,449 [14] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:16:33,453 [13] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-06-08 09:16:33,458 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 33.1267ms 204 
2020-06-08 09:16:33,465 [14] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:16:33,469 [13] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:16:33,471 [14] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 09:16:33,473 [3] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:16:33,481 [14] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:16:33,536 [3] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:16:33,556 [3] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:16:33,557 [14] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 09:16:33,559 [13] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 09:16:33,563 [3] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:16:33,599 [14] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (35ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-08 09:16:33,602 [3] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:16:33,605 [13] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-06-08 09:16:33,661 [14] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (55ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-08 09:16:33,664 [3] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:16:33,704 [14] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 121.9601ms.
2020-06-08 09:16:33,726 [13] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (42ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-06-08 09:16:33,745 [14] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:16:33,748 [13] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 166.2028ms.
2020-06-08 09:16:33,750 [14] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 271.7809ms
2020-06-08 09:16:33,753 [3] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:16:33,756 [13] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:16:33,758 [14] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 333.2152ms 200 application/json; charset=utf-8
2020-06-08 09:16:33,761 [13] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 301.1779ms
2020-06-08 09:16:33,766 [3] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 55.231ms.
2020-06-08 09:16:33,774 [13] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 351.2022ms 200 application/json; charset=utf-8
2020-06-08 09:16:33,775 [3] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:16:33,778 [3] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 196.1466ms
2020-06-08 09:16:33,780 [3] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 311.8522ms 200 application/json; charset=utf-8
2020-06-08 09:16:33,785 [3] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-08 09:16:33,789 [3] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:16:33,791 [3] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.9783ms 204 
2020-06-08 09:16:33,795 [4] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 170
2020-06-08 09:16:33,799 [4] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:16:33,802 [4] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:16:33,805 [4] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 09:16:33,808 [4] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:16:33,828 [4] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-08 09:16:33,849 [4] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL) AND ([x].[qty] = 0.0)
2020-06-08 09:16:33,873 [4] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 09:16:33,901 [4] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 09:16:33,906 [4] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 73.7233ms.
2020-06-08 09:16:33,909 [4] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:16:33,911 [4] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 103.8482ms
2020-06-08 09:16:33,914 [4] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 119.3483ms 200 application/json; charset=utf-8
2020-06-08 09:16:35,405 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8  
2020-06-08 09:16:35,408 [3] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workprocess/list?api-version=8  
2020-06-08 09:16:35,412 [164] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:16:35,420 [3] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:16:35,423 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 13.5461ms 204 
2020-06-08 09:16:35,425 [3] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 16.3843ms 204 
2020-06-08 09:16:35,431 [3] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8 application/json;charset=UTF-8 131
2020-06-08 09:16:35,433 [4] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workprocess/list?api-version=8 application/json;charset=UTF-8 150
2020-06-08 09:16:35,438 [3] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:16:35,440 [4] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:16:35,444 [3] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:16:35,446 [4] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:16:35,452 [4] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workprocess"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workprocess.WorkprocessRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkprocessController (DncZeus.Api).
2020-06-08 09:16:35,455 [3] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkDate", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkDate(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-08 09:16:35,457 [4] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:16:35,465 [3] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:16:35,485 [4] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 09:16:35,503 [3] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) - Validation state: Valid
2020-06-08 09:16:35,542 [4] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (36ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[factoryGuid], [t].[workCode], [t].[workName], [t].[rate], [t].[isvalid], [t].[credate], [t].[creuser], [t].[moddate], [t].[moduser], [t].[factoryName]
FROM (
    SELECT [a].[Guid], [a].[OrgID], [a].[factoryGuid], [a].[workCode], [a].[workName], [a].[rate], [a].[isvalid], [a].[credate], [a].[creuser], [a].[moddate], [a].[moduser], [b].[name] AS [factoryName], ROW_NUMBER() OVER(ORDER BY [a].[factoryGuid], [a].[workCode]) AS [__RowNumber__]
    FROM [ManWorkProcess] AS [a]
    INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
    WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-08 09:16:35,544 [3] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (37ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__payload_workDate_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[cadre], [x].[cadreLeave], [x].[cadreRest], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[logistic], [x].[logisticLeave], [x].[logisticRest], [x].[moddate], [x].[moduser], [x].[workDate], [x].[worker], [x].[workerLeave], [x].[workerRest]
FROM [ManFactoryWorkdate] AS [x]
WHERE ([x].[factoryGuid] = @__payload_factoryGuid_0) AND ([x].[workDate] = @__payload_workDate_1)
2020-06-08 09:16:35,566 [3] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 60.1849ms.
2020-06-08 09:16:35,570 [4] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkProcess] AS [a]
INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
2020-06-08 09:16:35,571 [3] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 09:16:35,573 [4] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 69.1472ms.
2020-06-08 09:16:35,578 [3] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) in 117.2712ms
2020-06-08 09:16:35,579 [4] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:16:35,592 [3] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 151.9077ms 200 application/json; charset=utf-8
2020-06-08 09:16:35,596 [4] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) in 126.5827ms
2020-06-08 09:16:35,604 [4] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 170.1436ms 200 application/json; charset=utf-8
2020-06-08 09:16:35,623 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8  
2020-06-08 09:16:35,626 [164] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:16:35,630 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.8643ms 204 
2020-06-08 09:16:35,635 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 139
2020-06-08 09:16:35,638 [164] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:16:35,641 [164] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:16:35,646 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-08 09:16:35,650 [164] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:16:35,672 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-06-08 09:16:35,699 [164] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty',isnull(h.targetOut ,0) as 'targetOut',isnull(h.realityOut,0) as 'realityOut',isnull(h.sumTime,0) as 'sumTime',isnull(h.status,0) as 'status'
from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=a.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=a.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=a.factoryGuid)
left join (
select sum(outline.output) as 'todayDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.factoryGuid
) as g on(g.factoryGuid=a.factoryGuid)
left join (
	select aa.targetOut,aa.realityOut,aa.sumTime,aa.factoryGuid,aa.status from ManFactoryWorkout aa where wrokDate=@p3 and factoryGuid=@p0
) as h on(h.factoryGuid=a.factoryGuid)
2020-06-08 09:16:35,709 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 30.2022ms.
2020-06-08 09:16:35,713 [164] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:16:35,718 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 67.7305ms
2020-06-08 09:16:35,722 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 87.6126ms 200 application/json; charset=utf-8
2020-06-08 09:17:03,186 [14] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v1/account/profile  
2020-06-08 09:17:03,195 [14] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:17:03,198 [14] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 13.2941ms 204 
2020-06-08 09:17:03,213 [3] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v1/account/profile  
2020-06-08 09:17:03,219 [3] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:17:03,224 [3] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:17:03,226 [3] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Profile() on controller DncZeus.Api.Controllers.AccountController (DncZeus.Api).
2020-06-08 09:17:03,229 [3] INFO  Microsoft.AspNetCore.Authorization.DefaultAuthorizationService [(null)]  - Authorization was successful.
2020-06-08 09:17:03,231 [3] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:17:03,275 [3] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) - Validation state: Valid
2020-06-08 09:17:03,385 [164] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (78ms) [Parameters=[@__Parse_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[ID], [x].[Code], [x].[Name], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser]
FROM [MisOrganization] AS [x]
WHERE [x].[ID] = @__Parse_0
2020-06-08 09:17:03,438 [168] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (46ms) [Parameters=[@__guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[EmpName], [x].[EmpNo], [x].[code], [x].[credate], [x].[creuser], [x].[depname], [x].[depno], [x].[email], [x].[enabled], [x].[jobname], [x].[jobno], [x].[moddate], [x].[moduser], [x].[pwd], [x].[telno], [x].[userLogo], [x].[username], [x].[userno], [x].[utype], [x].[wxAccount], [x].[wxId], [x].[wxMail], [x].[wxName], [x].[wxPhone], [x].[wxPwd]
FROM [Secuser] AS [x]
WHERE [x].[Guid] = @__guid_0
2020-06-08 09:17:03,468 [3] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[Alias], [x].[BeforeCloseFun], [x].[Component], [x].[CreatedByUserGuid], [x].[CreatedByUserName], [x].[CreatedOn], [x].[Description], [x].[HideInMenu], [x].[Icon], [x].[IsDefaultRouter], [x].[IsDeleted], [x].[Level], [x].[ModifiedByUserGuid], [x].[ModifiedByUserName], [x].[ModifiedOn], [x].[Name], [x].[NotCache], [x].[ParentGuid], [x].[ParentName], [x].[Sort], [x].[Status], [x].[Url]
FROM [DncMenu] AS [x]
WHERE ([x].[IsDeleted] = 0) AND ([x].[Status] = 1)
2020-06-08 09:17:03,492 [3] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__user_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secuprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE [x].[userid] = @__user_Guid_0
ORDER BY [b0].[prgno]
2020-06-08 09:17:03,515 [3] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__groupid_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secgprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE CONVERT(VARCHAR(36), [x].[groupid]) = @__groupid_0
ORDER BY [b0].[prgno]
2020-06-08 09:17:03,522 [3] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 241.4134ms.
2020-06-08 09:17:03,524 [3] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 09:17:03,527 [3] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) in 298.3646ms
2020-06-08 09:17:03,530 [3] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 319.4105ms 200 application/json; charset=utf-8
2020-06-08 09:17:03,539 [3] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-08 09:17:03,541 [3] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:17:03,544 [3] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 4.6313ms 204 
2020-06-08 09:17:03,547 [3] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-08 09:17:03,552 [3] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:17:03,555 [3] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:17:03,558 [3] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "LoadMenuTree", controller = "Uprg"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult LoadMenuTree() on controller DncZeus.Api.Controllers.Api.Sec.UprgController (DncZeus.Api).
2020-06-08 09:17:03,562 [3] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:17:03,584 [3] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) - Validation state: Valid
2020-06-08 09:17:03,608 [3] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[icon], [p].[sysname], [p].[sysno], [p].[sysorder]
FROM [Secsys] AS [p]
ORDER BY [p].[sysorder]
2020-06-08 09:17:03,631 [3] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[funname], [p].[funno], [p].[funorder], [p].[icon], [p].[sysid]
FROM [Secfun] AS [p]
ORDER BY [p].[funorder]
2020-06-08 09:17:03,659 [3] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[enabled], [x].[funid], [x].[icon], [x].[mainid], [x].[prgcomp], [x].[prgname], [x].[prgno], [x].[prgorder], [x].[prgtype], [x].[program], [x].[runtype], [x].[sysid]
FROM [Secprg] AS [x]
WHERE [x].[enabled] = 'Y'
ORDER BY [x].[prgorder]
2020-06-08 09:17:03,692 [3] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (29ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[butid], [p].[butname], [p].[butno], [p].[butorder], [p].[funid], [p].[prgid], [p].[sysid]
FROM [Secprgbut] AS [p]
ORDER BY [p].[butorder]
2020-06-08 09:17:03,695 [3] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 108.551ms.
2020-06-08 09:17:03,697 [3] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 09:17:03,702 [3] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) in 139.6304ms
2020-06-08 09:17:03,705 [3] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 157.7302ms 200 application/json; charset=utf-8
2020-06-08 09:17:04,264 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/Upload/img/20200627040310.png  
2020-06-08 09:17:04,268 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 4.9808ms 404 
2020-06-08 09:17:04,288 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-06-08 09:17:04,290 [14] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-06-08 09:17:04,297 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:17:04,309 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:17:04,311 [164] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:17:04,313 [14] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:17:04,321 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 28.8227ms 204 
2020-06-08 09:17:04,324 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 26.9262ms 204 
2020-06-08 09:17:04,330 [14] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 30.8597ms 204 
2020-06-08 09:17:04,333 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-06-08 09:17:04,336 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:17:04,339 [14] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 170
2020-06-08 09:17:04,343 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:17:04,351 [164] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:17:04,362 [14] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:17:04,371 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:17:04,373 [164] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:17:04,374 [14] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:17:04,376 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:17:04,378 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-06-08 09:17:04,380 [14] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 09:17:04,382 [164] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:17:04,385 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:17:04,388 [14] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:17:04,405 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:17:04,506 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 09:17:04,512 [14] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 09:17:04,585 [164] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (69ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:17:04,602 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-06-08 09:17:04,604 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 180.7256ms.
2020-06-08 09:17:04,606 [14] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-08 09:17:04,625 [164] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:17:04,644 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-06-08 09:17:04,646 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 265.1685ms
2020-06-08 09:17:04,649 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 86.7295ms.
2020-06-08 09:17:04,651 [14] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-08 09:17:04,654 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 316.4458ms 200 application/json; charset=utf-8
2020-06-08 09:17:04,656 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:17:04,657 [14] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 95.6583ms.
2020-06-08 09:17:04,661 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 275.0768ms
2020-06-08 09:17:04,663 [14] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:17:04,667 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 340.7369ms 200 application/json; charset=utf-8
2020-06-08 09:17:04,669 [14] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 280.5816ms
2020-06-08 09:17:04,672 [14] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 333.9753ms 200 application/json; charset=utf-8
2020-06-08 09:17:04,711 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-08 09:17:04,713 [164] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:17:04,716 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 3.9554ms 204 
2020-06-08 09:17:04,721 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 170
2020-06-08 09:17:04,724 [164] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:17:04,726 [164] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:17:04,728 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 09:17:04,730 [164] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:17:04,748 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-08 09:17:04,773 [164] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL) AND ([x].[qty] = 0.0)
2020-06-08 09:17:04,797 [164] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 09:17:04,822 [164] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 09:17:04,824 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 74.5184ms.
2020-06-08 09:17:04,826 [164] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:17:04,828 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 98.459ms
2020-06-08 09:17:04,831 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 111.1437ms 200 application/json; charset=utf-8
2020-06-08 09:17:13,719 [3] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v1/account/profile  
2020-06-08 09:17:13,722 [3] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:17:13,727 [3] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 6.5516ms 204 
2020-06-08 09:17:13,729 [14] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v1/account/profile  
2020-06-08 09:17:13,731 [14] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:17:13,734 [14] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:17:13,737 [14] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Profile() on controller DncZeus.Api.Controllers.AccountController (DncZeus.Api).
2020-06-08 09:17:13,739 [14] INFO  Microsoft.AspNetCore.Authorization.DefaultAuthorizationService [(null)]  - Authorization was successful.
2020-06-08 09:17:13,742 [14] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:17:13,763 [14] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) - Validation state: Valid
2020-06-08 09:17:13,808 [164] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (39ms) [Parameters=[@__Parse_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[ID], [x].[Code], [x].[Name], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser]
FROM [MisOrganization] AS [x]
WHERE [x].[ID] = @__Parse_0
2020-06-08 09:17:13,854 [169] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (37ms) [Parameters=[@__guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[EmpName], [x].[EmpNo], [x].[code], [x].[credate], [x].[creuser], [x].[depname], [x].[depno], [x].[email], [x].[enabled], [x].[jobname], [x].[jobno], [x].[moddate], [x].[moduser], [x].[pwd], [x].[telno], [x].[userLogo], [x].[username], [x].[userno], [x].[utype], [x].[wxAccount], [x].[wxId], [x].[wxMail], [x].[wxName], [x].[wxPhone], [x].[wxPwd]
FROM [Secuser] AS [x]
WHERE [x].[Guid] = @__guid_0
2020-06-08 09:17:13,886 [14] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[Alias], [x].[BeforeCloseFun], [x].[Component], [x].[CreatedByUserGuid], [x].[CreatedByUserName], [x].[CreatedOn], [x].[Description], [x].[HideInMenu], [x].[Icon], [x].[IsDefaultRouter], [x].[IsDeleted], [x].[Level], [x].[ModifiedByUserGuid], [x].[ModifiedByUserName], [x].[ModifiedOn], [x].[Name], [x].[NotCache], [x].[ParentGuid], [x].[ParentName], [x].[Sort], [x].[Status], [x].[Url]
FROM [DncMenu] AS [x]
WHERE ([x].[IsDeleted] = 0) AND ([x].[Status] = 1)
2020-06-08 09:17:13,922 [14] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (29ms) [Parameters=[@__user_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secuprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE [x].[userid] = @__user_Guid_0
ORDER BY [b0].[prgno]
2020-06-08 09:17:13,961 [14] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (35ms) [Parameters=[@__groupid_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secgprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE CONVERT(VARCHAR(36), [x].[groupid]) = @__groupid_0
ORDER BY [b0].[prgno]
2020-06-08 09:17:13,963 [14] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 197.5763ms.
2020-06-08 09:17:13,966 [14] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 09:17:13,969 [14] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) in 229.1101ms
2020-06-08 09:17:13,972 [14] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 242.741ms 200 application/json; charset=utf-8
2020-06-08 09:17:13,979 [3] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-08 09:17:13,981 [3] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:17:13,985 [3] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.3036ms 204 
2020-06-08 09:17:13,988 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-06-08 09:17:13,990 [164] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:17:13,992 [164] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:17:13,995 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "LoadMenuTree", controller = "Uprg"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult LoadMenuTree() on controller DncZeus.Api.Controllers.Api.Sec.UprgController (DncZeus.Api).
2020-06-08 09:17:13,998 [164] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:17:14,018 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) - Validation state: Valid
2020-06-08 09:17:14,041 [164] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[icon], [p].[sysname], [p].[sysno], [p].[sysorder]
FROM [Secsys] AS [p]
ORDER BY [p].[sysorder]
2020-06-08 09:17:14,068 [164] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[funname], [p].[funno], [p].[funorder], [p].[icon], [p].[sysid]
FROM [Secfun] AS [p]
ORDER BY [p].[funorder]
2020-06-08 09:17:14,096 [164] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[enabled], [x].[funid], [x].[icon], [x].[mainid], [x].[prgcomp], [x].[prgname], [x].[prgno], [x].[prgorder], [x].[prgtype], [x].[program], [x].[runtype], [x].[sysid]
FROM [Secprg] AS [x]
WHERE [x].[enabled] = 'Y'
ORDER BY [x].[prgorder]
2020-06-08 09:17:14,128 [164] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[butid], [p].[butname], [p].[butno], [p].[butorder], [p].[funid], [p].[prgid], [p].[sysid]
FROM [Secprgbut] AS [p]
ORDER BY [p].[butorder]
2020-06-08 09:17:14,131 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 110.9829ms.
2020-06-08 09:17:14,134 [164] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 09:17:14,138 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) in 139.9119ms
2020-06-08 09:17:14,142 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 152.1222ms 200 application/json; charset=utf-8
2020-06-08 09:17:14,699 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/Upload/img/20200627040310.png  
2020-06-08 09:17:14,704 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 3.1816ms 404 
2020-06-08 09:17:14,725 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-06-08 09:17:14,727 [14] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-06-08 09:17:14,735 [3] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:17:14,754 [14] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:17:14,757 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:17:14,758 [3] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:17:14,766 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 37.1681ms 204 
2020-06-08 09:17:14,770 [14] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 34.3444ms 204 
2020-06-08 09:17:14,772 [3] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 37.3562ms 204 
2020-06-08 09:17:14,775 [14] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 170
2020-06-08 09:17:14,777 [3] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-06-08 09:17:14,780 [169] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:17:14,786 [14] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:17:14,805 [3] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:17:14,824 [14] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:17:14,826 [3] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:17:14,829 [169] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:17:14,831 [14] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 09:17:14,834 [3] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-06-08 09:17:14,836 [169] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:17:14,839 [14] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:17:14,842 [169] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:17:14,843 [3] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:17:14,886 [169] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:17:14,887 [14] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 09:17:14,905 [3] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 09:17:14,908 [169] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:17:14,944 [14] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (35ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[rate], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[rate], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                            inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                        where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                        from ManWorkshopOut as b
                                        inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
        left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
        where  b.workProcessGuid=@p1 and b.countType=@p3
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-08 09:17:14,963 [3] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-06-08 09:17:14,966 [169] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:17:15,004 [169] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 42.2947ms.
2020-06-08 09:17:15,006 [169] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:17:15,008 [14] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (43ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select isnull(sum(bb.qty),0) as sumqty from ManWorkshopOut as aa
                                        inner join ManWorkshopOutLine as bb on(bb.workshopOutGuid=aa.Guid)
                                    where aa.factoryGuid=@p0 and aa.workProcessGuid=@p1 and bb.workDate<@p2 and aa.ordCode=b.ordCode and aa.itemCode=b.itemCode) as sumqty,isnull(d.rate,0) as 'rate'
                                    from ManWorkshopOut as b
                                    inner join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    left join ManOutSplit as c on(c.factoryGuid=b.factoryGuid and c.ordCode=b.ordCode and c.itemCode=b.itemCode)
    left join ManOutSplitLine as d on(d.workProcessGuid=c.Guid and d.ProcessGuid=@p1)
    where  b.workProcessGuid=@p1 and b.countType=@p3
) AS [w]
2020-06-08 09:17:15,009 [3] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (39ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-06-08 09:17:15,011 [169] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 165.551ms
2020-06-08 09:17:15,014 [14] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 122.8349ms.
2020-06-08 09:17:15,020 [3] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 106.9195ms.
2020-06-08 09:17:15,028 [14] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:17:15,033 [3] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:17:15,039 [14] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 194.8675ms
2020-06-08 09:17:15,041 [3] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 199.6741ms
2020-06-08 09:17:15,043 [169] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 243.0097ms 200 application/json; charset=utf-8
2020-06-08 09:17:15,045 [14] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 270.6665ms 200 application/json; charset=utf-8
2020-06-08 09:17:15,048 [3] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 270.0496ms 200 application/json; charset=utf-8
2020-06-08 09:17:15,092 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8  
2020-06-08 09:17:15,094 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:17:15,097 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 4.4747ms 204 
2020-06-08 09:17:15,099 [169] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/GetWorkprocessByDone?api-version=8 application/json;charset=UTF-8 170
2020-06-08 09:17:15,103 [169] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:17:15,105 [169] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:17:15,106 [169] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetWorkprocessByDone", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWorkprocessByDone(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-06-08 09:17:15,109 [169] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:17:15,126 [169] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) - Validation state: Valid
2020-06-08 09:17:15,146 [169] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (18ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT [b0].[workName], [x].[qty]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE (([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL) AND ([x].[qty] = 0.0)
2020-06-08 09:17:15,168 [169] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT DISTINCT [b0].[workName]
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 09:17:15,190 [169] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_workDate_0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkshopOutLine] AS [x]
INNER JOIN [ManWorkshopOut] AS [b] ON [x].[workshopOutGuid] = [b].[Guid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[workProcessGuid] = [b0].[Guid]
WHERE ([x].[workDate] = @__payload_workDate_0) AND [b].[factoryGuid] IS NULL
2020-06-08 09:17:15,191 [169] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 64.0656ms.
2020-06-08 09:17:15,193 [169] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:17:15,202 [169] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.GetWorkprocessByDone (DncZeus.Api) in 86.866ms
2020-06-08 09:17:15,205 [169] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 105.0413ms 200 application/json; charset=utf-8
2020-06-08 09:17:44,593 [172] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:17:44,625 [172] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:17:44,629 [172] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 34.5265ms 204 
2020-06-08 09:17:44,639 [170] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:17:44,650 [170] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:17:44,652 [170] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:17:44,654 [170] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:17:44,657 [170] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:17:44,678 [170] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:17:44,700 [170] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:17:44,703 [170] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.3897ms.
2020-06-08 09:17:44,705 [170] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:17:44,708 [170] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 50.9119ms
2020-06-08 09:17:44,711 [170] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 71.4859ms 200 application/json; charset=utf-8
2020-06-08 09:18:14,591 [14] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:18:14,602 [14] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:18:14,611 [14] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 13.55ms 204 
2020-06-08 09:18:14,613 [171] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:18:14,616 [171] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:18:14,618 [171] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:18:14,621 [171] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:18:14,623 [171] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:18:14,642 [171] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:18:14,664 [171] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:18:14,667 [171] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.9794ms.
2020-06-08 09:18:14,669 [171] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:18:14,672 [171] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 48.9143ms
2020-06-08 09:18:14,675 [171] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 61.8243ms 200 application/json; charset=utf-8
2020-06-08 09:18:44,601 [171] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:18:44,614 [171] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:18:44,623 [171] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 16.308ms 204 
2020-06-08 09:18:44,626 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:18:44,629 [164] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:18:44,632 [164] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:18:44,634 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:18:44,636 [164] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:18:44,654 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:18:44,677 [164] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:18:44,680 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.5842ms.
2020-06-08 09:18:44,682 [164] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:18:44,686 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 48.9458ms
2020-06-08 09:18:44,698 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 62.9112ms 200 application/json; charset=utf-8
2020-06-08 09:19:14,592 [177] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:19:14,596 [177] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:19:14,623 [177] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 14.3797ms 204 
2020-06-08 09:19:14,625 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:19:14,628 [164] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:19:14,632 [164] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:19:14,641 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:19:14,644 [164] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:19:14,662 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:19:14,692 [164] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (27ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:19:14,694 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 30.1887ms.
2020-06-08 09:19:14,697 [164] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:19:14,700 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 56.1927ms
2020-06-08 09:19:14,703 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 77.5131ms 200 application/json; charset=utf-8
2020-06-08 09:19:44,592 [177] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:19:44,603 [177] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:19:44,606 [177] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 13.5726ms 204 
2020-06-08 09:19:44,618 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:19:44,622 [164] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:19:44,625 [164] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:19:44,629 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:19:44,632 [164] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:19:44,658 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:19:44,681 [164] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:19:44,683 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23.0841ms.
2020-06-08 09:19:44,685 [164] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:19:44,688 [164] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 56.9654ms
2020-06-08 09:19:44,691 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 72.9557ms 200 application/json; charset=utf-8
2020-06-08 09:20:14,592 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:20:14,603 [164] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:20:14,605 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 12.8344ms 204 
2020-06-08 09:20:14,617 [184] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:20:14,625 [184] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:20:14,628 [184] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:20:14,630 [184] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:20:14,632 [184] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:20:14,650 [184] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:20:14,673 [184] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:20:14,676 [184] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23.0726ms.
2020-06-08 09:20:14,679 [184] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:20:14,681 [184] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 48.4314ms
2020-06-08 09:20:14,684 [184] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 66.8737ms 200 application/json; charset=utf-8
2020-06-08 09:20:44,594 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:20:44,604 [164] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:20:44,618 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 13.0361ms 204 
2020-06-08 09:20:44,629 [187] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:20:44,631 [187] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:20:44,633 [187] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:20:44,636 [187] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:20:44,639 [187] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:20:44,657 [187] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:20:44,682 [187] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:20:44,684 [187] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 25.2167ms.
2020-06-08 09:20:44,686 [187] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:20:44,688 [187] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 50.0108ms
2020-06-08 09:20:44,691 [187] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 69.7512ms 200 application/json; charset=utf-8
2020-06-08 09:21:14,593 [187] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:21:14,603 [187] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:21:14,605 [187] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 13.4151ms 204 
2020-06-08 09:21:14,618 [187] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:21:14,621 [187] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:21:14,623 [187] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:21:14,627 [187] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:21:14,630 [187] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:21:14,649 [187] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:21:14,674 [187] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:21:14,677 [187] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 25.6187ms.
2020-06-08 09:21:14,679 [187] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:21:14,682 [187] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 52.6796ms
2020-06-08 09:21:14,685 [187] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 73.5787ms 200 application/json; charset=utf-8
2020-06-08 09:21:39,716 [186] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8  
2020-06-08 09:21:39,717 [179] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workprocess/list?api-version=8  
2020-06-08 09:21:39,732 [186] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:21:39,746 [179] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:21:39,748 [186] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 21.1521ms 204 
2020-06-08 09:21:39,752 [179] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 32.0446ms 204 
2020-06-08 09:21:39,754 [187] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8 application/json;charset=UTF-8 131
2020-06-08 09:21:39,760 [184] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workprocess/list?api-version=8 application/json;charset=UTF-8 150
2020-06-08 09:21:39,762 [187] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:21:39,765 [184] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:21:39,767 [187] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:21:39,769 [184] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:21:39,772 [187] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkDate", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkDate(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-08 09:21:39,775 [184] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workprocess"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workprocess.WorkprocessRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkprocessController (DncZeus.Api).
2020-06-08 09:21:39,778 [187] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:21:39,781 [184] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:21:39,799 [187] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) - Validation state: Valid
2020-06-08 09:21:39,816 [184] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) - Validation state: Valid
2020-06-08 09:21:39,839 [187] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__payload_workDate_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[cadre], [x].[cadreLeave], [x].[cadreRest], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[logistic], [x].[logisticLeave], [x].[logisticRest], [x].[moddate], [x].[moduser], [x].[workDate], [x].[worker], [x].[workerLeave], [x].[workerRest]
FROM [ManFactoryWorkdate] AS [x]
WHERE ([x].[factoryGuid] = @__payload_factoryGuid_0) AND ([x].[workDate] = @__payload_workDate_1)
2020-06-08 09:21:39,842 [187] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 40.0875ms.
2020-06-08 09:21:39,845 [187] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-06-08 09:21:39,847 [187] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) in 73.0578ms
2020-06-08 09:21:39,868 [187] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 114.2695ms 200 application/json; charset=utf-8
2020-06-08 09:21:39,870 [184] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[factoryGuid], [t].[workCode], [t].[workName], [t].[rate], [t].[isvalid], [t].[credate], [t].[creuser], [t].[moddate], [t].[moduser], [t].[factoryName]
FROM (
    SELECT [a].[Guid], [a].[OrgID], [a].[factoryGuid], [a].[workCode], [a].[workName], [a].[rate], [a].[isvalid], [a].[credate], [a].[creuser], [a].[moddate], [a].[moduser], [b].[name] AS [factoryName], ROW_NUMBER() OVER(ORDER BY [a].[factoryGuid], [a].[workCode]) AS [__RowNumber__]
    FROM [ManWorkProcess] AS [a]
    INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
    WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-06-08 09:21:39,896 [184] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkProcess] AS [a]
INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
2020-06-08 09:21:39,898 [184] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 60.8439ms.
2020-06-08 09:21:39,901 [184] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:21:39,904 [184] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) in 123.6904ms
2020-06-08 09:21:39,911 [184] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 150.9668ms 200 application/json; charset=utf-8
2020-06-08 09:21:39,916 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8  
2020-06-08 09:21:39,918 [164] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:21:39,925 [164] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 4.5874ms 204 
2020-06-08 09:21:39,927 [184] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 139
2020-06-08 09:21:39,930 [184] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:21:39,932 [184] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:21:39,935 [184] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-06-08 09:21:39,938 [184] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:21:39,956 [184] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-06-08 09:21:39,981 [184] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty',isnull(h.targetOut ,0) as 'targetOut',isnull(h.realityOut,0) as 'realityOut',isnull(h.sumTime,0) as 'sumTime',isnull(h.status,0) as 'status'
from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=a.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=a.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.output) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=a.factoryGuid)
left join (
select sum(outline.output) as 'todayDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.factoryGuid
) as g on(g.factoryGuid=a.factoryGuid)
left join (
	select aa.targetOut,aa.realityOut,aa.sumTime,aa.factoryGuid,aa.status from ManFactoryWorkout aa where wrokDate=@p3 and factoryGuid=@p0
) as h on(h.factoryGuid=a.factoryGuid)
2020-06-08 09:21:39,983 [184] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 24.0207ms.
2020-06-08 09:21:39,985 [184] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:21:39,988 [184] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 50.0449ms
2020-06-08 09:21:39,991 [184] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 62.8698ms 200 application/json; charset=utf-8
2020-06-08 09:21:44,593 [189] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:21:44,596 [189] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:21:44,599 [189] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 6.1405ms 204 
2020-06-08 09:21:44,602 [179] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:21:44,604 [179] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:21:44,607 [179] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:21:44,611 [179] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:21:44,613 [179] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:21:44,632 [179] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:21:44,654 [179] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:21:44,656 [179] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 21.7309ms.
2020-06-08 09:21:44,659 [179] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:21:44,662 [179] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 48.5632ms
2020-06-08 09:21:44,665 [179] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 62.6061ms 200 application/json; charset=utf-8
2020-06-08 09:22:14,593 [189] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:22:14,602 [189] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:22:14,614 [189] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 11.7272ms 204 
2020-06-08 09:22:14,621 [179] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:22:14,628 [179] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:22:14,631 [179] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:22:14,637 [179] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:22:14,640 [179] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:22:14,661 [179] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:22:14,687 [179] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:22:14,693 [179] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 26.9473ms.
2020-06-08 09:22:14,695 [179] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:22:14,700 [179] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 58.9717ms
2020-06-08 09:22:14,712 [179] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 87.3987ms 200 application/json; charset=utf-8
2020-06-08 09:22:44,592 [194] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:22:44,602 [194] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:22:44,603 [194] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 11.7413ms 204 
2020-06-08 09:22:44,614 [179] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:22:44,616 [179] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:22:44,618 [179] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:22:44,621 [179] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:22:44,625 [179] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:22:44,644 [179] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:22:44,665 [179] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:22:44,668 [179] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 21.8496ms.
2020-06-08 09:22:44,670 [179] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:22:44,674 [179] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 49.6005ms
2020-06-08 09:22:44,678 [179] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 62.5332ms 200 application/json; charset=utf-8
2020-06-08 09:23:14,592 [194] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:23:14,601 [194] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:23:14,605 [194] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 12.0892ms 204 
2020-06-08 09:23:14,618 [179] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:23:14,620 [179] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:23:14,624 [179] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:23:14,626 [179] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:23:14,629 [179] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:23:14,646 [179] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:23:14,669 [179] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:23:14,672 [179] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.8348ms.
2020-06-08 09:23:14,674 [179] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:23:14,678 [179] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 49.2207ms
2020-06-08 09:23:14,683 [179] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 63.1484ms 200 application/json; charset=utf-8
2020-06-08 09:23:44,592 [187] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:23:44,602 [187] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:23:44,606 [187] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 13.0852ms 204 
2020-06-08 09:23:44,626 [187] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:23:44,628 [187] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:23:44,630 [187] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:23:44,632 [187] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:23:44,634 [187] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:23:44,653 [187] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:23:44,676 [187] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:23:44,679 [187] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.9042ms.
2020-06-08 09:23:44,681 [187] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:23:44,683 [187] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 49.1303ms
2020-06-08 09:23:44,686 [187] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 60.5673ms 200 application/json; charset=utf-8
2020-06-08 09:24:14,591 [179] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:24:14,595 [179] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:24:14,605 [179] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 12.2429ms 204 
2020-06-08 09:24:14,609 [179] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:24:14,617 [179] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:24:14,620 [179] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:24:14,622 [179] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:24:14,625 [179] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:24:14,645 [179] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:24:14,667 [179] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:24:14,671 [179] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.4419ms.
2020-06-08 09:24:14,673 [179] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:24:14,675 [179] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 51.008ms
2020-06-08 09:24:14,679 [179] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 69.4556ms 200 application/json; charset=utf-8
2020-06-08 09:24:44,593 [179] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:24:44,695 [179] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:24:44,708 [179] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 114.1254ms 204 
2020-06-08 09:24:44,713 [179] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:24:44,716 [179] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:24:44,720 [179] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:24:44,723 [179] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:24:44,726 [179] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:24:44,746 [179] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:24:44,774 [179] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (25ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:24:44,777 [179] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 28.9004ms.
2020-06-08 09:24:44,784 [179] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:24:44,790 [179] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 62.2802ms
2020-06-08 09:24:44,798 [179] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 81.196ms 200 application/json; charset=utf-8
2020-06-08 09:25:15,347 [1] INFO  Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager [(null)]  - User profile is available. Using 'C:\Users\June\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-06-08 09:25:15,672 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:25:15,700 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:25:15,709 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 36.9542ms 204 
2020-06-08 09:25:15,713 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:25:15,742 [10] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:25:15,743 [10] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:25:16,042 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:25:16,557 [10] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:25:16,749 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:25:16,857 [10] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (2ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:25:16,866 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 115.0147ms.
2020-06-08 09:25:16,871 [10] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:25:16,886 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 842.5151ms
2020-06-08 09:25:16,888 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 1175.1506ms 200 application/json; charset=utf-8
2020-06-08 09:25:44,592 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:25:44,594 [10] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:25:44,595 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 2.3774ms 204 
2020-06-08 09:25:44,597 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:25:44,598 [10] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:25:44,598 [10] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:25:44,600 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:25:44,602 [10] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:25:44,603 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:25:44,607 [10] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (2ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:25:44,608 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.9911ms.
2020-06-08 09:25:44,608 [10] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:25:44,609 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 7.8801ms
2020-06-08 09:25:44,610 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 13.1803ms 200 application/json; charset=utf-8
2020-06-08 09:26:14,725 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:26:14,726 [10] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:26:14,727 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 1.6391ms 204 
2020-06-08 09:26:14,729 [21] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:26:14,730 [21] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:26:14,731 [21] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:26:14,731 [21] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:26:14,732 [21] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:26:14,732 [21] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:26:14,735 [21] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (1ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:26:14,735 [21] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1.9252ms.
2020-06-08 09:26:14,735 [21] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:26:14,736 [21] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 4.0741ms
2020-06-08 09:26:14,736 [21] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 6.627ms 200 application/json; charset=utf-8
2020-06-08 09:26:44,725 [21] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:26:44,726 [21] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:26:44,726 [21] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 1.4648ms 204 
2020-06-08 09:26:44,729 [25] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-06-08 09:26:44,730 [25] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-06-08 09:26:44,731 [25] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-06-08 09:26:44,732 [25] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-06-08 09:26:44,733 [25] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-06-08 09:26:44,733 [25] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-06-08 09:26:44,736 [25] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (2ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-06-08 09:26:44,736 [25] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2.5457ms.
2020-06-08 09:26:44,737 [25] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-06-08 09:26:44,737 [25] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 4.5496ms
2020-06-08 09:26:44,737 [25] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 8.0056ms 200 application/json; charset=utf-8
