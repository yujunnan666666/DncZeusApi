2020-05-29 17:28:47,728 [1] INFO  Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager [(null)]  - User profile is available. Using 'C:\Users\June\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-05-29 17:28:48,352 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 DEBUG http://localhost:54321/  0
2020-05-29 17:28:48,353 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/swagger/index.html  
2020-05-29 17:28:48,382 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 28.1546ms 200 
2020-05-29 17:28:48,729 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 376.2878ms 200 text/html
2020-05-29 17:28:48,890 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/swagger/v3/swagger.json  
2020-05-29 17:28:49,154 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 261.2555ms 200 application/json;charset=utf-8
2020-05-29 17:28:56,286 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/org/list?api-version=5  
2020-05-29 17:28:56,300 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:28:56,306 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 20.8699ms 204 
2020-05-29 17:28:56,309 [11] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/org/list?api-version=5  
2020-05-29 17:28:56,332 [11] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:28:56,336 [11] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:28:56,442 [11] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Org"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List() on controller DncZeus.Api.Controllers.Mis.OrgController (DncZeus.Api).
2020-05-29 17:28:57,365 [11] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:28:57,459 [11] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Mis.OrgController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:28:57,570 [12] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/oauth/auth?userno=admin&password=123456&orgid=1  
2020-05-29 17:28:57,573 [12] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:28:57,590 [12] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Auth", controller = "Oauth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Auth(System.String, System.String, Int32) on controller DncZeus.Api.Controllers.OauthController (DncZeus.Api).
2020-05-29 17:28:57,595 [12] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:28:57,675 [12] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.OauthController.Auth (DncZeus.Api) - Validation state: Valid
2020-05-29 17:28:57,683 [11] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (65ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [m].[ID], [m].[Code], [m].[Name], [m].[credate], [m].[creuser], [m].[moddate], [m].[moduser]
FROM [MisOrganization] AS [m]
2020-05-29 17:28:57,768 [12] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (37ms) [Parameters=[@__Trim_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[EmpName], [x].[EmpNo], [x].[code], [x].[credate], [x].[creuser], [x].[depname], [x].[depno], [x].[email], [x].[enabled], [x].[jobname], [x].[jobno], [x].[moddate], [x].[moduser], [x].[pwd], [x].[telno], [x].[userLogo], [x].[username], [x].[userno], [x].[utype], [x].[wxAccount], [x].[wxId], [x].[wxMail], [x].[wxName], [x].[wxPhone], [x].[wxPwd]
FROM [Secuser] AS [x]
WHERE [x].[userno] = @__Trim_0
2020-05-29 17:28:57,778 [11] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Mis.OrgController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 314.4412ms.
2020-05-29 17:28:57,788 [11] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:28:57,802 [11] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Mis.OrgController.List (DncZeus.Api) in 1356.1325ms
2020-05-29 17:28:57,804 [11] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 1496.1294ms 200 application/json; charset=utf-8
2020-05-29 17:28:57,836 [12] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[@__user_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[orgid], [x].[userid]
FROM [Secuserorg] AS [x]
WHERE [x].[userid] = @__user_Guid_0
2020-05-29 17:28:57,870 [12] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__orgid_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[ID], [x].[Code], [x].[Name], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser]
FROM [MisOrganization] AS [x]
WHERE [x].[ID] = @__orgid_0
2020-05-29 17:28:57,909 [12] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (27ms) [Parameters=[@__user_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[groupid], [x].[userid]
FROM [Secguser] AS [x]
WHERE [x].[userid] = @__user_Guid_0
2020-05-29 17:28:57,917 [12] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.OauthController.Auth (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 239.1423ms.
2020-05-29 17:28:57,920 [12] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:28:57,923 [12] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.OauthController.Auth (DncZeus.Api) in 330.3217ms
2020-05-29 17:28:57,928 [12] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 355.6852ms 200 application/json; charset=utf-8
2020-05-29 17:28:57,955 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v1/account/profile  
2020-05-29 17:28:57,959 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:28:57,973 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 13.2516ms 204 
2020-05-29 17:28:57,982 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v1/account/profile  
2020-05-29 17:28:57,987 [7] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:28:57,990 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:28:57,993 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Profile() on controller DncZeus.Api.Controllers.AccountController (DncZeus.Api).
2020-05-29 17:28:58,008 [7] INFO  Microsoft.AspNetCore.Authorization.DefaultAuthorizationService [(null)]  - Authorization was successful.
2020-05-29 17:28:58,011 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:28:58,036 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) - Validation state: Valid
2020-05-29 17:28:58,143 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (59ms) [Parameters=[@__Parse_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[ID], [x].[Code], [x].[Name], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser]
FROM [MisOrganization] AS [x]
WHERE [x].[ID] = @__Parse_0
2020-05-29 17:28:58,220 [10] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (40ms) [Parameters=[@__guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[EmpName], [x].[EmpNo], [x].[code], [x].[credate], [x].[creuser], [x].[depname], [x].[depno], [x].[email], [x].[enabled], [x].[jobname], [x].[jobno], [x].[moddate], [x].[moduser], [x].[pwd], [x].[telno], [x].[userLogo], [x].[username], [x].[userno], [x].[utype], [x].[wxAccount], [x].[wxId], [x].[wxMail], [x].[wxName], [x].[wxPhone], [x].[wxPwd]
FROM [Secuser] AS [x]
WHERE [x].[Guid] = @__guid_0
2020-05-29 17:28:58,260 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[Alias], [x].[BeforeCloseFun], [x].[Component], [x].[CreatedByUserGuid], [x].[CreatedByUserName], [x].[CreatedOn], [x].[Description], [x].[HideInMenu], [x].[Icon], [x].[IsDefaultRouter], [x].[IsDeleted], [x].[Level], [x].[ModifiedByUserGuid], [x].[ModifiedByUserName], [x].[ModifiedOn], [x].[Name], [x].[NotCache], [x].[ParentGuid], [x].[ParentName], [x].[Sort], [x].[Status], [x].[Url]
FROM [DncMenu] AS [x]
WHERE ([x].[IsDeleted] = 0) AND ([x].[Status] = 1)
2020-05-29 17:28:58,373 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (29ms) [Parameters=[@__user_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secuprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE [x].[userid] = @__user_Guid_0
ORDER BY [b0].[prgno]
2020-05-29 17:28:58,425 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (28ms) [Parameters=[@__groupid_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secgprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE CONVERT(VARCHAR(36), [x].[groupid]) = @__groupid_0
ORDER BY [b0].[prgno]
2020-05-29 17:28:58,429 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 389.3414ms.
2020-05-29 17:28:58,433 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:28:58,445 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) in 443.996ms
2020-05-29 17:28:58,451 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 470.7669ms 200 application/json; charset=utf-8
2020-05-29 17:28:59,969 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-05-29 17:28:59,972 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:28:59,975 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 11.2109ms 204 
2020-05-29 17:28:59,983 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-05-29 17:28:59,986 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:28:59,988 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:28:59,992 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "LoadMenuTree", controller = "Uprg"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult LoadMenuTree() on controller DncZeus.Api.Controllers.Api.Sec.UprgController (DncZeus.Api).
2020-05-29 17:28:59,997 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:29:00,352 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) - Validation state: Valid
2020-05-29 17:29:00,406 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (35ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[icon], [p].[sysname], [p].[sysno], [p].[sysorder]
FROM [Secsys] AS [p]
ORDER BY [p].[sysorder]
2020-05-29 17:29:00,472 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (34ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[funname], [p].[funno], [p].[funorder], [p].[icon], [p].[sysid]
FROM [Secfun] AS [p]
ORDER BY [p].[funorder]
2020-05-29 17:29:00,521 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[enabled], [x].[funid], [x].[icon], [x].[mainid], [x].[prgcomp], [x].[prgname], [x].[prgno], [x].[prgorder], [x].[prgtype], [x].[program], [x].[runtype], [x].[sysid]
FROM [Secprg] AS [x]
WHERE [x].[enabled] = 'Y'
ORDER BY [x].[prgorder]
2020-05-29 17:29:00,563 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[butid], [p].[butname], [p].[butno], [p].[butorder], [p].[funid], [p].[prgid], [p].[sysid]
FROM [Secprgbut] AS [p]
ORDER BY [p].[butorder]
2020-05-29 17:29:00,572 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 217.2742ms.
2020-05-29 17:29:00,574 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:29:00,601 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) in 605.5277ms
2020-05-29 17:29:00,605 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 625.0152ms 200 application/json; charset=utf-8
2020-05-29 17:29:00,635 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:29:00,639 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:00,642 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 7.1193ms 204 
2020-05-29 17:29:00,652 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:29:00,665 [7] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:29:00,675 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:00,693 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:29:00,705 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:29:00,752 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:29:00,810 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (32ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:29:00,816 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 60.0023ms.
2020-05-29 17:29:00,818 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:29:00,822 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 124.5914ms
2020-05-29 17:29:00,826 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 175.5589ms 200 application/json; charset=utf-8
2020-05-29 17:29:06,217 [12] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-05-29 17:29:06,222 [12] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:06,225 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-05-29 17:29:06,228 [12] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 11.4084ms 204 
2020-05-29 17:29:06,244 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:06,255 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-05-29 17:29:06,258 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 30.919ms 204 
2020-05-29 17:29:06,265 [7] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:29:06,268 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 140
2020-05-29 17:29:06,270 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:06,273 [8] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:29:06,276 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:06,283 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-05-29 17:29:06,287 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:29:06,289 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-05-29 17:29:06,292 [8] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:29:06,367 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:29:06,368 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:29:06,413 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-05-29 17:29:06,477 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (57ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                        from ManWorkshopOut as b
                                        left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        where  b.workProcessGuid=@p1 
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-05-29 17:29:06,482 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (27ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-05-29 17:29:06,486 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 113.441ms.
2020-05-29 17:29:06,491 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:29:06,532 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 243.2795ms
2020-05-29 17:29:06,536 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 290.4316ms 200 application/json; charset=utf-8
2020-05-29 17:29:06,539 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (43ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                    from ManWorkshopOut as b
                                    left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    where  b.workProcessGuid=@p1 
) AS [w]
2020-05-29 17:29:06,550 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 171.1917ms.
2020-05-29 17:29:06,554 [8] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:29:06,558 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 266.7366ms
2020-05-29 17:29:06,563 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 293.6344ms 200 application/json; charset=utf-8
2020-05-29 17:29:07,904 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8  
2020-05-29 17:29:07,905 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8  
2020-05-29 17:29:07,931 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workprocess/list?api-version=8  
2020-05-29 17:29:07,932 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:07,934 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:07,939 [10] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:07,942 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 36.0879ms 204 
2020-05-29 17:29:07,943 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 38.5923ms 204 
2020-05-29 17:29:07,949 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 37.6233ms 204 
2020-05-29 17:29:07,951 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8 application/json;charset=UTF-8 132
2020-05-29 17:29:07,953 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 140
2020-05-29 17:29:07,955 [12] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workprocess/list?api-version=8 application/json;charset=UTF-8 150
2020-05-29 17:29:07,958 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:29:07,971 [8] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:29:07,972 [12] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:29:07,974 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:07,976 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:07,982 [12] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:07,986 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkDate", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkDate(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-05-29 17:29:07,988 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:29:07,990 [12] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workprocess"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workprocess.WorkprocessRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkprocessController (DncZeus.Api).
2020-05-29 17:29:07,991 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-05-29 17:29:07,995 [12] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:29:08,002 [8] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:29:08,026 [12] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:29:08,107 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) - Validation state: Valid
2020-05-29 17:29:08,108 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-05-29 17:29:08,175 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (46ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__payload_workDate_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[cadre], [x].[cadreLeave], [x].[cadreRest], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[logistic], [x].[logisticLeave], [x].[logisticRest], [x].[moddate], [x].[moduser], [x].[workDate], [x].[worker], [x].[workerLeave], [x].[workerReste]
FROM [ManFactoryWorkdate] AS [x]
WHERE ([x].[factoryGuid] = @__payload_factoryGuid_0) AND ([x].[workDate] = @__payload_workDate_1)
2020-05-29 17:29:08,236 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (112ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty'  from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.qty) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=b.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=c.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=d.factoryGuid)
left join (
	select sum(outline.qty) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=e.factoryGuid)
left join (
select sum(outline.qty) as 'todayDoneOutQty',out.factoryGuid,out.Guid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.Guid,out.factoryGuid
) as g on(g.factoryGuid=f.factoryGuid)
2020-05-29 17:29:08,237 [12] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (48ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[factoryGuid], [t].[workCode], [t].[workName], [t].[rate], [t].[isvalid], [t].[credate], [t].[creuser], [t].[moddate], [t].[moduser], [t].[factoryName]
FROM (
    SELECT [a].[Guid], [a].[OrgID], [a].[factoryGuid], [a].[workCode], [a].[workName], [a].[rate], [a].[isvalid], [a].[credate], [a].[creuser], [a].[moddate], [a].[moduser], [b].[name] AS [factoryName], ROW_NUMBER() OVER(ORDER BY [a].[factoryGuid], [a].[workCode]) AS [__RowNumber__]
    FROM [ManWorkProcess] AS [a]
    INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
    WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-05-29 17:29:08,255 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 133.5628ms.
2020-05-29 17:29:08,285 [8] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:29:08,287 [12] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (35ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkProcess] AS [a]
INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
2020-05-29 17:29:08,290 [12] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 260.567ms.
2020-05-29 17:29:08,294 [12] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:29:08,299 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 303.5903ms
2020-05-29 17:29:08,301 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 348.0097ms 200 application/json; charset=utf-8
2020-05-29 17:29:08,311 [12] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) in 314.6087ms
2020-05-29 17:29:08,316 [12] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 359.8078ms 200 application/json; charset=utf-8
2020-05-29 17:29:08,331 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 217.9838ms.
2020-05-29 17:29:08,333 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:29:08,343 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) in 351.9573ms
2020-05-29 17:29:08,350 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 401.0364ms 200 application/json; charset=utf-8
2020-05-29 17:29:10,192 [11] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 176
2020-05-29 17:29:10,198 [11] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:29:10,202 [11] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:10,206 [11] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-05-29 17:29:10,209 [11] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:29:10,232 [11] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:29:10,269 [11] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (33ms) [Parameters=[@p0='?', @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                        from ManWorkshopOut as b
                                        left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        where  b.workProcessGuid=@p1 
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-05-29 17:29:10,300 [11] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (28ms) [Parameters=[@p0='?', @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                    from ManWorkshopOut as b
                                    left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    where  b.workProcessGuid=@p1 
) AS [w]
2020-05-29 17:29:10,303 [11] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 68.1229ms.
2020-05-29 17:29:10,306 [11] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:29:10,313 [11] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 104.4086ms
2020-05-29 17:29:10,316 [11] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 124.9858ms 200 application/json; charset=utf-8
2020-05-29 17:29:24,306 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-05-29 17:29:24,311 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:24,314 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 8.6326ms 204 
2020-05-29 17:29:24,319 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-05-29 17:29:24,322 [8] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:29:24,325 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:24,329 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-05-29 17:29:24,333 [8] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:29:24,354 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:29:24,385 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (28ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-05-29 17:29:24,412 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-05-29 17:29:24,420 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 58.5126ms.
2020-05-29 17:29:24,423 [8] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:29:24,429 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 93.2342ms
2020-05-29 17:29:24,436 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 114.0414ms 200 application/json; charset=utf-8
2020-05-29 17:29:29,782 [11] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/edit?api-version=8  
2020-05-29 17:29:29,785 [11] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:29,788 [11] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 7.0245ms 204 
2020-05-29 17:29:29,790 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/edit?api-version=8 application/json;charset=UTF-8 269
2020-05-29 17:29:29,793 [8] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:29:29,799 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:29,803 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Edit", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Edit(DncZeus.Api.ViewModels.Man.Factory.FactoryCreateViewModel) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-05-29 17:29:29,805 [8] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:29:29,839 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.Edit (DncZeus.Api) - Validation state: Valid
2020-05-29 17:29:29,899 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (44ms) [Parameters=[@__model_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[cadre], [x].[code], [x].[countType], [x].[credate], [x].[creuser], [x].[logistic], [x].[moddate], [x].[moduser], [x].[name], [x].[pertargetOut], [x].[worker]
FROM [ManFactory] AS [x]
WHERE [x].[Guid] = @__model_Guid_0
2020-05-29 17:29:29,970 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (25ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 1) (DbType = Byte), @p1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SET NOCOUNT ON;
UPDATE [ManFactory] SET [countType] = @p0, [moddate] = @p1
WHERE [Guid] = @p2;
SELECT @@ROWCOUNT;
2020-05-29 17:29:29,975 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.Edit (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 132.2908ms.
2020-05-29 17:29:29,980 [8] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:29:29,985 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.Edit (DncZeus.Api) in 178.718ms
2020-05-29 17:29:29,988 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 197.4942ms 200 application/json; charset=utf-8
2020-05-29 17:29:30,004 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-05-29 17:29:30,007 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:30,009 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 4.7139ms 204 
2020-05-29 17:29:30,015 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-05-29 17:29:30,017 [8] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:29:30,019 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:30,021 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-05-29 17:29:30,023 [8] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:29:30,040 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:29:30,063 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-05-29 17:29:30,087 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-05-29 17:29:30,097 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 48.4892ms.
2020-05-29 17:29:30,100 [8] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:29:30,102 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 78.5497ms
2020-05-29 17:29:30,108 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 90.9206ms 200 application/json; charset=utf-8
2020-05-29 17:29:30,423 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:29:30,425 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:30,428 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 4.4295ms 204 
2020-05-29 17:29:30,432 [11] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:29:30,434 [11] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:29:30,436 [11] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:30,439 [11] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:29:30,442 [11] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:29:30,462 [11] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:29:30,486 [11] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:29:30,488 [11] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23.75ms.
2020-05-29 17:29:30,491 [11] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:29:30,500 [11] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 52.3283ms
2020-05-29 17:29:30,504 [11] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 71.1155ms 200 application/json; charset=utf-8
2020-05-29 17:29:35,726 [12] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workprocess/list?api-version=8  
2020-05-29 17:29:35,736 [12] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:35,739 [12] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 13.4491ms 204 
2020-05-29 17:29:35,741 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workprocess/list?api-version=8 application/json;charset=UTF-8 115
2020-05-29 17:29:35,749 [8] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:29:35,752 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:35,755 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workprocess"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workprocess.WorkprocessRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkprocessController (DncZeus.Api).
2020-05-29 17:29:35,758 [8] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:29:35,783 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:29:35,813 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[factoryGuid], [t].[workCode], [t].[workName], [t].[rate], [t].[isvalid], [t].[credate], [t].[creuser], [t].[moddate], [t].[moduser], [t].[factoryName]
FROM (
    SELECT [a].[Guid], [a].[OrgID], [a].[factoryGuid], [a].[workCode], [a].[workName], [a].[rate], [a].[isvalid], [a].[credate], [a].[creuser], [a].[moddate], [a].[moduser], [b].[name] AS [factoryName], ROW_NUMBER() OVER(ORDER BY [a].[factoryGuid], [a].[workCode]) AS [__RowNumber__]
    FROM [ManWorkProcess] AS [a]
    INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-05-29 17:29:35,840 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkProcess] AS [a]
INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
2020-05-29 17:29:35,842 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 56.7905ms.
2020-05-29 17:29:35,845 [8] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:29:35,847 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) in 90.0294ms
2020-05-29 17:29:35,849 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 108.9728ms 200 application/json; charset=utf-8
2020-05-29 17:29:45,798 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v1/account/profile  
2020-05-29 17:29:45,802 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:45,811 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 9.8492ms 204 
2020-05-29 17:29:45,817 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v1/account/profile  
2020-05-29 17:29:45,824 [7] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:29:45,834 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:45,838 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Profile() on controller DncZeus.Api.Controllers.AccountController (DncZeus.Api).
2020-05-29 17:29:45,845 [7] INFO  Microsoft.AspNetCore.Authorization.DefaultAuthorizationService [(null)]  - Authorization was successful.
2020-05-29 17:29:45,850 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:29:45,872 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) - Validation state: Valid
2020-05-29 17:29:45,949 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (56ms) [Parameters=[@__Parse_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[ID], [x].[Code], [x].[Name], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser]
FROM [MisOrganization] AS [x]
WHERE [x].[ID] = @__Parse_0
2020-05-29 17:29:46,014 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (44ms) [Parameters=[@__guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[EmpName], [x].[EmpNo], [x].[code], [x].[credate], [x].[creuser], [x].[depname], [x].[depno], [x].[email], [x].[enabled], [x].[jobname], [x].[jobno], [x].[moddate], [x].[moduser], [x].[pwd], [x].[telno], [x].[userLogo], [x].[username], [x].[userno], [x].[utype], [x].[wxAccount], [x].[wxId], [x].[wxMail], [x].[wxName], [x].[wxPhone], [x].[wxPwd]
FROM [Secuser] AS [x]
WHERE [x].[Guid] = @__guid_0
2020-05-29 17:29:46,040 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[Alias], [x].[BeforeCloseFun], [x].[Component], [x].[CreatedByUserGuid], [x].[CreatedByUserName], [x].[CreatedOn], [x].[Description], [x].[HideInMenu], [x].[Icon], [x].[IsDefaultRouter], [x].[IsDeleted], [x].[Level], [x].[ModifiedByUserGuid], [x].[ModifiedByUserName], [x].[ModifiedOn], [x].[Name], [x].[NotCache], [x].[ParentGuid], [x].[ParentName], [x].[Sort], [x].[Status], [x].[Url]
FROM [DncMenu] AS [x]
WHERE ([x].[IsDeleted] = 0) AND ([x].[Status] = 1)
2020-05-29 17:29:46,069 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (25ms) [Parameters=[@__user_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secuprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE [x].[userid] = @__user_Guid_0
ORDER BY [b0].[prgno]
2020-05-29 17:29:46,096 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__groupid_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secgprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE CONVERT(VARCHAR(36), [x].[groupid]) = @__groupid_0
ORDER BY [b0].[prgno]
2020-05-29 17:29:46,098 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 223.5578ms.
2020-05-29 17:29:46,100 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:29:46,102 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) in 261.6552ms
2020-05-29 17:29:46,107 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 289.7796ms 200 application/json; charset=utf-8
2020-05-29 17:29:46,114 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-05-29 17:29:46,116 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:46,118 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 3.9664ms 204 
2020-05-29 17:29:46,123 [11] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-05-29 17:29:46,125 [11] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:29:46,130 [11] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:46,132 [11] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "LoadMenuTree", controller = "Uprg"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult LoadMenuTree() on controller DncZeus.Api.Controllers.Api.Sec.UprgController (DncZeus.Api).
2020-05-29 17:29:46,134 [11] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:29:46,165 [11] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) - Validation state: Valid
2020-05-29 17:29:46,203 [11] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (31ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[icon], [p].[sysname], [p].[sysno], [p].[sysorder]
FROM [Secsys] AS [p]
ORDER BY [p].[sysorder]
2020-05-29 17:29:46,239 [11] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (31ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[funname], [p].[funno], [p].[funorder], [p].[icon], [p].[sysid]
FROM [Secfun] AS [p]
ORDER BY [p].[funorder]
2020-05-29 17:29:46,268 [11] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[enabled], [x].[funid], [x].[icon], [x].[mainid], [x].[prgcomp], [x].[prgname], [x].[prgno], [x].[prgorder], [x].[prgtype], [x].[program], [x].[runtype], [x].[sysid]
FROM [Secprg] AS [x]
WHERE [x].[enabled] = 'Y'
ORDER BY [x].[prgorder]
2020-05-29 17:29:46,293 [11] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[butid], [p].[butname], [p].[butno], [p].[butorder], [p].[funid], [p].[prgid], [p].[sysid]
FROM [Secprgbut] AS [p]
ORDER BY [p].[butorder]
2020-05-29 17:29:46,297 [11] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 128.9591ms.
2020-05-29 17:29:46,300 [11] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:29:46,304 [11] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) in 169.2614ms
2020-05-29 17:29:46,317 [11] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 183.5517ms 200 application/json; charset=utf-8
2020-05-29 17:29:46,844 [11] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-05-29 17:29:46,847 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:29:46,848 [11] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:46,850 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-05-29 17:29:46,856 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:46,858 [11] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 13.5113ms 204 
2020-05-29 17:29:46,861 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:46,870 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 17.7599ms 204 
2020-05-29 17:29:46,875 [11] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-05-29 17:29:46,883 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 27.4395ms 204 
2020-05-29 17:29:46,885 [11] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:29:46,889 [12] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:29:46,894 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 140
2020-05-29 17:29:46,898 [11] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:46,924 [12] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:29:46,936 [11] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-05-29 17:29:46,941 [8] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:29:46,945 [11] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:29:46,948 [12] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:46,954 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:46,973 [12] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:29:46,979 [11] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:29:46,984 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-05-29 17:29:46,984 [12] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:29:47,005 [8] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:29:47,008 [11] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-05-29 17:29:47,029 [12] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:29:47,083 [11] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (41ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-05-29 17:29:47,085 [12] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (52ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:29:47,086 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:29:47,088 [11] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 103.6327ms.
2020-05-29 17:29:47,089 [12] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 58.0347ms.
2020-05-29 17:29:47,095 [11] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:29:47,115 [12] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:29:47,120 [11] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 176.8233ms
2020-05-29 17:29:47,122 [12] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 141.6319ms
2020-05-29 17:29:47,130 [11] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 260.3564ms 200 application/json; charset=utf-8
2020-05-29 17:29:47,132 [12] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 242.897ms 200 application/json; charset=utf-8
2020-05-29 17:29:47,139 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (45ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                        from ManWorkshopOut as b
                                        left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        where  b.workProcessGuid=@p1 
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-05-29 17:29:47,191 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (44ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                    from ManWorkshopOut as b
                                    left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    where  b.workProcessGuid=@p1 
) AS [w]
2020-05-29 17:29:47,197 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 105.0324ms.
2020-05-29 17:29:47,200 [8] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:29:47,208 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 197.1641ms
2020-05-29 17:29:47,216 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 319.7963ms 200 application/json; charset=utf-8
2020-05-29 17:29:48,344 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8  
2020-05-29 17:29:48,348 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:48,350 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workprocess/list?api-version=8  
2020-05-29 17:29:48,353 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8  
2020-05-29 17:29:48,363 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 12.9706ms 204 
2020-05-29 17:29:48,367 [10] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:48,369 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:48,370 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8 application/json;charset=UTF-8 132
2020-05-29 17:29:48,401 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 23.8177ms 204 
2020-05-29 17:29:48,403 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 23.4783ms 204 
2020-05-29 17:29:48,406 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workprocess/list?api-version=8 application/json;charset=UTF-8 150
2020-05-29 17:29:48,407 [7] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:29:48,408 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 140
2020-05-29 17:29:48,410 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:48,412 [10] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:29:48,415 [8] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:29:48,417 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkDate", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkDate(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-05-29 17:29:48,419 [10] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:48,421 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:48,423 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:29:48,424 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workprocess"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workprocess.WorkprocessRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkprocessController (DncZeus.Api).
2020-05-29 17:29:48,426 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-05-29 17:29:48,446 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) - Validation state: Valid
2020-05-29 17:29:48,449 [10] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:29:48,451 [8] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:29:48,518 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:29:48,520 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (47ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__payload_workDate_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[cadre], [x].[cadreLeave], [x].[cadreRest], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[logistic], [x].[logisticLeave], [x].[logisticRest], [x].[moddate], [x].[moduser], [x].[workDate], [x].[worker], [x].[workerLeave], [x].[workerReste]
FROM [ManFactoryWorkdate] AS [x]
WHERE ([x].[factoryGuid] = @__payload_factoryGuid_0) AND ([x].[workDate] = @__payload_workDate_1)
2020-05-29 17:29:48,522 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-05-29 17:29:48,568 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 116.6334ms.
2020-05-29 17:29:48,570 [10] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (46ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[factoryGuid], [t].[workCode], [t].[workName], [t].[rate], [t].[isvalid], [t].[credate], [t].[creuser], [t].[moddate], [t].[moduser], [t].[factoryName]
FROM (
    SELECT [a].[Guid], [a].[OrgID], [a].[factoryGuid], [a].[workCode], [a].[workName], [a].[rate], [a].[isvalid], [a].[credate], [a].[creuser], [a].[moddate], [a].[moduser], [b].[name] AS [factoryName], ROW_NUMBER() OVER(ORDER BY [a].[factoryGuid], [a].[workCode]) AS [__RowNumber__]
    FROM [ManWorkProcess] AS [a]
    INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
    WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-05-29 17:29:48,572 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:29:48,598 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) in 154.3861ms
2020-05-29 17:29:48,603 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (51ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty'  from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.qty) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=b.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=c.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=d.factoryGuid)
left join (
	select sum(outline.qty) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=e.factoryGuid)
left join (
select sum(outline.qty) as 'todayDoneOutQty',out.factoryGuid,out.Guid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.Guid,out.factoryGuid
) as g on(g.factoryGuid=f.factoryGuid)
2020-05-29 17:29:48,605 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 232.3035ms 200 application/json; charset=utf-8
2020-05-29 17:29:48,607 [10] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (28ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkProcess] AS [a]
INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
2020-05-29 17:29:48,612 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 84.3795ms.
2020-05-29 17:29:48,613 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 88.1409ms.
2020-05-29 17:29:48,616 [8] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:29:48,618 [10] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:29:48,620 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 172.1337ms
2020-05-29 17:29:48,623 [10] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) in 192.0319ms
2020-05-29 17:29:48,625 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 216.8204ms 200 application/json; charset=utf-8
2020-05-29 17:29:48,630 [10] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 222.1193ms 200 application/json; charset=utf-8
2020-05-29 17:29:50,083 [18] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 176
2020-05-29 17:29:50,086 [18] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:29:50,090 [18] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:29:50,094 [18] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-05-29 17:29:50,097 [18] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:29:50,119 [18] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:29:50,153 [18] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (30ms) [Parameters=[@p0='?', @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                        from ManWorkshopOut as b
                                        left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        where  b.workProcessGuid=@p1 
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-05-29 17:29:50,184 [18] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (28ms) [Parameters=[@p0='?', @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                    from ManWorkshopOut as b
                                    left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    where  b.workProcessGuid=@p1 
) AS [w]
2020-05-29 17:29:50,187 [18] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 66.1607ms.
2020-05-29 17:29:50,189 [18] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:29:50,191 [18] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 94.9769ms
2020-05-29 17:29:50,194 [18] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 111.2048ms 200 application/json; charset=utf-8
2020-05-29 17:30:16,754 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:30:16,769 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:30:16,783 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 21.901ms 204 
2020-05-29 17:30:16,787 [19] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:30:16,791 [19] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:30:16,800 [19] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:30:16,803 [19] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:30:16,806 [19] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:30:16,835 [19] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:30:16,866 [19] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (26ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:30:16,873 [19] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 31.6483ms.
2020-05-29 17:30:16,879 [19] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:30:16,884 [19] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 77.0109ms
2020-05-29 17:30:16,890 [19] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 102.013ms 200 application/json; charset=utf-8
2020-05-29 17:30:18,519 [19] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getMonthPlan?api-version=8  
2020-05-29 17:30:18,522 [19] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:30:18,528 [19] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.8561ms 204 
2020-05-29 17:30:18,531 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getMonthPlan?api-version=8 application/json;charset=UTF-8 108
2020-05-29 17:30:18,535 [8] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:30:18,537 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:30:18,542 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetMonthPlan", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetMonthPlan(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.PlanRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-05-29 17:30:18,547 [8] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:30:18,574 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetMonthPlan (DncZeus.Api) - Validation state: Valid
2020-05-29 17:30:18,617 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (29ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__payload_yy_1='?' (Size = 10) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[MM], [x].[OrgID], [x].[YY], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[moddate], [x].[moduser], [x].[outqty]
FROM [ManFactoryMonPlan] AS [x]
WHERE ([x].[factoryGuid] = @__payload_factoryGuid_0) AND ([x].[YY] = @__payload_yy_1)
2020-05-29 17:30:18,626 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetMonthPlan (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 48.4019ms.
2020-05-29 17:30:18,629 [8] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:30:18,634 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetMonthPlan (DncZeus.Api) in 88.3238ms
2020-05-29 17:30:18,637 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 105.6414ms 200 application/json; charset=utf-8
2020-05-29 17:30:21,274 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/outsplit/list?api-version=8  
2020-05-29 17:30:21,276 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:30:21,281 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.344ms 204 
2020-05-29 17:30:21,293 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/outsplit/list?api-version=8 application/json;charset=UTF-8 149
2020-05-29 17:30:21,296 [9] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:30:21,301 [9] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:30:21,315 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Outsplit"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.OutSplit.OutsplitRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.OutsplitController (DncZeus.Api).
2020-05-29 17:30:21,319 [9] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:30:21,350 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.OutsplitController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:30:21,410 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (31ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid0], [t].[OrgID], [t].[factoryGuid], [t].[countType], [t].[ordCode], [t].[itemCode], [t].[itemName], [t].[status], [t].[creuser], [t].[credate], [t].[moduser], [t].[moddate], [t].[lineGuid], [t].[processGuid], [t].[workCode], [t].[workName], [t].[rate]
FROM (
    SELECT [a].[Guid] AS [Guid0], [a].[OrgID], [a].[factoryGuid], [a].[countType], [a].[ordCode], [a].[itemCode], [a].[itemName], [a].[status], [a].[creuser], [a].[credate], [a].[moduser], [a].[moddate], [b].[Guid] AS [lineGuid], [b0].[Guid] AS [processGuid], [b0].[workCode], [b0].[workName], [b0].[rate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManOutSplit] AS [a]
    INNER JOIN [ManOutSplitLine] AS [b] ON [a].[Guid] = [b].[workProcessGuid]
    INNER JOIN [ManWorkProcess] AS [b0] ON [b].[ProcessGuid] = [b0].[Guid]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-05-29 17:30:21,448 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManOutSplit] AS [a]
INNER JOIN [ManOutSplitLine] AS [b] ON [a].[Guid] = [b].[workProcessGuid]
INNER JOIN [ManWorkProcess] AS [b0] ON [b].[ProcessGuid] = [b0].[Guid]
2020-05-29 17:30:21,450 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.OutsplitController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 97.5022ms.
2020-05-29 17:30:21,452 [9] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:30:21,464 [9] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.OutsplitController.List (DncZeus.Api) in 145.6845ms
2020-05-29 17:30:21,467 [9] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 176.6747ms 200 application/json; charset=utf-8
2020-05-29 17:30:23,273 [19] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getMonthPlan?api-version=8 application/json;charset=UTF-8 108
2020-05-29 17:30:23,279 [19] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:30:23,282 [19] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:30:23,285 [19] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetMonthPlan", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetMonthPlan(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.PlanRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-05-29 17:30:23,288 [19] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:30:23,312 [19] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetMonthPlan (DncZeus.Api) - Validation state: Valid
2020-05-29 17:30:23,337 [19] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__payload_yy_1='?' (Size = 10) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[MM], [x].[OrgID], [x].[YY], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[moddate], [x].[moduser], [x].[outqty]
FROM [ManFactoryMonPlan] AS [x]
WHERE ([x].[factoryGuid] = @__payload_factoryGuid_0) AND ([x].[YY] = @__payload_yy_1)
2020-05-29 17:30:23,342 [19] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetMonthPlan (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 25.939ms.
2020-05-29 17:30:23,351 [19] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:30:23,354 [19] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetMonthPlan (DncZeus.Api) in 65.8437ms
2020-05-29 17:30:23,360 [19] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 82.5928ms 200 application/json; charset=utf-8
2020-05-29 17:30:44,650 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v1/account/profile  
2020-05-29 17:30:44,661 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:30:44,665 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 13.3479ms 204 
2020-05-29 17:30:44,685 [18] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v1/account/profile  
2020-05-29 17:30:44,688 [18] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:30:44,693 [18] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:30:44,697 [18] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Profile() on controller DncZeus.Api.Controllers.AccountController (DncZeus.Api).
2020-05-29 17:30:44,702 [18] INFO  Microsoft.AspNetCore.Authorization.DefaultAuthorizationService [(null)]  - Authorization was successful.
2020-05-29 17:30:44,705 [18] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:30:44,727 [18] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) - Validation state: Valid
2020-05-29 17:30:44,756 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (25ms) [Parameters=[@__Parse_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[ID], [x].[Code], [x].[Name], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser]
FROM [MisOrganization] AS [x]
WHERE [x].[ID] = @__Parse_0
2020-05-29 17:30:44,801 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (43ms) [Parameters=[@__guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[EmpName], [x].[EmpNo], [x].[code], [x].[credate], [x].[creuser], [x].[depname], [x].[depno], [x].[email], [x].[enabled], [x].[jobname], [x].[jobno], [x].[moddate], [x].[moduser], [x].[pwd], [x].[telno], [x].[userLogo], [x].[username], [x].[userno], [x].[utype], [x].[wxAccount], [x].[wxId], [x].[wxMail], [x].[wxName], [x].[wxPhone], [x].[wxPwd]
FROM [Secuser] AS [x]
WHERE [x].[Guid] = @__guid_0
2020-05-29 17:30:44,822 [18] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[Alias], [x].[BeforeCloseFun], [x].[Component], [x].[CreatedByUserGuid], [x].[CreatedByUserName], [x].[CreatedOn], [x].[Description], [x].[HideInMenu], [x].[Icon], [x].[IsDefaultRouter], [x].[IsDeleted], [x].[Level], [x].[ModifiedByUserGuid], [x].[ModifiedByUserName], [x].[ModifiedOn], [x].[Name], [x].[NotCache], [x].[ParentGuid], [x].[ParentName], [x].[Sort], [x].[Status], [x].[Url]
FROM [DncMenu] AS [x]
WHERE ([x].[IsDeleted] = 0) AND ([x].[Status] = 1)
2020-05-29 17:30:44,848 [18] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__user_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secuprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE [x].[userid] = @__user_Guid_0
ORDER BY [b0].[prgno]
2020-05-29 17:30:44,870 [18] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__groupid_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secgprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE CONVERT(VARCHAR(36), [x].[groupid]) = @__groupid_0
ORDER BY [b0].[prgno]
2020-05-29 17:30:44,872 [18] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 142.9945ms.
2020-05-29 17:30:44,875 [18] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:30:44,878 [18] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) in 179.1332ms
2020-05-29 17:30:44,881 [18] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 199.3973ms 200 application/json; charset=utf-8
2020-05-29 17:30:44,886 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-05-29 17:30:44,888 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:30:44,892 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 4.2953ms 204 
2020-05-29 17:30:44,894 [19] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-05-29 17:30:44,896 [19] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:30:44,898 [19] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:30:44,900 [19] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "LoadMenuTree", controller = "Uprg"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult LoadMenuTree() on controller DncZeus.Api.Controllers.Api.Sec.UprgController (DncZeus.Api).
2020-05-29 17:30:44,902 [19] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:30:44,920 [19] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) - Validation state: Valid
2020-05-29 17:30:44,943 [19] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[icon], [p].[sysname], [p].[sysno], [p].[sysorder]
FROM [Secsys] AS [p]
ORDER BY [p].[sysorder]
2020-05-29 17:30:44,966 [19] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[funname], [p].[funno], [p].[funorder], [p].[icon], [p].[sysid]
FROM [Secfun] AS [p]
ORDER BY [p].[funorder]
2020-05-29 17:30:44,992 [19] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[enabled], [x].[funid], [x].[icon], [x].[mainid], [x].[prgcomp], [x].[prgname], [x].[prgno], [x].[prgorder], [x].[prgtype], [x].[program], [x].[runtype], [x].[sysid]
FROM [Secprg] AS [x]
WHERE [x].[enabled] = 'Y'
ORDER BY [x].[prgorder]
2020-05-29 17:30:45,018 [19] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[butid], [p].[butname], [p].[butno], [p].[butorder], [p].[funid], [p].[prgid], [p].[sysid]
FROM [Secprgbut] AS [p]
ORDER BY [p].[butorder]
2020-05-29 17:30:45,021 [19] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 98.704ms.
2020-05-29 17:30:45,023 [19] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:30:45,029 [19] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) in 125.0031ms
2020-05-29 17:30:45,032 [19] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 137.877ms 200 application/json; charset=utf-8
2020-05-29 17:30:45,570 [19] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-05-29 17:30:45,572 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:30:45,579 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-05-29 17:30:45,580 [19] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:30:45,584 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:30:45,590 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:30:45,671 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 31.6384ms 204 
2020-05-29 17:30:45,593 [19] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 19.4995ms 204 
2020-05-29 17:30:45,683 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 105.3863ms 204 
2020-05-29 17:30:45,688 [19] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-05-29 17:30:45,693 [24] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 140
2020-05-29 17:30:45,695 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:30:45,696 [19] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:30:45,701 [7] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:30:45,702 [19] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:30:45,704 [24] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:30:45,708 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:30:45,713 [19] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-05-29 17:30:45,714 [24] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:30:45,720 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:30:45,721 [24] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-05-29 17:30:45,729 [19] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:30:45,732 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:30:45,756 [24] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:30:45,777 [19] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:30:45,780 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:30:45,816 [24] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:30:45,818 [19] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (36ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-05-29 17:30:45,855 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (36ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:30:45,860 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 42.0993ms.
2020-05-29 17:30:45,879 [24] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (41ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                        from ManWorkshopOut as b
                                        left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        where  b.workProcessGuid=@p1 
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-05-29 17:30:45,881 [19] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-05-29 17:30:45,882 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:30:45,902 [19] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 103.8576ms.
2020-05-29 17:30:45,904 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 179.3845ms
2020-05-29 17:30:45,909 [19] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:30:45,913 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 225.6988ms 200 application/json; charset=utf-8
2020-05-29 17:30:45,916 [19] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 196.549ms
2020-05-29 17:30:45,918 [24] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (33ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                    from ManWorkshopOut as b
                                    left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    where  b.workProcessGuid=@p1 
) AS [w]
2020-05-29 17:30:45,920 [19] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 237.7844ms 200 application/json; charset=utf-8
2020-05-29 17:30:45,925 [24] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 102.9646ms.
2020-05-29 17:30:45,929 [24] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:30:45,933 [24] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 206.9483ms
2020-05-29 17:30:45,936 [24] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 245.8518ms 200 application/json; charset=utf-8
2020-05-29 17:31:02,186 [23] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8  
2020-05-29 17:31:02,195 [25] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8  
2020-05-29 17:31:02,205 [23] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:31:02,206 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workprocess/list?api-version=8  
2020-05-29 17:31:02,210 [25] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:31:02,213 [23] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 44.4176ms 204 
2020-05-29 17:31:02,215 [25] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 48.9246ms 204 
2020-05-29 17:31:02,218 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:31:02,248 [23] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8 application/json;charset=UTF-8 132
2020-05-29 17:31:02,250 [25] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 140
2020-05-29 17:31:02,252 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 53.4549ms 204 
2020-05-29 17:31:02,254 [23] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:31:02,257 [25] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:31:02,260 [23] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:31:02,264 [25] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:31:02,265 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workprocess/list?api-version=8 application/json;charset=UTF-8 150
2020-05-29 17:31:02,268 [25] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-05-29 17:31:02,267 [23] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkDate", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkDate(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-05-29 17:31:02,271 [7] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:31:02,272 [25] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:31:02,274 [23] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:31:02,278 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:31:02,300 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workprocess"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workprocess.WorkprocessRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkprocessController (DncZeus.Api).
2020-05-29 17:31:02,320 [25] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-05-29 17:31:02,322 [23] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) - Validation state: Valid
2020-05-29 17:31:02,330 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:31:02,419 [23] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (72ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__payload_workDate_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[cadre], [x].[cadreLeave], [x].[cadreRest], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[logistic], [x].[logisticLeave], [x].[logisticRest], [x].[moddate], [x].[moduser], [x].[workDate], [x].[worker], [x].[workerLeave], [x].[workerReste]
FROM [ManFactoryWorkdate] AS [x]
WHERE ([x].[factoryGuid] = @__payload_factoryGuid_0) AND ([x].[workDate] = @__payload_workDate_1)
2020-05-29 17:31:02,422 [25] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (94ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty'  from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.qty) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=b.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=c.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=d.factoryGuid)
left join (
	select sum(outline.qty) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=e.factoryGuid)
left join (
select sum(outline.qty) as 'todayDoneOutQty',out.factoryGuid,out.Guid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.Guid,out.factoryGuid
) as g on(g.factoryGuid=f.factoryGuid)
2020-05-29 17:31:02,426 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:31:02,428 [23] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 95.9396ms.
2020-05-29 17:31:02,430 [25] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 100.9719ms.
2020-05-29 17:31:02,434 [23] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:31:02,435 [25] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:31:02,461 [23] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) in 166.0507ms
2020-05-29 17:31:02,462 [25] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 189.5421ms
2020-05-29 17:31:02,466 [23] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 244.4116ms 200 application/json; charset=utf-8
2020-05-29 17:31:02,469 [25] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 237.9683ms 200 application/json; charset=utf-8
2020-05-29 17:31:02,470 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (31ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[factoryGuid], [t].[workCode], [t].[workName], [t].[rate], [t].[isvalid], [t].[credate], [t].[creuser], [t].[moddate], [t].[moduser], [t].[factoryName]
FROM (
    SELECT [a].[Guid], [a].[OrgID], [a].[factoryGuid], [a].[workCode], [a].[workName], [a].[rate], [a].[isvalid], [a].[credate], [a].[creuser], [a].[moddate], [a].[moduser], [b].[name] AS [factoryName], ROW_NUMBER() OVER(ORDER BY [a].[factoryGuid], [a].[workCode]) AS [__RowNumber__]
    FROM [ManWorkProcess] AS [a]
    INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
    WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-05-29 17:31:02,492 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkProcess] AS [a]
INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
2020-05-29 17:31:02,494 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 62.9837ms.
2020-05-29 17:31:02,496 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:31:02,499 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) in 175.2058ms
2020-05-29 17:31:02,502 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 239.7434ms 200 application/json; charset=utf-8
2020-05-29 17:31:04,584 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getMonthPlan?api-version=8  
2020-05-29 17:31:04,587 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:31:04,594 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 7.218ms 204 
2020-05-29 17:31:04,598 [18] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getMonthPlan?api-version=8 application/json;charset=UTF-8 108
2020-05-29 17:31:04,601 [18] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:31:04,603 [18] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:31:04,608 [18] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetMonthPlan", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetMonthPlan(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.PlanRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-05-29 17:31:04,611 [18] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:31:04,631 [18] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetMonthPlan (DncZeus.Api) - Validation state: Valid
2020-05-29 17:31:04,652 [18] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (18ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__payload_yy_1='?' (Size = 10) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[MM], [x].[OrgID], [x].[YY], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[moddate], [x].[moduser], [x].[outqty]
FROM [ManFactoryMonPlan] AS [x]
WHERE ([x].[factoryGuid] = @__payload_factoryGuid_0) AND ([x].[YY] = @__payload_yy_1)
2020-05-29 17:31:04,654 [18] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetMonthPlan (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 21.0532ms.
2020-05-29 17:31:04,657 [18] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:31:04,659 [18] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetMonthPlan (DncZeus.Api) in 48.5131ms
2020-05-29 17:31:04,662 [18] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 64.3316ms 200 application/json; charset=utf-8
2020-05-29 17:31:15,459 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:31:15,462 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:31:15,469 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 6.8545ms 204 
2020-05-29 17:31:15,472 [18] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:31:15,477 [18] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:31:15,480 [18] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:31:15,482 [18] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:31:15,489 [18] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:31:15,515 [18] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:31:15,543 [18] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:31:15,547 [18] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 27.465ms.
2020-05-29 17:31:15,550 [18] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:31:15,552 [18] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 65.5784ms
2020-05-29 17:31:15,554 [18] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 83.7029ms 200 application/json; charset=utf-8
2020-05-29 17:31:27,275 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v1/account/profile  
2020-05-29 17:31:27,278 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:31:27,281 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 6.1388ms 204 
2020-05-29 17:31:27,287 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v1/account/profile  
2020-05-29 17:31:27,289 [7] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:31:27,292 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:31:27,296 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Profile() on controller DncZeus.Api.Controllers.AccountController (DncZeus.Api).
2020-05-29 17:31:27,299 [7] INFO  Microsoft.AspNetCore.Authorization.DefaultAuthorizationService [(null)]  - Authorization was successful.
2020-05-29 17:31:27,305 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:31:27,338 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) - Validation state: Valid
2020-05-29 17:31:27,380 [25] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (37ms) [Parameters=[@__Parse_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[ID], [x].[Code], [x].[Name], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser]
FROM [MisOrganization] AS [x]
WHERE [x].[ID] = @__Parse_0
2020-05-29 17:31:27,413 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (30ms) [Parameters=[@__guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[EmpName], [x].[EmpNo], [x].[code], [x].[credate], [x].[creuser], [x].[depname], [x].[depno], [x].[email], [x].[enabled], [x].[jobname], [x].[jobno], [x].[moddate], [x].[moduser], [x].[pwd], [x].[telno], [x].[userLogo], [x].[username], [x].[userno], [x].[utype], [x].[wxAccount], [x].[wxId], [x].[wxMail], [x].[wxName], [x].[wxPhone], [x].[wxPwd]
FROM [Secuser] AS [x]
WHERE [x].[Guid] = @__guid_0
2020-05-29 17:31:27,437 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[Alias], [x].[BeforeCloseFun], [x].[Component], [x].[CreatedByUserGuid], [x].[CreatedByUserName], [x].[CreatedOn], [x].[Description], [x].[HideInMenu], [x].[Icon], [x].[IsDefaultRouter], [x].[IsDeleted], [x].[Level], [x].[ModifiedByUserGuid], [x].[ModifiedByUserName], [x].[ModifiedOn], [x].[Name], [x].[NotCache], [x].[ParentGuid], [x].[ParentName], [x].[Sort], [x].[Status], [x].[Url]
FROM [DncMenu] AS [x]
WHERE ([x].[IsDeleted] = 0) AND ([x].[Status] = 1)
2020-05-29 17:31:27,462 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__user_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secuprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE [x].[userid] = @__user_Guid_0
ORDER BY [b0].[prgno]
2020-05-29 17:31:27,484 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__groupid_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secgprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE CONVERT(VARCHAR(36), [x].[groupid]) = @__groupid_0
ORDER BY [b0].[prgno]
2020-05-29 17:31:27,486 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 145.6034ms.
2020-05-29 17:31:27,488 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:31:27,491 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) in 191.9813ms
2020-05-29 17:31:27,493 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 207.3603ms 200 application/json; charset=utf-8
2020-05-29 17:31:27,501 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-05-29 17:31:27,503 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:31:27,506 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 3.8015ms 204 
2020-05-29 17:31:27,509 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-05-29 17:31:27,511 [7] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:31:27,513 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:31:27,515 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "LoadMenuTree", controller = "Uprg"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult LoadMenuTree() on controller DncZeus.Api.Controllers.Api.Sec.UprgController (DncZeus.Api).
2020-05-29 17:31:27,518 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:31:27,534 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) - Validation state: Valid
2020-05-29 17:31:27,555 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[icon], [p].[sysname], [p].[sysno], [p].[sysorder]
FROM [Secsys] AS [p]
ORDER BY [p].[sysorder]
2020-05-29 17:31:27,580 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[funname], [p].[funno], [p].[funorder], [p].[icon], [p].[sysid]
FROM [Secfun] AS [p]
ORDER BY [p].[funorder]
2020-05-29 17:31:27,605 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[enabled], [x].[funid], [x].[icon], [x].[mainid], [x].[prgcomp], [x].[prgname], [x].[prgno], [x].[prgorder], [x].[prgtype], [x].[program], [x].[runtype], [x].[sysid]
FROM [Secprg] AS [x]
WHERE [x].[enabled] = 'Y'
ORDER BY [x].[prgorder]
2020-05-29 17:31:27,633 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[butid], [p].[butname], [p].[butno], [p].[butorder], [p].[funid], [p].[prgid], [p].[sysid]
FROM [Secprgbut] AS [p]
ORDER BY [p].[butorder]
2020-05-29 17:31:27,637 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 99.9643ms.
2020-05-29 17:31:27,641 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:31:27,644 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) in 126.2815ms
2020-05-29 17:31:27,647 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 137.7424ms 200 application/json; charset=utf-8
2020-05-29 17:31:28,219 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-05-29 17:31:28,224 [18] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:31:28,226 [23] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-05-29 17:31:28,229 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:31:28,246 [18] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:31:28,248 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 24.3717ms 204 
2020-05-29 17:31:28,254 [23] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:31:28,266 [18] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 35.6658ms 204 
2020-05-29 17:31:28,267 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-05-29 17:31:28,270 [23] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 36.5878ms 204 
2020-05-29 17:31:28,279 [18] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:31:28,280 [8] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:31:28,281 [23] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 140
2020-05-29 17:31:28,285 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:31:28,309 [18] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:31:28,313 [23] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:31:28,315 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-05-29 17:31:28,317 [18] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:31:28,319 [23] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:31:28,324 [18] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:31:28,329 [8] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:31:28,330 [23] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-05-29 17:31:28,332 [18] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:31:28,358 [23] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:31:28,399 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:31:28,454 [18] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:31:28,478 [23] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:31:28,519 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (64ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-05-29 17:31:28,520 [18] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (38ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:31:28,525 [18] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 42.2686ms.
2020-05-29 17:31:28,550 [23] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (66ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                        from ManWorkshopOut as b
                                        left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        where  b.workProcessGuid=@p1 
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-05-29 17:31:28,551 [18] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:31:28,553 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-05-29 17:31:28,561 [18] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 227.2076ms
2020-05-29 17:31:28,583 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 103.9193ms.
2020-05-29 17:31:28,588 [18] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 312.486ms 200 application/json; charset=utf-8
2020-05-29 17:31:28,592 [8] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:31:28,597 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 274.279ms
2020-05-29 17:31:28,598 [23] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (42ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                    from ManWorkshopOut as b
                                    left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    where  b.workProcessGuid=@p1 
) AS [w]
2020-05-29 17:31:28,600 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 339.8901ms 200 application/json; charset=utf-8
2020-05-29 17:31:28,602 [23] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 120.6796ms.
2020-05-29 17:31:28,608 [23] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:31:28,611 [23] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 275.9263ms
2020-05-29 17:31:28,615 [23] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 338.6226ms 200 application/json; charset=utf-8
2020-05-29 17:31:31,241 [18] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8  
2020-05-29 17:31:31,242 [19] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8  
2020-05-29 17:31:31,244 [25] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workprocess/list?api-version=8  
2020-05-29 17:31:31,257 [18] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:31:31,259 [19] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:31:31,264 [25] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:31:31,268 [18] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 22.8771ms 204 
2020-05-29 17:31:31,271 [19] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 28.8427ms 204 
2020-05-29 17:31:31,276 [25] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 26.795ms 204 
2020-05-29 17:31:31,282 [19] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 140
2020-05-29 17:31:31,291 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8 application/json;charset=UTF-8 132
2020-05-29 17:31:31,312 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workprocess/list?api-version=8 application/json;charset=UTF-8 150
2020-05-29 17:31:31,316 [7] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:31:31,318 [19] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:31:31,321 [8] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:31:31,325 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:31:31,331 [19] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:31:31,333 [8] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:31:31,335 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkDate", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkDate(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-05-29 17:31:31,341 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workprocess"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workprocess.WorkprocessRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkprocessController (DncZeus.Api).
2020-05-29 17:31:31,337 [19] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-05-29 17:31:31,346 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:31:31,348 [8] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:31:31,352 [19] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:31:31,384 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:31:31,385 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) - Validation state: Valid
2020-05-29 17:31:31,404 [19] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-05-29 17:31:31,464 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (39ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__payload_workDate_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[cadre], [x].[cadreLeave], [x].[cadreRest], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[logistic], [x].[logisticLeave], [x].[logisticRest], [x].[moddate], [x].[moduser], [x].[workDate], [x].[worker], [x].[workerLeave], [x].[workerReste]
FROM [ManFactoryWorkdate] AS [x]
WHERE ([x].[factoryGuid] = @__payload_factoryGuid_0) AND ([x].[workDate] = @__payload_workDate_1)
2020-05-29 17:31:31,466 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (58ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[factoryGuid], [t].[workCode], [t].[workName], [t].[rate], [t].[isvalid], [t].[credate], [t].[creuser], [t].[moddate], [t].[moduser], [t].[factoryName]
FROM (
    SELECT [a].[Guid], [a].[OrgID], [a].[factoryGuid], [a].[workCode], [a].[workName], [a].[rate], [a].[isvalid], [a].[credate], [a].[creuser], [a].[moddate], [a].[moduser], [b].[name] AS [factoryName], ROW_NUMBER() OVER(ORDER BY [a].[factoryGuid], [a].[workCode]) AS [__RowNumber__]
    FROM [ManWorkProcess] AS [a]
    INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
    WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-05-29 17:31:31,470 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 65.9433ms.
2020-05-29 17:31:31,495 [19] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (52ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty'  from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.qty) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=b.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=c.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=d.factoryGuid)
left join (
	select sum(outline.qty) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=e.factoryGuid)
left join (
select sum(outline.qty) as 'todayDoneOutQty',out.factoryGuid,out.Guid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.Guid,out.factoryGuid
) as g on(g.factoryGuid=f.factoryGuid)
2020-05-29 17:31:31,498 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:31:31,499 [8] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (27ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkProcess] AS [a]
INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
2020-05-29 17:31:31,507 [19] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 59.4804ms.
2020-05-29 17:31:31,510 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) in 160.8669ms
2020-05-29 17:31:31,512 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 116.3109ms.
2020-05-29 17:31:31,518 [19] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:31:31,528 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 236.4636ms 200 application/json; charset=utf-8
2020-05-29 17:31:31,533 [8] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:31:31,536 [19] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 178.1673ms
2020-05-29 17:31:31,541 [8] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) in 195.2077ms
2020-05-29 17:31:31,553 [19] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 261.2342ms 200 application/json; charset=utf-8
2020-05-29 17:31:31,559 [8] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 252.0398ms 200 application/json; charset=utf-8
2020-05-29 17:31:33,086 [18] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 176
2020-05-29 17:31:33,091 [18] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:31:33,096 [18] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:31:33,098 [18] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-05-29 17:31:33,100 [18] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:31:33,118 [18] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:31:33,150 [18] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (30ms) [Parameters=[@p0='?', @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                        from ManWorkshopOut as b
                                        left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        where  b.workProcessGuid=@p1 
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-05-29 17:31:33,183 [18] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (29ms) [Parameters=[@p0='?', @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                    from ManWorkshopOut as b
                                    left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    where  b.workProcessGuid=@p1 
) AS [w]
2020-05-29 17:31:33,186 [18] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 65.6533ms.
2020-05-29 17:31:33,193 [18] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:31:33,196 [18] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 95.7739ms
2020-05-29 17:31:33,203 [18] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 112.7314ms 200 application/json; charset=utf-8
2020-05-29 17:31:58,084 [31] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:31:58,101 [31] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:31:58,104 [31] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 20.5489ms 204 
2020-05-29 17:31:58,109 [31] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:31:58,119 [31] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:31:58,121 [31] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:31:58,127 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:31:58,130 [31] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:31:58,150 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:31:58,174 [31] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:31:58,177 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 24.7766ms.
2020-05-29 17:31:58,179 [31] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:31:58,181 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 51.7911ms
2020-05-29 17:31:58,185 [31] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 75.9584ms 200 application/json; charset=utf-8
2020-05-29 17:32:23,312 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-05-29 17:32:23,333 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:32:23,363 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 25.9164ms 204 
2020-05-29 17:32:23,379 [30] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-05-29 17:32:23,383 [30] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:32:23,387 [30] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:32:23,401 [30] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-05-29 17:32:23,408 [30] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:32:23,436 [30] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:32:23,461 [30] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-05-29 17:32:23,483 [30] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-05-29 17:32:23,485 [30] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 47.4068ms.
2020-05-29 17:32:23,488 [30] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:32:23,492 [30] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 87.9034ms
2020-05-29 17:32:23,494 [30] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 130.4508ms 200 application/json; charset=utf-8
2020-05-29 17:32:28,081 [32] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:32:28,083 [32] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:32:28,086 [32] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.1637ms 204 
2020-05-29 17:32:28,093 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:32:28,096 [7] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:32:28,100 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:32:28,102 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:32:28,110 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:32:28,134 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:32:28,166 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (29ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:32:28,169 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 31.9326ms.
2020-05-29 17:32:28,176 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:32:28,179 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 73.3958ms
2020-05-29 17:32:28,182 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 92.2442ms 200 application/json; charset=utf-8
2020-05-29 17:32:30,555 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/edit?api-version=8  
2020-05-29 17:32:30,558 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:32:30,560 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.2091ms 204 
2020-05-29 17:32:30,563 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/edit?api-version=8 application/json;charset=UTF-8 269
2020-05-29 17:32:30,565 [7] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:32:30,567 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:32:30,569 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Edit", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Edit(DncZeus.Api.ViewModels.Man.Factory.FactoryCreateViewModel) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-05-29 17:32:30,571 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:32:30,590 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.Edit (DncZeus.Api) - Validation state: Valid
2020-05-29 17:32:30,618 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__model_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[cadre], [x].[code], [x].[countType], [x].[credate], [x].[creuser], [x].[logistic], [x].[moddate], [x].[moduser], [x].[name], [x].[pertargetOut], [x].[worker]
FROM [ManFactory] AS [x]
WHERE [x].[Guid] = @__model_Guid_0
2020-05-29 17:32:30,668 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 1) (DbType = Byte), @p1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SET NOCOUNT ON;
UPDATE [ManFactory] SET [countType] = @p0, [moddate] = @p1
WHERE [Guid] = @p2;
SELECT @@ROWCOUNT;
2020-05-29 17:32:30,673 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.Edit (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 79.0946ms.
2020-05-29 17:32:30,677 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:32:30,680 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.Edit (DncZeus.Api) in 108.763ms
2020-05-29 17:32:30,683 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 120.0275ms 200 application/json; charset=utf-8
2020-05-29 17:32:30,704 [33] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-05-29 17:32:30,707 [33] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:32:30,710 [33] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.7426ms 204 
2020-05-29 17:32:30,713 [33] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-05-29 17:32:30,715 [33] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:32:30,718 [33] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:32:30,720 [33] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-05-29 17:32:30,723 [33] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:32:30,741 [33] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:32:30,762 [33] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (18ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-05-29 17:32:30,783 [33] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-05-29 17:32:30,785 [33] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 41.7849ms.
2020-05-29 17:32:30,789 [33] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:32:30,791 [33] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 68.7162ms
2020-05-29 17:32:30,794 [33] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 81.1302ms 200 application/json; charset=utf-8
2020-05-29 17:32:34,510 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v1/account/profile  
2020-05-29 17:32:34,513 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:32:34,517 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.9043ms 204 
2020-05-29 17:32:34,520 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v1/account/profile  
2020-05-29 17:32:34,524 [7] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:32:34,529 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:32:34,532 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Profile() on controller DncZeus.Api.Controllers.AccountController (DncZeus.Api).
2020-05-29 17:32:34,535 [7] INFO  Microsoft.AspNetCore.Authorization.DefaultAuthorizationService [(null)]  - Authorization was successful.
2020-05-29 17:32:34,540 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:32:34,569 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) - Validation state: Valid
2020-05-29 17:32:34,651 [30] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (76ms) [Parameters=[@__Parse_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[ID], [x].[Code], [x].[Name], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser]
FROM [MisOrganization] AS [x]
WHERE [x].[ID] = @__Parse_0
2020-05-29 17:32:34,708 [31] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (49ms) [Parameters=[@__guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[EmpName], [x].[EmpNo], [x].[code], [x].[credate], [x].[creuser], [x].[depname], [x].[depno], [x].[email], [x].[enabled], [x].[jobname], [x].[jobno], [x].[moddate], [x].[moduser], [x].[pwd], [x].[telno], [x].[userLogo], [x].[username], [x].[userno], [x].[utype], [x].[wxAccount], [x].[wxId], [x].[wxMail], [x].[wxName], [x].[wxPhone], [x].[wxPwd]
FROM [Secuser] AS [x]
WHERE [x].[Guid] = @__guid_0
2020-05-29 17:32:34,735 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[Alias], [x].[BeforeCloseFun], [x].[Component], [x].[CreatedByUserGuid], [x].[CreatedByUserName], [x].[CreatedOn], [x].[Description], [x].[HideInMenu], [x].[Icon], [x].[IsDefaultRouter], [x].[IsDeleted], [x].[Level], [x].[ModifiedByUserGuid], [x].[ModifiedByUserName], [x].[ModifiedOn], [x].[Name], [x].[NotCache], [x].[ParentGuid], [x].[ParentName], [x].[Sort], [x].[Status], [x].[Url]
FROM [DncMenu] AS [x]
WHERE ([x].[IsDeleted] = 0) AND ([x].[Status] = 1)
2020-05-29 17:32:34,766 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (25ms) [Parameters=[@__user_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secuprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE [x].[userid] = @__user_Guid_0
ORDER BY [b0].[prgno]
2020-05-29 17:32:34,793 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (25ms) [Parameters=[@__groupid_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secgprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE CONVERT(VARCHAR(36), [x].[groupid]) = @__groupid_0
ORDER BY [b0].[prgno]
2020-05-29 17:32:34,795 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 224.2966ms.
2020-05-29 17:32:34,799 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:32:34,802 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) in 267.2046ms
2020-05-29 17:32:34,807 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 284.3127ms 200 application/json; charset=utf-8
2020-05-29 17:32:34,813 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-05-29 17:32:34,815 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:32:34,817 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 4.866ms 204 
2020-05-29 17:32:34,821 [30] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-05-29 17:32:34,826 [30] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:32:34,828 [30] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:32:34,830 [30] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "LoadMenuTree", controller = "Uprg"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult LoadMenuTree() on controller DncZeus.Api.Controllers.Api.Sec.UprgController (DncZeus.Api).
2020-05-29 17:32:34,832 [30] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:32:34,850 [30] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) - Validation state: Valid
2020-05-29 17:32:34,875 [30] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[icon], [p].[sysname], [p].[sysno], [p].[sysorder]
FROM [Secsys] AS [p]
ORDER BY [p].[sysorder]
2020-05-29 17:32:34,898 [30] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[funname], [p].[funno], [p].[funorder], [p].[icon], [p].[sysid]
FROM [Secfun] AS [p]
ORDER BY [p].[funorder]
2020-05-29 17:32:34,923 [30] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[enabled], [x].[funid], [x].[icon], [x].[mainid], [x].[prgcomp], [x].[prgname], [x].[prgno], [x].[prgorder], [x].[prgtype], [x].[program], [x].[runtype], [x].[sysid]
FROM [Secprg] AS [x]
WHERE [x].[enabled] = 'Y'
ORDER BY [x].[prgorder]
2020-05-29 17:32:34,949 [30] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[butid], [p].[butname], [p].[butno], [p].[butorder], [p].[funid], [p].[prgid], [p].[sysid]
FROM [Secprgbut] AS [p]
ORDER BY [p].[butorder]
2020-05-29 17:32:34,956 [30] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 100.3075ms.
2020-05-29 17:32:34,960 [30] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:32:34,965 [30] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) in 130.7729ms
2020-05-29 17:32:34,972 [30] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 147.3032ms 200 application/json; charset=utf-8
2020-05-29 17:32:35,485 [31] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-05-29 17:32:35,491 [32] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:32:35,493 [31] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:32:35,495 [30] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-05-29 17:32:35,497 [32] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:32:35,500 [31] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:32:35,507 [30] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:32:35,508 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-05-29 17:32:35,510 [32] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 14.334ms 204 
2020-05-29 17:32:35,515 [31] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:32:35,517 [30] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 21.2974ms 204 
2020-05-29 17:32:35,519 [32] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:32:35,522 [30] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 140
2020-05-29 17:32:35,579 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:32:35,580 [32] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:32:35,582 [30] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:32:35,601 [32] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:32:35,606 [30] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:32:35,611 [31] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-05-29 17:32:35,613 [32] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:32:35,615 [30] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-05-29 17:32:35,659 [32] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:32:35,662 [30] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:32:35,664 [31] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (46ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-05-29 17:32:35,682 [32] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:32:35,699 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 99.9335ms.
2020-05-29 17:32:35,701 [30] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:32:35,719 [31] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:32:35,738 [32] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:32:35,740 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 208.5792ms
2020-05-29 17:32:35,742 [32] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 56.2652ms.
2020-05-29 17:32:35,744 [31] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 259.6256ms 200 application/json; charset=utf-8
2020-05-29 17:32:35,746 [32] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:32:35,749 [32] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 132.0017ms
2020-05-29 17:32:35,754 [32] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 234.225ms 200 application/json; charset=utf-8
2020-05-29 17:32:35,759 [30] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (37ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                        from ManWorkshopOut as b
                                        left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        where  b.workProcessGuid=@p1 
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-05-29 17:32:35,791 [30] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (29ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                    from ManWorkshopOut as b
                                    left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    where  b.workProcessGuid=@p1 
) AS [w]
2020-05-29 17:32:35,794 [30] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 72.7358ms.
2020-05-29 17:32:35,796 [30] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:32:35,799 [30] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 137.6548ms
2020-05-29 17:32:35,801 [30] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 279.2979ms 200 application/json; charset=utf-8
2020-05-29 17:32:38,059 [33] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8  
2020-05-29 17:32:38,082 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8  
2020-05-29 17:32:38,086 [37] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workprocess/list?api-version=8  
2020-05-29 17:32:38,095 [33] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:32:38,099 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:32:38,103 [37] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:32:38,110 [33] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 50.9282ms 204 
2020-05-29 17:32:38,115 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 52.4169ms 204 
2020-05-29 17:32:38,117 [37] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 30.1726ms 204 
2020-05-29 17:32:38,119 [33] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8 application/json;charset=UTF-8 132
2020-05-29 17:32:38,127 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 140
2020-05-29 17:32:38,128 [33] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:32:38,130 [37] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workprocess/list?api-version=8 application/json;charset=UTF-8 150
2020-05-29 17:32:38,133 [7] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:32:38,134 [33] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:32:38,137 [37] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:32:38,147 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:32:38,148 [33] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkDate", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkDate(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-05-29 17:32:38,150 [37] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:32:38,159 [33] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:32:38,162 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-05-29 17:32:38,163 [37] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workprocess"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workprocess.WorkprocessRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkprocessController (DncZeus.Api).
2020-05-29 17:32:38,186 [33] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) - Validation state: Valid
2020-05-29 17:32:38,210 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:32:38,211 [37] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:32:38,231 [33] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__payload_workDate_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[cadre], [x].[cadreLeave], [x].[cadreRest], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[logistic], [x].[logisticLeave], [x].[logisticRest], [x].[moddate], [x].[moduser], [x].[workDate], [x].[worker], [x].[workerLeave], [x].[workerReste]
FROM [ManFactoryWorkdate] AS [x]
WHERE ([x].[factoryGuid] = @__payload_factoryGuid_0) AND ([x].[workDate] = @__payload_workDate_1)
2020-05-29 17:32:38,233 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-05-29 17:32:38,253 [33] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 45.4366ms.
2020-05-29 17:32:38,256 [37] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:32:38,262 [33] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:32:38,307 [33] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) in 132.7024ms
2020-05-29 17:32:38,308 [37] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (43ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[factoryGuid], [t].[workCode], [t].[workName], [t].[rate], [t].[isvalid], [t].[credate], [t].[creuser], [t].[moddate], [t].[moduser], [t].[factoryName]
FROM (
    SELECT [a].[Guid], [a].[OrgID], [a].[factoryGuid], [a].[workCode], [a].[workName], [a].[rate], [a].[isvalid], [a].[credate], [a].[creuser], [a].[moddate], [a].[moduser], [b].[name] AS [factoryName], ROW_NUMBER() OVER(ORDER BY [a].[factoryGuid], [a].[workCode]) AS [__RowNumber__]
    FROM [ManWorkProcess] AS [a]
    INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
    WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-05-29 17:32:38,335 [33] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 193.7296ms 200 application/json; charset=utf-8
2020-05-29 17:32:38,345 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (73ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty'  from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.qty) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=b.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=c.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=d.factoryGuid)
left join (
	select sum(outline.qty) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=e.factoryGuid)
left join (
select sum(outline.qty) as 'todayDoneOutQty',out.factoryGuid,out.Guid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.Guid,out.factoryGuid
) as g on(g.factoryGuid=f.factoryGuid)
2020-05-29 17:32:38,347 [37] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (28ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkProcess] AS [a]
INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
2020-05-29 17:32:38,349 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 90.1401ms.
2020-05-29 17:32:38,352 [37] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 91.1045ms.
2020-05-29 17:32:38,358 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:32:38,361 [37] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:32:38,367 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 198.4399ms
2020-05-29 17:32:38,368 [37] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) in 178.6827ms
2020-05-29 17:32:38,384 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 248.8008ms 200 application/json; charset=utf-8
2020-05-29 17:32:38,393 [37] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 247.996ms 200 application/json; charset=utf-8
2020-05-29 17:32:40,104 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 176
2020-05-29 17:32:40,107 [7] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:32:40,110 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:32:40,113 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-05-29 17:32:40,115 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:32:40,132 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:32:40,162 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (27ms) [Parameters=[@p0='?', @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                        from ManWorkshopOut as b
                                        left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        where  b.workProcessGuid=@p1 
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-05-29 17:32:40,189 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[@p0='?', @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                    from ManWorkshopOut as b
                                    left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    where  b.workProcessGuid=@p1 
) AS [w]
2020-05-29 17:32:40,192 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 56.6737ms.
2020-05-29 17:32:40,194 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:32:40,196 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 81.5671ms
2020-05-29 17:32:40,199 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 95.4966ms 200 application/json; charset=utf-8
2020-05-29 17:32:42,731 [39] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/queryGoodsByFmono?api-version=8  
2020-05-29 17:32:42,736 [39] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:32:42,742 [39] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 9.403ms 204 
2020-05-29 17:32:42,748 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/queryGoodsByFmono?api-version=8 application/json;charset=UTF-8 18
2020-05-29 17:32:42,767 [7] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:32:42,770 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:32:42,775 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "QueryGoodsByFmono", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult QueryGoodsByFmono(DncZeus.Api.ViewModels.Man.Workshop.QuerySfModel) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-05-29 17:32:42,779 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:32:42,803 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.QueryGoodsByFmono (DncZeus.Api) - Validation state: Valid
2020-05-29 17:32:43,610 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (798ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
select t1.fMONo as 'fNo',t4.fGoodsCode,t4.fGoodsName,t2.fMoQty as 'fQty',t3.fUnitCode
,case when isnull(t3._x_f002,0) = 0 then t3.fUP else t3._x_f002 end * case when charindex('W',t1.fMONo) = 1 or charindex('PMC',t1.fordno) = 1 then 1 else 0.97 end   as fUP
from SF.DCF19_MY.dbo.t_MPSM_MOMst t1
inner join SF.DCF19_MY.dbo.t_MPSM_MOItem t2 on t1.fMONo = t2.fMONo
inner join SF.DCF19_MY.dbo.t_COPD_OrdItem t3 on t1.fOrdNo = t3.fOrdNo and t2.fGoodsID = t3.fGoodsID
inner join SF.DCF19_MY.dbo.t_BOMM_GoodsMst t4 on t2.fGoodsID = t4.fGoodsID
where t1.fMONo = @p0
2020-05-29 17:32:44,050 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (434ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select t1.fMONo as 'fNo',t4.fGoodsCode,t4.fGoodsName,t2.fMoQty as 'fQty',t3.fUnitCode
    ,case when isnull(t3._x_f002,0) = 0 then t3.fUP else t3._x_f002 end * case when charindex('W',t1.fMONo) = 1 or charindex('PMC',t1.fordno) = 1 then 1 else 0.97 end   as fUP
    from SF.DCF19_MY.dbo.t_MPSM_MOMst t1
    inner join SF.DCF19_MY.dbo.t_MPSM_MOItem t2 on t1.fMONo = t2.fMONo
    inner join SF.DCF19_MY.dbo.t_COPD_OrdItem t3 on t1.fOrdNo = t3.fOrdNo and t2.fGoodsID = t3.fGoodsID
    inner join SF.DCF19_MY.dbo.t_BOMM_GoodsMst t4 on t2.fGoodsID = t4.fGoodsID
    where t1.fMONo = @p0 
) AS [s]
2020-05-29 17:32:44,052 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.QueryGoodsByFmono (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1246.1014ms.
2020-05-29 17:32:44,056 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:32:44,061 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.QueryGoodsByFmono (DncZeus.Api) in 1281.742ms
2020-05-29 17:32:44,064 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 1316.8311ms 200 application/json; charset=utf-8
2020-05-29 17:32:57,466 [30] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/queryGoodsByFmono?api-version=8  
2020-05-29 17:32:57,469 [30] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:32:57,474 [30] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 6.6435ms 204 
2020-05-29 17:32:57,478 [31] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/queryGoodsByFmono?api-version=8 application/json;charset=UTF-8 18
2020-05-29 17:32:57,480 [31] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:32:57,482 [31] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:32:57,485 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "QueryGoodsByFmono", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult QueryGoodsByFmono(DncZeus.Api.ViewModels.Man.Workshop.QuerySfModel) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-05-29 17:32:57,488 [31] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:32:57,509 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.QueryGoodsByFmono (DncZeus.Api) - Validation state: Valid
2020-05-29 17:33:23,906 [39] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:33:23,911 [39] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:33:23,935 [39] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 33.999ms 204 
2020-05-29 17:33:23,946 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:33:23,949 [43] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:33:23,961 [43] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:33:23,964 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:33:23,968 [43] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:33:23,989 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:33:24,012 [43] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:33:24,015 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23.193ms.
2020-05-29 17:33:24,017 [43] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:33:24,020 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 52.55ms
2020-05-29 17:33:24,023 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 75.935ms 200 application/json; charset=utf-8
2020-05-29 17:33:24,446 [31] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (559ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
select t1.fMONo as 'fNo',t4.fGoodsCode,t4.fGoodsName,t2.fMoQty as 'fQty',t3.fUnitCode
,case when isnull(t3._x_f002,0) = 0 then t3.fUP else t3._x_f002 end * case when charindex('W',t1.fMONo) = 1 or charindex('PMC',t1.fordno) = 1 then 1 else 0.97 end   as fUP
from SF.DCF19_MY.dbo.t_MPSM_MOMst t1
inner join SF.DCF19_MY.dbo.t_MPSM_MOItem t2 on t1.fMONo = t2.fMONo
inner join SF.DCF19_MY.dbo.t_COPD_OrdItem t3 on t1.fOrdNo = t3.fOrdNo and t2.fGoodsID = t3.fGoodsID
inner join SF.DCF19_MY.dbo.t_BOMM_GoodsMst t4 on t2.fGoodsID = t4.fGoodsID
where t1.fMONo = @p0
2020-05-29 17:33:24,911 [31] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (452ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select t1.fMONo as 'fNo',t4.fGoodsCode,t4.fGoodsName,t2.fMoQty as 'fQty',t3.fUnitCode
    ,case when isnull(t3._x_f002,0) = 0 then t3.fUP else t3._x_f002 end * case when charindex('W',t1.fMONo) = 1 or charindex('PMC',t1.fordno) = 1 then 1 else 0.97 end   as fUP
    from SF.DCF19_MY.dbo.t_MPSM_MOMst t1
    inner join SF.DCF19_MY.dbo.t_MPSM_MOItem t2 on t1.fMONo = t2.fMONo
    inner join SF.DCF19_MY.dbo.t_COPD_OrdItem t3 on t1.fOrdNo = t3.fOrdNo and t2.fGoodsID = t3.fGoodsID
    inner join SF.DCF19_MY.dbo.t_BOMM_GoodsMst t4 on t2.fGoodsID = t4.fGoodsID
    where t1.fMONo = @p0 
) AS [s]
2020-05-29 17:33:49,039 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.QueryGoodsByFmono (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 51528.1187ms.
2020-05-29 17:33:49,041 [39] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:33:49,044 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/queryGoodsByFmono?api-version=8  
2020-05-29 17:33:49,045 [31] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:33:49,054 [39] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:33:49,077 [43] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:33:49,093 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.QueryGoodsByFmono (DncZeus.Api) in 51569.6522ms
2020-05-29 17:33:49,094 [39] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 39.8658ms 204 
2020-05-29 17:33:49,096 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 48.1209ms 204 
2020-05-29 17:33:49,101 [31] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 51620.7948ms 200 application/json; charset=utf-8
2020-05-29 17:33:49,105 [39] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/queryGoodsByFmono?api-version=8 application/json;charset=UTF-8 18
2020-05-29 17:33:49,109 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:33:49,112 [39] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:33:49,115 [43] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:33:49,121 [39] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:33:49,124 [43] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:33:49,127 [39] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "QueryGoodsByFmono", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult QueryGoodsByFmono(DncZeus.Api.ViewModels.Man.Workshop.QuerySfModel) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-05-29 17:33:49,130 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:33:49,142 [43] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:33:49,165 [39] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:33:49,183 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:33:49,222 [39] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.QueryGoodsByFmono (DncZeus.Api) - Validation state: Valid
2020-05-29 17:33:49,223 [43] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (35ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:33:50,635 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1447.6656ms.
2020-05-29 17:33:50,659 [43] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:33:50,679 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 1538.5044ms
2020-05-29 17:33:50,682 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 1578.6508ms 200 application/json; charset=utf-8
2020-05-29 17:33:51,096 [39] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (434ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
select t1.fMONo as 'fNo',t4.fGoodsCode,t4.fGoodsName,t2.fMoQty as 'fQty',t3.fUnitCode
,case when isnull(t3._x_f002,0) = 0 then t3.fUP else t3._x_f002 end * case when charindex('W',t1.fMONo) = 1 or charindex('PMC',t1.fordno) = 1 then 1 else 0.97 end   as fUP
from SF.DCF19_MY.dbo.t_MPSM_MOMst t1
inner join SF.DCF19_MY.dbo.t_MPSM_MOItem t2 on t1.fMONo = t2.fMONo
inner join SF.DCF19_MY.dbo.t_COPD_OrdItem t3 on t1.fOrdNo = t3.fOrdNo and t2.fGoodsID = t3.fGoodsID
inner join SF.DCF19_MY.dbo.t_BOMM_GoodsMst t4 on t2.fGoodsID = t4.fGoodsID
where t1.fMONo = @p0
2020-05-29 17:33:51,521 [39] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (421ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select t1.fMONo as 'fNo',t4.fGoodsCode,t4.fGoodsName,t2.fMoQty as 'fQty',t3.fUnitCode
    ,case when isnull(t3._x_f002,0) = 0 then t3.fUP else t3._x_f002 end * case when charindex('W',t1.fMONo) = 1 or charindex('PMC',t1.fordno) = 1 then 1 else 0.97 end   as fUP
    from SF.DCF19_MY.dbo.t_MPSM_MOMst t1
    inner join SF.DCF19_MY.dbo.t_MPSM_MOItem t2 on t1.fMONo = t2.fMONo
    inner join SF.DCF19_MY.dbo.t_COPD_OrdItem t3 on t1.fOrdNo = t3.fOrdNo and t2.fGoodsID = t3.fGoodsID
    inner join SF.DCF19_MY.dbo.t_BOMM_GoodsMst t4 on t2.fGoodsID = t4.fGoodsID
    where t1.fMONo = @p0 
) AS [s]
2020-05-29 17:33:56,063 [39] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.QueryGoodsByFmono (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 6838.54ms.
2020-05-29 17:33:56,065 [39] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:33:56,068 [39] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.QueryGoodsByFmono (DncZeus.Api) in 6938.1508ms
2020-05-29 17:33:56,071 [39] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 6970.5575ms 200 application/json; charset=utf-8
2020-05-29 17:34:00,277 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/queryGoodsByFmono?api-version=8  
2020-05-29 17:34:00,280 [43] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:34:00,283 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 6.2553ms 204 
2020-05-29 17:34:00,288 [31] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/queryGoodsByFmono?api-version=8 application/json;charset=UTF-8 18
2020-05-29 17:34:00,295 [31] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:34:00,298 [31] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:34:00,304 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "QueryGoodsByFmono", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult QueryGoodsByFmono(DncZeus.Api.ViewModels.Man.Workshop.QuerySfModel) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-05-29 17:34:00,309 [31] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:34:00,331 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.QueryGoodsByFmono (DncZeus.Api) - Validation state: Valid
2020-05-29 17:34:00,783 [31] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (448ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
select t1.fMONo as 'fNo',t4.fGoodsCode,t4.fGoodsName,t2.fMoQty as 'fQty',t3.fUnitCode
,case when isnull(t3._x_f002,0) = 0 then t3.fUP else t3._x_f002 end * case when charindex('W',t1.fMONo) = 1 or charindex('PMC',t1.fordno) = 1 then 1 else 0.97 end   as fUP
from SF.DCF19_MY.dbo.t_MPSM_MOMst t1
inner join SF.DCF19_MY.dbo.t_MPSM_MOItem t2 on t1.fMONo = t2.fMONo
inner join SF.DCF19_MY.dbo.t_COPD_OrdItem t3 on t1.fOrdNo = t3.fOrdNo and t2.fGoodsID = t3.fGoodsID
inner join SF.DCF19_MY.dbo.t_BOMM_GoodsMst t4 on t2.fGoodsID = t4.fGoodsID
where t1.fMONo = @p0
2020-05-29 17:34:01,214 [31] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (428ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select t1.fMONo as 'fNo',t4.fGoodsCode,t4.fGoodsName,t2.fMoQty as 'fQty',t3.fUnitCode
    ,case when isnull(t3._x_f002,0) = 0 then t3.fUP else t3._x_f002 end * case when charindex('W',t1.fMONo) = 1 or charindex('PMC',t1.fordno) = 1 then 1 else 0.97 end   as fUP
    from SF.DCF19_MY.dbo.t_MPSM_MOMst t1
    inner join SF.DCF19_MY.dbo.t_MPSM_MOItem t2 on t1.fMONo = t2.fMONo
    inner join SF.DCF19_MY.dbo.t_COPD_OrdItem t3 on t1.fOrdNo = t3.fOrdNo and t2.fGoodsID = t3.fGoodsID
    inner join SF.DCF19_MY.dbo.t_BOMM_GoodsMst t4 on t2.fGoodsID = t4.fGoodsID
    where t1.fMONo = @p0 
) AS [s]
2020-05-29 17:34:01,217 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.QueryGoodsByFmono (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 883.0116ms.
2020-05-29 17:34:01,221 [31] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:34:01,224 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.QueryGoodsByFmono (DncZeus.Api) in 915.9103ms
2020-05-29 17:34:01,227 [31] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 941.5938ms 200 application/json; charset=utf-8
2020-05-29 17:34:05,376 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:34:05,379 [43] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:34:05,383 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 6.0928ms 204 
2020-05-29 17:34:05,393 [39] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:34:05,398 [39] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:34:05,411 [39] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:34:05,417 [39] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:34:05,427 [39] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:34:05,458 [39] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:34:05,487 [39] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:34:05,490 [39] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 29.8823ms.
2020-05-29 17:34:05,493 [39] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:34:05,498 [39] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 69.8905ms
2020-05-29 17:34:05,502 [39] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 112.3362ms 200 application/json; charset=utf-8
2020-05-29 17:34:05,774 [39] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/queryGoodsByFmono?api-version=8  
2020-05-29 17:34:05,778 [39] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:34:05,783 [39] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 7.7172ms 204 
2020-05-29 17:34:05,789 [31] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/queryGoodsByFmono?api-version=8 application/json;charset=UTF-8 18
2020-05-29 17:34:05,792 [31] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:34:05,795 [31] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:34:05,797 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "QueryGoodsByFmono", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult QueryGoodsByFmono(DncZeus.Api.ViewModels.Man.Workshop.QuerySfModel) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-05-29 17:34:05,802 [31] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:34:05,848 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.QueryGoodsByFmono (DncZeus.Api) - Validation state: Valid
2020-05-29 17:34:06,290 [31] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (439ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
select t1.fMONo as 'fNo',t4.fGoodsCode,t4.fGoodsName,t2.fMoQty as 'fQty',t3.fUnitCode
,case when isnull(t3._x_f002,0) = 0 then t3.fUP else t3._x_f002 end * case when charindex('W',t1.fMONo) = 1 or charindex('PMC',t1.fordno) = 1 then 1 else 0.97 end   as fUP
from SF.DCF19_MY.dbo.t_MPSM_MOMst t1
inner join SF.DCF19_MY.dbo.t_MPSM_MOItem t2 on t1.fMONo = t2.fMONo
inner join SF.DCF19_MY.dbo.t_COPD_OrdItem t3 on t1.fOrdNo = t3.fOrdNo and t2.fGoodsID = t3.fGoodsID
inner join SF.DCF19_MY.dbo.t_BOMM_GoodsMst t4 on t2.fGoodsID = t4.fGoodsID
where t1.fMONo = @p0
2020-05-29 17:34:06,733 [31] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (439ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select t1.fMONo as 'fNo',t4.fGoodsCode,t4.fGoodsName,t2.fMoQty as 'fQty',t3.fUnitCode
    ,case when isnull(t3._x_f002,0) = 0 then t3.fUP else t3._x_f002 end * case when charindex('W',t1.fMONo) = 1 or charindex('PMC',t1.fordno) = 1 then 1 else 0.97 end   as fUP
    from SF.DCF19_MY.dbo.t_MPSM_MOMst t1
    inner join SF.DCF19_MY.dbo.t_MPSM_MOItem t2 on t1.fMONo = t2.fMONo
    inner join SF.DCF19_MY.dbo.t_COPD_OrdItem t3 on t1.fOrdNo = t3.fOrdNo and t2.fGoodsID = t3.fGoodsID
    inner join SF.DCF19_MY.dbo.t_BOMM_GoodsMst t4 on t2.fGoodsID = t4.fGoodsID
    where t1.fMONo = @p0 
) AS [s]
2020-05-29 17:34:06,738 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.QueryGoodsByFmono (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 884.6071ms.
2020-05-29 17:34:06,741 [31] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:34:06,744 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.QueryGoodsByFmono (DncZeus.Api) in 943.9103ms
2020-05-29 17:34:06,747 [31] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 961.9445ms 200 application/json; charset=utf-8
2020-05-29 17:34:35,372 [39] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:34:35,386 [39] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:34:35,405 [39] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 28.372ms 204 
2020-05-29 17:34:35,409 [31] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:34:35,413 [31] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:34:35,415 [31] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:34:35,419 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:34:35,423 [31] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:34:35,445 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:34:35,472 [31] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:34:35,475 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 27.4327ms.
2020-05-29 17:34:35,477 [31] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:34:35,480 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 58.244ms
2020-05-29 17:34:35,488 [31] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 74.6758ms 200 application/json; charset=utf-8
2020-05-29 17:34:49,909 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v1/account/profile  
2020-05-29 17:34:49,912 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:34:49,925 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 10.8256ms 204 
2020-05-29 17:34:49,930 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v1/account/profile  
2020-05-29 17:34:49,962 [7] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:34:49,991 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:34:50,020 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Profile() on controller DncZeus.Api.Controllers.AccountController (DncZeus.Api).
2020-05-29 17:34:50,041 [7] INFO  Microsoft.AspNetCore.Authorization.DefaultAuthorizationService [(null)]  - Authorization was successful.
2020-05-29 17:34:50,053 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:34:50,098 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) - Validation state: Valid
2020-05-29 17:34:50,159 [31] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (52ms) [Parameters=[@__Parse_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[ID], [x].[Code], [x].[Name], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser]
FROM [MisOrganization] AS [x]
WHERE [x].[ID] = @__Parse_0
2020-05-29 17:34:50,194 [31] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (32ms) [Parameters=[@__guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[EmpName], [x].[EmpNo], [x].[code], [x].[credate], [x].[creuser], [x].[depname], [x].[depno], [x].[email], [x].[enabled], [x].[jobname], [x].[jobno], [x].[moddate], [x].[moduser], [x].[pwd], [x].[telno], [x].[userLogo], [x].[username], [x].[userno], [x].[utype], [x].[wxAccount], [x].[wxId], [x].[wxMail], [x].[wxName], [x].[wxPhone], [x].[wxPwd]
FROM [Secuser] AS [x]
WHERE [x].[Guid] = @__guid_0
2020-05-29 17:34:50,222 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[Alias], [x].[BeforeCloseFun], [x].[Component], [x].[CreatedByUserGuid], [x].[CreatedByUserName], [x].[CreatedOn], [x].[Description], [x].[HideInMenu], [x].[Icon], [x].[IsDefaultRouter], [x].[IsDeleted], [x].[Level], [x].[ModifiedByUserGuid], [x].[ModifiedByUserName], [x].[ModifiedOn], [x].[Name], [x].[NotCache], [x].[ParentGuid], [x].[ParentName], [x].[Sort], [x].[Status], [x].[Url]
FROM [DncMenu] AS [x]
WHERE ([x].[IsDeleted] = 0) AND ([x].[Status] = 1)
2020-05-29 17:34:50,248 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__user_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secuprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE [x].[userid] = @__user_Guid_0
ORDER BY [b0].[prgno]
2020-05-29 17:34:50,278 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (27ms) [Parameters=[@__groupid_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secgprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE CONVERT(VARCHAR(36), [x].[groupid]) = @__groupid_0
ORDER BY [b0].[prgno]
2020-05-29 17:34:50,281 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 180.9116ms.
2020-05-29 17:34:50,286 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:34:50,290 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) in 265.329ms
2020-05-29 17:34:50,295 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 362.805ms 200 application/json; charset=utf-8
2020-05-29 17:34:50,306 [31] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-05-29 17:34:50,311 [31] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:34:50,324 [31] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 16.7822ms 204 
2020-05-29 17:34:50,335 [31] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-05-29 17:34:50,341 [31] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:34:50,351 [31] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:34:50,360 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "LoadMenuTree", controller = "Uprg"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult LoadMenuTree() on controller DncZeus.Api.Controllers.Api.Sec.UprgController (DncZeus.Api).
2020-05-29 17:34:50,365 [31] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:34:50,398 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) - Validation state: Valid
2020-05-29 17:34:50,439 [31] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (37ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[icon], [p].[sysname], [p].[sysno], [p].[sysorder]
FROM [Secsys] AS [p]
ORDER BY [p].[sysorder]
2020-05-29 17:34:50,465 [31] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[funname], [p].[funno], [p].[funorder], [p].[icon], [p].[sysid]
FROM [Secfun] AS [p]
ORDER BY [p].[funorder]
2020-05-29 17:34:50,491 [31] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[enabled], [x].[funid], [x].[icon], [x].[mainid], [x].[prgcomp], [x].[prgname], [x].[prgno], [x].[prgorder], [x].[prgtype], [x].[program], [x].[runtype], [x].[sysid]
FROM [Secprg] AS [x]
WHERE [x].[enabled] = 'Y'
ORDER BY [x].[prgorder]
2020-05-29 17:34:50,516 [31] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[butid], [p].[butname], [p].[butno], [p].[butorder], [p].[funid], [p].[prgid], [p].[sysid]
FROM [Secprgbut] AS [p]
ORDER BY [p].[butorder]
2020-05-29 17:34:50,520 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 119.7708ms.
2020-05-29 17:34:50,522 [31] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:34:50,526 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) in 162.7026ms
2020-05-29 17:34:50,533 [31] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 196.7802ms 200 application/json; charset=utf-8
2020-05-29 17:34:51,212 [39] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-05-29 17:34:51,215 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:34:51,221 [39] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:34:51,227 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-05-29 17:34:51,238 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:34:51,247 [39] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 14.6261ms 204 
2020-05-29 17:34:51,249 [43] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:34:51,252 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 38.0302ms 204 
2020-05-29 17:34:51,256 [39] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-05-29 17:34:51,260 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:34:51,262 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 40.4439ms 204 
2020-05-29 17:34:51,264 [39] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:34:51,276 [7] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:34:51,279 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 140
2020-05-29 17:34:51,281 [39] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:34:51,285 [43] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:34:51,287 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:34:51,290 [39] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-05-29 17:34:51,291 [43] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:34:51,294 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:34:51,298 [39] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:34:51,300 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-05-29 17:34:51,305 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:34:51,338 [43] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:34:51,346 [39] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:34:51,365 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:34:51,409 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:34:51,431 [39] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (63ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-05-29 17:34:51,433 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:34:51,472 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 68.6519ms.
2020-05-29 17:34:51,473 [43] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (41ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                        from ManWorkshopOut as b
                                        left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        where  b.workProcessGuid=@p1 
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-05-29 17:34:51,475 [39] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-05-29 17:34:51,476 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:34:51,479 [39] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 130.0533ms.
2020-05-29 17:34:51,498 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 193.8421ms
2020-05-29 17:34:51,502 [39] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:34:51,505 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 245.4445ms 200 application/json; charset=utf-8
2020-05-29 17:34:51,510 [39] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 212.7299ms
2020-05-29 17:34:51,511 [43] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (32ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                    from ManWorkshopOut as b
                                    left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    where  b.workProcessGuid=@p1 
) AS [w]
2020-05-29 17:34:51,523 [39] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 263.1971ms 200 application/json; charset=utf-8
2020-05-29 17:34:51,524 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 92.4238ms.
2020-05-29 17:34:51,538 [43] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:34:51,542 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 232.5483ms
2020-05-29 17:34:51,547 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 276.4986ms 200 application/json; charset=utf-8
2020-05-29 17:34:57,100 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8  
2020-05-29 17:34:57,101 [31] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8  
2020-05-29 17:34:57,104 [39] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workprocess/list?api-version=8  
2020-05-29 17:34:57,111 [31] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:34:57,120 [39] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:34:57,130 [31] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 15.6826ms 204 
2020-05-29 17:34:57,141 [39] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 24.8509ms 204 
2020-05-29 17:34:57,145 [43] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:34:57,147 [39] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workprocess/list?api-version=8 application/json;charset=UTF-8 150
2020-05-29 17:34:57,152 [46] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 140
2020-05-29 17:34:57,157 [39] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:34:57,171 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 54.5295ms 204 
2020-05-29 17:34:57,173 [46] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:34:57,175 [39] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:34:57,179 [46] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:34:57,177 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8 application/json;charset=UTF-8 132
2020-05-29 17:34:57,181 [39] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workprocess"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workprocess.WorkprocessRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkprocessController (DncZeus.Api).
2020-05-29 17:34:57,185 [46] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-05-29 17:34:57,190 [43] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:34:57,192 [46] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:34:57,194 [39] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:34:57,197 [43] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:34:57,231 [39] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:34:57,233 [46] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-05-29 17:34:57,240 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkDate", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkDate(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-05-29 17:34:57,264 [43] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:34:57,305 [39] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (49ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[factoryGuid], [t].[workCode], [t].[workName], [t].[rate], [t].[isvalid], [t].[credate], [t].[creuser], [t].[moddate], [t].[moduser], [t].[factoryName]
FROM (
    SELECT [a].[Guid], [a].[OrgID], [a].[factoryGuid], [a].[workCode], [a].[workName], [a].[rate], [a].[isvalid], [a].[credate], [a].[creuser], [a].[moddate], [a].[moduser], [b].[name] AS [factoryName], ROW_NUMBER() OVER(ORDER BY [a].[factoryGuid], [a].[workCode]) AS [__RowNumber__]
    FROM [ManWorkProcess] AS [a]
    INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
    WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-05-29 17:34:57,306 [46] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (65ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty'  from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.qty) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=b.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=c.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=d.factoryGuid)
left join (
	select sum(outline.qty) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=e.factoryGuid)
left join (
select sum(outline.qty) as 'todayDoneOutQty',out.factoryGuid,out.Guid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.Guid,out.factoryGuid
) as g on(g.factoryGuid=f.factoryGuid)
2020-05-29 17:34:57,308 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) - Validation state: Valid
2020-05-29 17:34:57,330 [46] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 68.6487ms.
2020-05-29 17:34:57,354 [46] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:34:57,377 [46] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 165.7982ms
2020-05-29 17:34:57,379 [43] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (43ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__payload_workDate_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[cadre], [x].[cadreLeave], [x].[cadreRest], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[logistic], [x].[logisticLeave], [x].[logisticRest], [x].[moddate], [x].[moduser], [x].[workDate], [x].[worker], [x].[workerLeave], [x].[workerReste]
FROM [ManFactoryWorkdate] AS [x]
WHERE ([x].[factoryGuid] = @__payload_factoryGuid_0) AND ([x].[workDate] = @__payload_workDate_1)
2020-05-29 17:34:57,389 [39] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (48ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkProcess] AS [a]
INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
2020-05-29 17:34:57,391 [46] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 237.3151ms 200 application/json; charset=utf-8
2020-05-29 17:34:57,392 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 80.5804ms.
2020-05-29 17:34:57,394 [39] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 155.7333ms.
2020-05-29 17:34:57,397 [43] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:34:57,401 [39] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:34:57,404 [43] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) in 159.7076ms
2020-05-29 17:34:57,407 [39] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) in 218.4529ms
2020-05-29 17:34:57,410 [43] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 233.6684ms 200 application/json; charset=utf-8
2020-05-29 17:34:57,412 [39] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 266.991ms 200 application/json; charset=utf-8
2020-05-29 17:34:59,218 [52] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-05-29 17:34:59,222 [52] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:34:59,225 [52] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 8.3161ms 204 
2020-05-29 17:34:59,229 [52] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 176
2020-05-29 17:34:59,232 [52] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:34:59,237 [52] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:34:59,241 [52] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-05-29 17:34:59,244 [52] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:34:59,267 [52] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:34:59,300 [52] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (29ms) [Parameters=[@p0='?', @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                        from ManWorkshopOut as b
                                        left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        where  b.workProcessGuid=@p1 
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-05-29 17:34:59,330 [52] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (27ms) [Parameters=[@p0='?', @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                    from ManWorkshopOut as b
                                    left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    where  b.workProcessGuid=@p1 
) AS [w]
2020-05-29 17:34:59,333 [52] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 62.7073ms.
2020-05-29 17:34:59,337 [52] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:34:59,340 [52] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 96.4945ms
2020-05-29 17:34:59,344 [52] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 114.5917ms 200 application/json; charset=utf-8
2020-05-29 17:35:02,126 [31] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/queryGoodsByFmono?api-version=8  
2020-05-29 17:35:02,128 [31] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:35:02,131 [31] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 4.764ms 204 
2020-05-29 17:35:02,136 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/queryGoodsByFmono?api-version=8 application/json;charset=UTF-8 18
2020-05-29 17:35:02,142 [7] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:35:02,146 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:35:02,149 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "QueryGoodsByFmono", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult QueryGoodsByFmono(DncZeus.Api.ViewModels.Man.Workshop.QuerySfModel) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-05-29 17:35:02,155 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:35:02,179 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.QueryGoodsByFmono (DncZeus.Api) - Validation state: Valid
2020-05-29 17:35:02,624 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (442ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
select t1.fMONo as 'fNo',t4.fGoodsCode,t4.fGoodsName,t2.fMoQty as 'fQty',t3.fUnitCode
,case when isnull(t3._x_f002,0) = 0 then t3.fUP else t3._x_f002 end * case when charindex('W',t1.fMONo) = 1 or charindex('PMC',t1.fordno) = 1 then 1 else 0.97 end   as fUP
from SF.DCF19_MY.dbo.t_MPSM_MOMst t1
inner join SF.DCF19_MY.dbo.t_MPSM_MOItem t2 on t1.fMONo = t2.fMONo
inner join SF.DCF19_MY.dbo.t_COPD_OrdItem t3 on t1.fOrdNo = t3.fOrdNo and t2.fGoodsID = t3.fGoodsID
inner join SF.DCF19_MY.dbo.t_BOMM_GoodsMst t4 on t2.fGoodsID = t4.fGoodsID
where t1.fMONo = @p0
2020-05-29 17:35:03,161 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (535ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select t1.fMONo as 'fNo',t4.fGoodsCode,t4.fGoodsName,t2.fMoQty as 'fQty',t3.fUnitCode
    ,case when isnull(t3._x_f002,0) = 0 then t3.fUP else t3._x_f002 end * case when charindex('W',t1.fMONo) = 1 or charindex('PMC',t1.fordno) = 1 then 1 else 0.97 end   as fUP
    from SF.DCF19_MY.dbo.t_MPSM_MOMst t1
    inner join SF.DCF19_MY.dbo.t_MPSM_MOItem t2 on t1.fMONo = t2.fMONo
    inner join SF.DCF19_MY.dbo.t_COPD_OrdItem t3 on t1.fOrdNo = t3.fOrdNo and t2.fGoodsID = t3.fGoodsID
    inner join SF.DCF19_MY.dbo.t_BOMM_GoodsMst t4 on t2.fGoodsID = t4.fGoodsID
    where t1.fMONo = @p0 
) AS [s]
2020-05-29 17:35:03,163 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.QueryGoodsByFmono (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 981.939ms.
2020-05-29 17:35:03,165 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:35:03,169 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.QueryGoodsByFmono (DncZeus.Api) in 1014.9458ms
2020-05-29 17:35:03,172 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 1036.4213ms 200 application/json; charset=utf-8
2020-05-29 17:35:08,995 [31] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/queryGoodsByFmono?api-version=8  
2020-05-29 17:35:09,000 [31] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:35:09,004 [31] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 7.5334ms 204 
2020-05-29 17:35:09,008 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/queryGoodsByFmono?api-version=8 application/json;charset=UTF-8 18
2020-05-29 17:35:09,013 [7] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:35:09,015 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:35:09,019 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "QueryGoodsByFmono", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult QueryGoodsByFmono(DncZeus.Api.ViewModels.Man.Workshop.QuerySfModel) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-05-29 17:35:09,022 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:35:09,044 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.QueryGoodsByFmono (DncZeus.Api) - Validation state: Valid
2020-05-29 17:35:10,114 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (1,067ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
select t1.fMONo as 'fNo',t4.fGoodsCode,t4.fGoodsName,t2.fMoQty as 'fQty',t3.fUnitCode
,case when isnull(t3._x_f002,0) = 0 then t3.fUP else t3._x_f002 end * case when charindex('W',t1.fMONo) = 1 or charindex('PMC',t1.fordno) = 1 then 1 else 0.97 end   as fUP
from SF.DCF19_MY.dbo.t_MPSM_MOMst t1
inner join SF.DCF19_MY.dbo.t_MPSM_MOItem t2 on t1.fMONo = t2.fMONo
inner join SF.DCF19_MY.dbo.t_COPD_OrdItem t3 on t1.fOrdNo = t3.fOrdNo and t2.fGoodsID = t3.fGoodsID
inner join SF.DCF19_MY.dbo.t_BOMM_GoodsMst t4 on t2.fGoodsID = t4.fGoodsID
where t1.fMONo = @p0
2020-05-29 17:35:10,801 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (683ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select t1.fMONo as 'fNo',t4.fGoodsCode,t4.fGoodsName,t2.fMoQty as 'fQty',t3.fUnitCode
    ,case when isnull(t3._x_f002,0) = 0 then t3.fUP else t3._x_f002 end * case when charindex('W',t1.fMONo) = 1 or charindex('PMC',t1.fordno) = 1 then 1 else 0.97 end   as fUP
    from SF.DCF19_MY.dbo.t_MPSM_MOMst t1
    inner join SF.DCF19_MY.dbo.t_MPSM_MOItem t2 on t1.fMONo = t2.fMONo
    inner join SF.DCF19_MY.dbo.t_COPD_OrdItem t3 on t1.fOrdNo = t3.fOrdNo and t2.fGoodsID = t3.fGoodsID
    inner join SF.DCF19_MY.dbo.t_BOMM_GoodsMst t4 on t2.fGoodsID = t4.fGoodsID
    where t1.fMONo = @p0 
) AS [s]
2020-05-29 17:35:10,804 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.QueryGoodsByFmono (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1756.919ms.
2020-05-29 17:35:10,807 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:35:10,811 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.QueryGoodsByFmono (DncZeus.Api) in 1787.9077ms
2020-05-29 17:35:10,813 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 1805.3629ms 200 application/json; charset=utf-8
2020-05-29 17:35:21,093 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:35:21,097 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:35:21,107 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 9.1177ms 204 
2020-05-29 17:35:21,113 [31] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:35:21,118 [31] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:35:21,130 [31] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:35:21,142 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:35:21,147 [31] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:35:21,174 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:35:21,204 [31] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:35:21,207 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 29.2783ms.
2020-05-29 17:35:21,209 [31] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:35:21,213 [31] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 67.3075ms
2020-05-29 17:35:21,219 [31] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 104.9218ms 200 application/json; charset=utf-8
2020-05-29 17:35:51,092 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:35:51,117 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:35:51,121 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 29.0545ms 204 
2020-05-29 17:35:51,137 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:35:51,140 [7] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:35:51,143 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:35:51,146 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:35:51,150 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:35:51,171 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:35:51,204 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (29ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:35:51,207 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 33.1365ms.
2020-05-29 17:35:51,209 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:35:51,211 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 62.9398ms
2020-05-29 17:35:51,219 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 77.7676ms 200 application/json; charset=utf-8
2020-05-29 17:36:21,092 [55] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:36:21,104 [55] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:36:21,122 [55] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 15.0035ms 204 
2020-05-29 17:36:21,128 [49] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:36:21,134 [49] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:36:21,137 [49] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:36:21,139 [49] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:36:21,143 [49] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:36:21,165 [49] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:36:21,189 [49] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:36:21,192 [49] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 24.3804ms.
2020-05-29 17:36:21,194 [49] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:36:21,199 [49] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 54.197ms
2020-05-29 17:36:21,225 [49] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 77.7277ms 200 application/json; charset=utf-8
2020-05-29 17:36:39,832 [55] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/queryGoodsByFmono?api-version=8  
2020-05-29 17:36:39,854 [55] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:36:39,857 [55] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 26.6733ms 204 
2020-05-29 17:36:39,882 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/queryGoodsByFmono?api-version=8 application/json;charset=UTF-8 22
2020-05-29 17:36:39,889 [7] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:36:39,892 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:36:39,894 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "QueryGoodsByFmono", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult QueryGoodsByFmono(DncZeus.Api.ViewModels.Man.Workshop.QuerySfModel) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-05-29 17:36:39,902 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:36:39,924 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.QueryGoodsByFmono (DncZeus.Api) - Validation state: Valid
2020-05-29 17:36:40,366 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (439ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
select t1.fMONo as 'fNo',t4.fGoodsCode,t4.fGoodsName,t2.fMoQty as 'fQty',t3.fUnitCode
,case when isnull(t3._x_f002,0) = 0 then t3.fUP else t3._x_f002 end * case when charindex('W',t1.fMONo) = 1 or charindex('PMC',t1.fordno) = 1 then 1 else 0.97 end   as fUP
from SF.DCF19_MY.dbo.t_MPSM_MOMst t1
inner join SF.DCF19_MY.dbo.t_MPSM_MOItem t2 on t1.fMONo = t2.fMONo
inner join SF.DCF19_MY.dbo.t_COPD_OrdItem t3 on t1.fOrdNo = t3.fOrdNo and t2.fGoodsID = t3.fGoodsID
inner join SF.DCF19_MY.dbo.t_BOMM_GoodsMst t4 on t2.fGoodsID = t4.fGoodsID
where t1.fMONo = @p0
2020-05-29 17:36:40,805 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (436ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select t1.fMONo as 'fNo',t4.fGoodsCode,t4.fGoodsName,t2.fMoQty as 'fQty',t3.fUnitCode
    ,case when isnull(t3._x_f002,0) = 0 then t3.fUP else t3._x_f002 end * case when charindex('W',t1.fMONo) = 1 or charindex('PMC',t1.fordno) = 1 then 1 else 0.97 end   as fUP
    from SF.DCF19_MY.dbo.t_MPSM_MOMst t1
    inner join SF.DCF19_MY.dbo.t_MPSM_MOItem t2 on t1.fMONo = t2.fMONo
    inner join SF.DCF19_MY.dbo.t_COPD_OrdItem t3 on t1.fOrdNo = t3.fOrdNo and t2.fGoodsID = t3.fGoodsID
    inner join SF.DCF19_MY.dbo.t_BOMM_GoodsMst t4 on t2.fGoodsID = t4.fGoodsID
    where t1.fMONo = @p0 
) AS [s]
2020-05-29 17:36:40,807 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.QueryGoodsByFmono (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 880.8932ms.
2020-05-29 17:36:40,809 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:36:40,814 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.QueryGoodsByFmono (DncZeus.Api) in 915.8291ms
2020-05-29 17:36:40,818 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 940.24ms 200 application/json; charset=utf-8
2020-05-29 17:36:51,091 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:36:51,094 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:36:51,098 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 6.9112ms 204 
2020-05-29 17:36:51,101 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:36:51,106 [7] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:36:51,108 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:36:51,113 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:36:51,118 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:36:51,142 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:36:51,172 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (26ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:36:51,176 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 30.0602ms.
2020-05-29 17:36:51,180 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:36:51,187 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 67.4063ms
2020-05-29 17:36:51,191 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 88.4641ms 200 application/json; charset=utf-8
2020-05-29 17:37:21,095 [49] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:37:21,115 [49] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:37:21,132 [49] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 26.2493ms 204 
2020-05-29 17:37:21,146 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:37:21,149 [7] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:37:21,154 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:37:21,157 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:37:21,159 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:37:21,181 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:37:21,207 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:37:21,209 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 25.7134ms.
2020-05-29 17:37:21,213 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:37:21,216 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 56.4568ms
2020-05-29 17:37:21,219 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 74.1792ms 200 application/json; charset=utf-8
2020-05-29 17:37:51,091 [55] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:37:51,108 [55] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:37:51,118 [55] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 19.3807ms 204 
2020-05-29 17:37:51,121 [49] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:37:51,124 [49] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:37:51,129 [49] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:37:51,132 [49] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:37:51,134 [49] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:37:51,155 [49] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:37:51,177 [49] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:37:51,181 [49] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23.2009ms.
2020-05-29 17:37:51,183 [49] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:37:51,196 [49] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 52.3552ms
2020-05-29 17:37:51,208 [49] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 78.1451ms 200 application/json; charset=utf-8
2020-05-29 17:38:15,128 [58] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-05-29 17:38:15,140 [58] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:38:15,144 [58] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 14.2011ms 204 
2020-05-29 17:38:15,157 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 176
2020-05-29 17:38:15,161 [7] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:38:15,164 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:38:15,167 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-05-29 17:38:15,170 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:38:15,190 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:38:15,224 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (31ms) [Parameters=[@p0='?', @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                        from ManWorkshopOut as b
                                        left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        where  b.workProcessGuid=@p1 
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-05-29 17:38:15,266 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (32ms) [Parameters=[@p0='?', @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                    from ManWorkshopOut as b
                                    left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    where  b.workProcessGuid=@p1 
) AS [w]
2020-05-29 17:38:15,270 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 75.9448ms.
2020-05-29 17:38:15,273 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:38:15,286 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 105.5862ms
2020-05-29 17:38:15,296 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 132.9107ms 200 application/json; charset=utf-8
2020-05-29 17:38:21,092 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:38:21,100 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:38:21,104 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 12.1807ms 204 
2020-05-29 17:38:21,118 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:38:21,122 [7] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:38:21,131 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:38:21,134 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:38:21,138 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:38:21,158 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:38:21,188 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:38:21,195 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 30.6388ms.
2020-05-29 17:38:21,198 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:38:21,206 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 64.762ms
2020-05-29 17:38:21,217 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 91.8541ms 200 application/json; charset=utf-8
2020-05-29 17:38:51,091 [58] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:38:51,110 [58] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:38:51,114 [58] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 22.395ms 204 
2020-05-29 17:38:51,161 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:38:51,164 [64] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:38:51,167 [64] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:38:51,169 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:38:51,172 [64] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:38:51,195 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:38:51,237 [64] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (25ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:38:51,249 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 41.6082ms.
2020-05-29 17:38:51,298 [64] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:38:51,302 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 128.8319ms
2020-05-29 17:38:51,318 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 187.9689ms 200 application/json; charset=utf-8
2020-05-29 17:39:21,092 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:39:21,106 [64] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:39:21,110 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 18.0582ms 204 
2020-05-29 17:39:21,112 [58] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:39:21,133 [58] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:39:21,135 [58] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:39:21,139 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:39:21,142 [58] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:39:21,163 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:39:21,188 [58] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:39:21,191 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 25.5622ms.
2020-05-29 17:39:21,195 [58] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:39:21,198 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 56.3528ms
2020-05-29 17:39:21,204 [58] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 89.958ms 200 application/json; charset=utf-8
2020-05-29 17:39:26,831 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v1/account/profile  
2020-05-29 17:39:26,837 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:39:26,847 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 12.9929ms 204 
2020-05-29 17:39:26,855 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v1/account/profile  
2020-05-29 17:39:26,884 [7] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:39:26,994 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:39:27,001 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Profile() on controller DncZeus.Api.Controllers.AccountController (DncZeus.Api).
2020-05-29 17:39:27,005 [7] INFO  Microsoft.AspNetCore.Authorization.DefaultAuthorizationService [(null)]  - Authorization was successful.
2020-05-29 17:39:27,009 [7] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:39:27,053 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) - Validation state: Valid
2020-05-29 17:39:27,094 [58] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (34ms) [Parameters=[@__Parse_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[ID], [x].[Code], [x].[Name], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser]
FROM [MisOrganization] AS [x]
WHERE [x].[ID] = @__Parse_0
2020-05-29 17:39:27,136 [58] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (36ms) [Parameters=[@__guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[EmpName], [x].[EmpNo], [x].[code], [x].[credate], [x].[creuser], [x].[depname], [x].[depno], [x].[email], [x].[enabled], [x].[jobname], [x].[jobno], [x].[moddate], [x].[moduser], [x].[pwd], [x].[telno], [x].[userLogo], [x].[username], [x].[userno], [x].[utype], [x].[wxAccount], [x].[wxId], [x].[wxMail], [x].[wxName], [x].[wxPhone], [x].[wxPwd]
FROM [Secuser] AS [x]
WHERE [x].[Guid] = @__guid_0
2020-05-29 17:39:27,179 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (35ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[Alias], [x].[BeforeCloseFun], [x].[Component], [x].[CreatedByUserGuid], [x].[CreatedByUserName], [x].[CreatedOn], [x].[Description], [x].[HideInMenu], [x].[Icon], [x].[IsDefaultRouter], [x].[IsDeleted], [x].[Level], [x].[ModifiedByUserGuid], [x].[ModifiedByUserName], [x].[ModifiedOn], [x].[Name], [x].[NotCache], [x].[ParentGuid], [x].[ParentName], [x].[Sort], [x].[Status], [x].[Url]
FROM [DncMenu] AS [x]
WHERE ([x].[IsDeleted] = 0) AND ([x].[Status] = 1)
2020-05-29 17:39:27,219 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (32ms) [Parameters=[@__user_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secuprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE [x].[userid] = @__user_Guid_0
ORDER BY [b0].[prgno]
2020-05-29 17:39:27,251 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (29ms) [Parameters=[@__groupid_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secgprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE CONVERT(VARCHAR(36), [x].[groupid]) = @__groupid_0
ORDER BY [b0].[prgno]
2020-05-29 17:39:27,254 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 198.3579ms.
2020-05-29 17:39:27,259 [7] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:39:27,263 [7] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) in 257.5957ms
2020-05-29 17:39:27,268 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 415.4013ms 200 application/json; charset=utf-8
2020-05-29 17:39:27,283 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-05-29 17:39:27,287 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:39:27,293 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 14.6325ms 204 
2020-05-29 17:39:27,296 [58] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-05-29 17:39:27,300 [58] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:39:27,302 [58] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:39:27,304 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "LoadMenuTree", controller = "Uprg"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult LoadMenuTree() on controller DncZeus.Api.Controllers.Api.Sec.UprgController (DncZeus.Api).
2020-05-29 17:39:27,308 [58] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:39:27,332 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) - Validation state: Valid
2020-05-29 17:39:27,357 [58] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[icon], [p].[sysname], [p].[sysno], [p].[sysorder]
FROM [Secsys] AS [p]
ORDER BY [p].[sysorder]
2020-05-29 17:39:27,388 [58] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (27ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[funname], [p].[funno], [p].[funorder], [p].[icon], [p].[sysid]
FROM [Secfun] AS [p]
ORDER BY [p].[funorder]
2020-05-29 17:39:27,423 [58] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (31ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[enabled], [x].[funid], [x].[icon], [x].[mainid], [x].[prgcomp], [x].[prgname], [x].[prgno], [x].[prgorder], [x].[prgtype], [x].[program], [x].[runtype], [x].[sysid]
FROM [Secprg] AS [x]
WHERE [x].[enabled] = 'Y'
ORDER BY [x].[prgorder]
2020-05-29 17:39:27,464 [58] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (36ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[butid], [p].[butname], [p].[butno], [p].[butorder], [p].[funid], [p].[prgid], [p].[sysid]
FROM [Secprgbut] AS [p]
ORDER BY [p].[butorder]
2020-05-29 17:39:27,468 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 132.9907ms.
2020-05-29 17:39:27,472 [58] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:39:27,479 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) in 169.1704ms
2020-05-29 17:39:27,485 [58] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 189.4019ms 200 application/json; charset=utf-8
2020-05-29 17:39:28,195 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-05-29 17:39:28,197 [71] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:39:28,204 [58] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-05-29 17:39:28,220 [71] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:39:28,221 [58] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:39:28,225 [7] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:39:28,230 [71] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 30.3801ms 204 
2020-05-29 17:39:28,234 [58] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 29.9298ms 204 
2020-05-29 17:39:28,238 [7] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 45.8897ms 204 
2020-05-29 17:39:28,241 [71] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:39:28,244 [58] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 140
2020-05-29 17:39:28,247 [71] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:39:28,250 [58] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:39:28,255 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-05-29 17:39:28,258 [58] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:39:28,261 [71] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:39:28,265 [64] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:39:28,268 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-05-29 17:39:28,279 [71] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:39:28,284 [64] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:39:28,288 [58] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:39:28,292 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-05-29 17:39:28,297 [71] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:39:28,330 [64] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:39:28,360 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:39:28,389 [71] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:39:28,412 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:39:28,413 [58] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (46ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                        from ManWorkshopOut as b
                                        left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        where  b.workProcessGuid=@p1 
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-05-29 17:39:28,456 [64] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (39ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-05-29 17:39:28,459 [71] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:39:28,499 [71] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 67.8861ms.
2020-05-29 17:39:28,500 [58] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (39ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                    from ManWorkshopOut as b
                                    left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    where  b.workProcessGuid=@p1 
) AS [w]
2020-05-29 17:39:28,503 [64] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-05-29 17:39:28,504 [71] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:39:28,506 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 142.7808ms.
2020-05-29 17:39:28,510 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 91.2321ms.
2020-05-29 17:39:28,512 [58] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:39:28,517 [71] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 223.8255ms
2020-05-29 17:39:28,519 [64] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:39:28,523 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 238.4424ms
2020-05-29 17:39:28,533 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 226.6126ms
2020-05-29 17:39:28,536 [58] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 286.1316ms 200 application/json; charset=utf-8
2020-05-29 17:39:28,538 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 285.0402ms 200 application/json; charset=utf-8
2020-05-29 17:39:28,550 [71] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 284.0303ms 200 application/json; charset=utf-8
2020-05-29 17:39:38,536 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8  
2020-05-29 17:39:38,538 [71] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8  
2020-05-29 17:39:38,540 [70] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workprocess/list?api-version=8  
2020-05-29 17:39:38,566 [64] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:39:38,569 [70] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:39:38,578 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 35.6742ms 204 
2020-05-29 17:39:38,584 [70] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 35.2442ms 204 
2020-05-29 17:39:38,587 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8 application/json;charset=UTF-8 132
2020-05-29 17:39:38,600 [70] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workprocess/list?api-version=8 application/json;charset=UTF-8 150
2020-05-29 17:39:38,603 [64] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:39:38,613 [70] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:39:38,614 [64] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:39:38,616 [71] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:39:38,620 [70] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:39:38,625 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkDate", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkDate(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-05-29 17:39:38,633 [71] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 89.1017ms 204 
2020-05-29 17:39:38,637 [64] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:39:38,646 [70] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workprocess"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workprocess.WorkprocessRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkprocessController (DncZeus.Api).
2020-05-29 17:39:38,649 [71] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 140
2020-05-29 17:39:38,670 [70] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:39:38,677 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) - Validation state: Valid
2020-05-29 17:39:38,712 [71] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:39:38,733 [70] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:39:38,735 [71] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:39:38,760 [71] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-05-29 17:39:38,761 [64] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (32ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__payload_workDate_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[cadre], [x].[cadreLeave], [x].[cadreRest], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[logistic], [x].[logisticLeave], [x].[logisticRest], [x].[moddate], [x].[moduser], [x].[workDate], [x].[worker], [x].[workerLeave], [x].[workerReste]
FROM [ManFactoryWorkdate] AS [x]
WHERE ([x].[factoryGuid] = @__payload_factoryGuid_0) AND ([x].[workDate] = @__payload_workDate_1)
2020-05-29 17:39:38,765 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 58.9279ms.
2020-05-29 17:39:38,766 [70] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (27ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[factoryGuid], [t].[workCode], [t].[workName], [t].[rate], [t].[isvalid], [t].[credate], [t].[creuser], [t].[moddate], [t].[moduser], [t].[factoryName]
FROM (
    SELECT [a].[Guid], [a].[OrgID], [a].[factoryGuid], [a].[workCode], [a].[workName], [a].[rate], [a].[isvalid], [a].[credate], [a].[creuser], [a].[moddate], [a].[moduser], [b].[name] AS [factoryName], ROW_NUMBER() OVER(ORDER BY [a].[factoryGuid], [a].[workCode]) AS [__RowNumber__]
    FROM [ManWorkProcess] AS [a]
    INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
    WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-05-29 17:39:38,767 [71] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:39:38,769 [64] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:39:38,806 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) in 160.9717ms
2020-05-29 17:39:38,813 [70] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (37ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkProcess] AS [a]
INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
2020-05-29 17:39:38,815 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 227.7667ms 200 application/json; charset=utf-8
2020-05-29 17:39:38,816 [71] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-05-29 17:39:38,817 [70] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 82.0815ms.
2020-05-29 17:39:38,820 [70] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:39:38,846 [70] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) in 194.9678ms
2020-05-29 17:39:38,853 [70] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 260.959ms 200 application/json; charset=utf-8
2020-05-29 17:39:38,877 [71] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (45ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty'  from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.qty) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=b.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=c.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=d.factoryGuid)
left join (
	select sum(outline.qty) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=e.factoryGuid)
left join (
select sum(outline.qty) as 'todayDoneOutQty',out.factoryGuid,out.Guid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.Guid,out.factoryGuid
) as g on(g.factoryGuid=f.factoryGuid)
2020-05-29 17:39:38,880 [71] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 60.0102ms.
2020-05-29 17:39:38,886 [71] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:39:38,898 [71] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 128.1359ms
2020-05-29 17:39:38,904 [71] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 265.5028ms 200 application/json; charset=utf-8
2020-05-29 17:39:40,364 [67] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-05-29 17:39:40,369 [67] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:39:40,380 [67] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 16.659ms 204 
2020-05-29 17:39:40,386 [58] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 176
2020-05-29 17:39:40,397 [58] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:39:40,400 [58] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:39:40,405 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-05-29 17:39:40,413 [58] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:39:40,438 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:39:40,479 [58] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (38ms) [Parameters=[@p0='?', @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                        from ManWorkshopOut as b
                                        left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        where  b.workProcessGuid=@p1 
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-05-29 17:39:40,510 [58] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (27ms) [Parameters=[@p0='?', @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                    from ManWorkshopOut as b
                                    left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    where  b.workProcessGuid=@p1 
) AS [w]
2020-05-29 17:39:40,514 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 72.5196ms.
2020-05-29 17:39:40,516 [58] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:39:40,520 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 110.7648ms
2020-05-29 17:39:40,524 [58] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 138.5029ms 200 application/json; charset=utf-8
2020-05-29 17:39:42,245 [68] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/queryGoodsByFmono?api-version=8  
2020-05-29 17:39:42,249 [68] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:39:42,253 [68] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 6.6773ms 204 
2020-05-29 17:39:42,261 [58] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/queryGoodsByFmono?api-version=8 application/json;charset=UTF-8 18
2020-05-29 17:39:42,266 [58] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:39:42,270 [58] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:39:42,276 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "QueryGoodsByFmono", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult QueryGoodsByFmono(DncZeus.Api.ViewModels.Man.Workshop.QuerySfModel) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-05-29 17:39:42,280 [58] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:39:42,302 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.QueryGoodsByFmono (DncZeus.Api) - Validation state: Valid
2020-05-29 17:39:42,968 [58] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (656ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
select t1.fMONo as 'fNo',t4.fGoodsCode,t4.fGoodsName,t2.fMoQty as 'fQty',t3.fUnitCode
,case when isnull(t3._x_f002,0) = 0 then t3.fUP else t3._x_f002 end * case when charindex('W',t1.fMONo) = 1 or charindex('PMC',t1.fordno) = 1 then 1 else 0.97 end   as fUP
from SF.DCF19_MY.dbo.t_MPSM_MOMst t1
inner join SF.DCF19_MY.dbo.t_MPSM_MOItem t2 on t1.fMONo = t2.fMONo
inner join SF.DCF19_MY.dbo.t_COPD_OrdItem t3 on t1.fOrdNo = t3.fOrdNo and t2.fGoodsID = t3.fGoodsID
inner join SF.DCF19_MY.dbo.t_BOMM_GoodsMst t4 on t2.fGoodsID = t4.fGoodsID
where t1.fMONo = @p0
2020-05-29 17:39:43,414 [58] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (442ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select t1.fMONo as 'fNo',t4.fGoodsCode,t4.fGoodsName,t2.fMoQty as 'fQty',t3.fUnitCode
    ,case when isnull(t3._x_f002,0) = 0 then t3.fUP else t3._x_f002 end * case when charindex('W',t1.fMONo) = 1 or charindex('PMC',t1.fordno) = 1 then 1 else 0.97 end   as fUP
    from SF.DCF19_MY.dbo.t_MPSM_MOMst t1
    inner join SF.DCF19_MY.dbo.t_MPSM_MOItem t2 on t1.fMONo = t2.fMONo
    inner join SF.DCF19_MY.dbo.t_COPD_OrdItem t3 on t1.fOrdNo = t3.fOrdNo and t2.fGoodsID = t3.fGoodsID
    inner join SF.DCF19_MY.dbo.t_BOMM_GoodsMst t4 on t2.fGoodsID = t4.fGoodsID
    where t1.fMONo = @p0 
) AS [s]
2020-05-29 17:39:43,420 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.QueryGoodsByFmono (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1112.9319ms.
2020-05-29 17:39:43,423 [58] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:39:43,428 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.QueryGoodsByFmono (DncZeus.Api) in 1147.3008ms
2020-05-29 17:39:43,437 [58] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 1171.9236ms 200 application/json; charset=utf-8
2020-05-29 17:39:58,054 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:39:58,059 [64] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:39:58,070 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 9.9755ms 204 
2020-05-29 17:39:58,072 [68] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:39:58,081 [68] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:39:58,085 [68] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:39:58,089 [68] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:39:58,097 [68] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:39:58,117 [68] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:39:58,143 [68] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:39:58,147 [68] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 26.8994ms.
2020-05-29 17:39:58,150 [68] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:39:58,154 [68] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 58.0168ms
2020-05-29 17:39:58,163 [68] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 84.5785ms 200 application/json; charset=utf-8
2020-05-29 17:40:06,367 [58] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-05-29 17:40:06,371 [58] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:40:06,378 [58] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 10.4465ms 204 
2020-05-29 17:40:06,383 [58] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 176
2020-05-29 17:40:06,391 [58] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:40:06,396 [58] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:40:06,399 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-05-29 17:40:06,403 [58] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:40:06,431 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:40:06,472 [58] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (36ms) [Parameters=[@p0='?', @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                        from ManWorkshopOut as b
                                        left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        where  b.workProcessGuid=@p1 
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-05-29 17:40:06,512 [58] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (35ms) [Parameters=[@p0='?', @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                    from ManWorkshopOut as b
                                    left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    where  b.workProcessGuid=@p1 
) AS [w]
2020-05-29 17:40:06,514 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 81.193ms.
2020-05-29 17:40:06,517 [58] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:40:06,519 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 117.8551ms
2020-05-29 17:40:06,521 [58] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 138.7046ms 200 application/json; charset=utf-8
2020-05-29 17:40:15,682 [70] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-05-29 17:40:15,692 [70] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:40:15,707 [70] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 29.5704ms 204 
2020-05-29 17:40:15,711 [58] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-05-29 17:40:15,717 [58] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:40:15,721 [58] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:40:15,736 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-05-29 17:40:15,742 [58] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:40:15,762 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:40:15,785 [58] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-05-29 17:40:15,808 [58] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-05-29 17:40:15,812 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 44.8613ms.
2020-05-29 17:40:15,814 [58] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:40:15,817 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 77.6245ms
2020-05-29 17:40:15,819 [58] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 111.0148ms 200 application/json; charset=utf-8
2020-05-29 17:40:19,744 [58] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/edit?api-version=8  
2020-05-29 17:40:19,749 [58] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:40:19,764 [58] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 11.7835ms 204 
2020-05-29 17:40:19,770 [74] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/edit?api-version=8 application/json;charset=UTF-8 269
2020-05-29 17:40:19,773 [74] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:40:19,782 [74] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:40:19,785 [74] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Edit", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Edit(DncZeus.Api.ViewModels.Man.Factory.FactoryCreateViewModel) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-05-29 17:40:19,788 [74] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:40:19,814 [74] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.Edit (DncZeus.Api) - Validation state: Valid
2020-05-29 17:40:19,846 [74] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (28ms) [Parameters=[@__model_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[cadre], [x].[code], [x].[countType], [x].[credate], [x].[creuser], [x].[logistic], [x].[moddate], [x].[moduser], [x].[name], [x].[pertargetOut], [x].[worker]
FROM [ManFactory] AS [x]
WHERE [x].[Guid] = @__model_Guid_0
2020-05-29 17:40:19,884 [74] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (34ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 1) (DbType = Byte), @p1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SET NOCOUNT ON;
UPDATE [ManFactory] SET [countType] = @p0, [moddate] = @p1
WHERE [Guid] = @p2;
SELECT @@ROWCOUNT;
2020-05-29 17:40:19,889 [74] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.Edit (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 71.7007ms.
2020-05-29 17:40:19,892 [74] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:40:19,895 [74] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.Edit (DncZeus.Api) in 107.6257ms
2020-05-29 17:40:19,898 [74] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 128.2565ms 200 application/json; charset=utf-8
2020-05-29 17:40:19,922 [74] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-05-29 17:40:19,927 [74] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:40:19,930 [74] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:40:19,932 [74] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-05-29 17:40:19,937 [74] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:40:19,962 [74] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:40:19,986 [74] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-05-29 17:40:20,017 [74] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (29ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-05-29 17:40:20,019 [74] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 55.2152ms.
2020-05-29 17:40:20,023 [74] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:40:20,030 [74] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 91.0707ms
2020-05-29 17:40:20,034 [74] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 116.871ms 200 application/json; charset=utf-8
2020-05-29 17:40:22,333 [67] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v1/account/profile  
2020-05-29 17:40:22,336 [67] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:40:22,343 [67] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 6.7173ms 204 
2020-05-29 17:40:22,346 [68] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v1/account/profile  
2020-05-29 17:40:22,349 [68] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:40:22,352 [68] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:40:22,358 [68] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Profile() on controller DncZeus.Api.Controllers.AccountController (DncZeus.Api).
2020-05-29 17:40:22,362 [68] INFO  Microsoft.AspNetCore.Authorization.DefaultAuthorizationService [(null)]  - Authorization was successful.
2020-05-29 17:40:22,366 [68] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:40:22,392 [68] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) - Validation state: Valid
2020-05-29 17:40:22,425 [67] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (28ms) [Parameters=[@__Parse_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[ID], [x].[Code], [x].[Name], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser]
FROM [MisOrganization] AS [x]
WHERE [x].[ID] = @__Parse_0
2020-05-29 17:40:22,463 [74] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (32ms) [Parameters=[@__guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[EmpName], [x].[EmpNo], [x].[code], [x].[credate], [x].[creuser], [x].[depname], [x].[depno], [x].[email], [x].[enabled], [x].[jobname], [x].[jobno], [x].[moddate], [x].[moduser], [x].[pwd], [x].[telno], [x].[userLogo], [x].[username], [x].[userno], [x].[utype], [x].[wxAccount], [x].[wxId], [x].[wxMail], [x].[wxName], [x].[wxPhone], [x].[wxPwd]
FROM [Secuser] AS [x]
WHERE [x].[Guid] = @__guid_0
2020-05-29 17:40:22,521 [68] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (41ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[Alias], [x].[BeforeCloseFun], [x].[Component], [x].[CreatedByUserGuid], [x].[CreatedByUserName], [x].[CreatedOn], [x].[Description], [x].[HideInMenu], [x].[Icon], [x].[IsDefaultRouter], [x].[IsDeleted], [x].[Level], [x].[ModifiedByUserGuid], [x].[ModifiedByUserName], [x].[ModifiedOn], [x].[Name], [x].[NotCache], [x].[ParentGuid], [x].[ParentName], [x].[Sort], [x].[Status], [x].[Url]
FROM [DncMenu] AS [x]
WHERE ([x].[IsDeleted] = 0) AND ([x].[Status] = 1)
2020-05-29 17:40:22,574 [68] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (44ms) [Parameters=[@__user_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secuprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE [x].[userid] = @__user_Guid_0
ORDER BY [b0].[prgno]
2020-05-29 17:40:22,676 [68] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (45ms) [Parameters=[@__groupid_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secgprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE CONVERT(VARCHAR(36), [x].[groupid]) = @__groupid_0
ORDER BY [b0].[prgno]
2020-05-29 17:40:22,691 [68] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 283.4817ms.
2020-05-29 17:40:22,704 [68] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:40:22,712 [68] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) in 349.4164ms
2020-05-29 17:40:22,723 [68] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 370.6941ms 200 application/json; charset=utf-8
2020-05-29 17:40:22,735 [74] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-05-29 17:40:22,740 [74] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:40:22,744 [74] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 11.2542ms 204 
2020-05-29 17:40:22,751 [58] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-05-29 17:40:22,755 [58] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:40:22,761 [58] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:40:22,764 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "LoadMenuTree", controller = "Uprg"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult LoadMenuTree() on controller DncZeus.Api.Controllers.Api.Sec.UprgController (DncZeus.Api).
2020-05-29 17:40:22,768 [58] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:40:22,800 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) - Validation state: Valid
2020-05-29 17:40:22,831 [58] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[icon], [p].[sysname], [p].[sysno], [p].[sysorder]
FROM [Secsys] AS [p]
ORDER BY [p].[sysorder]
2020-05-29 17:40:22,857 [58] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[funname], [p].[funno], [p].[funorder], [p].[icon], [p].[sysid]
FROM [Secfun] AS [p]
ORDER BY [p].[funorder]
2020-05-29 17:40:22,880 [58] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[enabled], [x].[funid], [x].[icon], [x].[mainid], [x].[prgcomp], [x].[prgname], [x].[prgno], [x].[prgorder], [x].[prgtype], [x].[program], [x].[runtype], [x].[sysid]
FROM [Secprg] AS [x]
WHERE [x].[enabled] = 'Y'
ORDER BY [x].[prgorder]
2020-05-29 17:40:22,904 [58] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[butid], [p].[butname], [p].[butno], [p].[butorder], [p].[funid], [p].[prgid], [p].[sysid]
FROM [Secprgbut] AS [p]
ORDER BY [p].[butorder]
2020-05-29 17:40:22,908 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 103.7928ms.
2020-05-29 17:40:22,910 [58] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:40:22,927 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) in 147.0307ms
2020-05-29 17:40:22,933 [58] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 181.986ms 200 application/json; charset=utf-8
2020-05-29 17:40:23,619 [67] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-05-29 17:40:23,650 [70] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:40:23,653 [58] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-05-29 17:40:23,664 [67] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:40:23,669 [70] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:40:23,694 [58] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:40:23,707 [67] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 49.7997ms 204 
2020-05-29 17:40:23,743 [58] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 80.8224ms 204 
2020-05-29 17:40:23,771 [67] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-05-29 17:40:23,778 [58] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 140
2020-05-29 17:40:23,800 [67] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:40:23,807 [70] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 57.4316ms 204 
2020-05-29 17:40:23,813 [58] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:40:23,816 [67] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:40:23,819 [70] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:40:23,821 [58] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:40:23,825 [67] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-05-29 17:40:23,827 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-05-29 17:40:23,830 [70] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:40:23,832 [58] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:40:23,834 [67] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:40:23,837 [70] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:40:23,867 [70] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:40:23,868 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:40:23,885 [70] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:40:23,886 [67] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:40:23,935 [58] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (46ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                        from ManWorkshopOut as b
                                        left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        where  b.workProcessGuid=@p1 
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-05-29 17:40:23,936 [70] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:40:23,939 [67] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (30ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-05-29 17:40:24,004 [58] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (43ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                    from ManWorkshopOut as b
                                    left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    where  b.workProcessGuid=@p1 
) AS [w]
2020-05-29 17:40:24,009 [70] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (43ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:40:24,011 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 122.4619ms.
2020-05-29 17:40:24,015 [67] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-05-29 17:40:24,017 [70] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 52.4831ms.
2020-05-29 17:40:24,019 [58] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:40:24,021 [67] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 114.8635ms.
2020-05-29 17:40:24,024 [70] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:40:24,026 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 194.1584ms
2020-05-29 17:40:24,032 [67] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:40:24,035 [70] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 161.2528ms
2020-05-29 17:40:24,052 [58] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 286.8286ms 200 application/json; charset=utf-8
2020-05-29 17:40:24,058 [67] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 208.2722ms
2020-05-29 17:40:24,077 [70] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 236.886ms 200 application/json; charset=utf-8
2020-05-29 17:40:24,079 [67] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 360.4528ms 200 application/json; charset=utf-8
2020-05-29 17:40:26,363 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8  
2020-05-29 17:40:26,367 [78] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8  
2020-05-29 17:40:26,396 [74] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workprocess/list?api-version=8  
2020-05-29 17:40:26,409 [78] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:40:26,413 [64] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:40:26,416 [74] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:40:26,421 [78] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 49.9056ms 204 
2020-05-29 17:40:26,428 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 58.6555ms 204 
2020-05-29 17:40:26,431 [74] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 54.8695ms 204 
2020-05-29 17:40:26,433 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workprocess/list?api-version=8 application/json;charset=UTF-8 150
2020-05-29 17:40:26,440 [78] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 140
2020-05-29 17:40:26,445 [74] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8 application/json;charset=UTF-8 132
2020-05-29 17:40:26,446 [64] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:40:26,449 [78] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:40:26,453 [74] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:40:26,454 [64] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:40:26,458 [78] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:40:26,461 [74] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:40:26,464 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workprocess"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workprocess.WorkprocessRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkprocessController (DncZeus.Api).
2020-05-29 17:40:26,466 [78] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-05-29 17:40:26,467 [74] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkDate", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkDate(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-05-29 17:40:26,471 [64] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:40:26,473 [78] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:40:26,476 [74] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:40:26,511 [78] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-05-29 17:40:26,537 [74] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) - Validation state: Valid
2020-05-29 17:40:26,538 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:40:26,599 [78] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (53ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty'  from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.qty) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=b.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=c.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=d.factoryGuid)
left join (
	select sum(outline.qty) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=e.factoryGuid)
left join (
select sum(outline.qty) as 'todayDoneOutQty',out.factoryGuid,out.Guid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.Guid,out.factoryGuid
) as g on(g.factoryGuid=f.factoryGuid)
2020-05-29 17:40:26,630 [74] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (29ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__payload_workDate_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[cadre], [x].[cadreLeave], [x].[cadreRest], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[logistic], [x].[logisticLeave], [x].[logisticRest], [x].[moddate], [x].[moduser], [x].[workDate], [x].[worker], [x].[workerLeave], [x].[workerReste]
FROM [ManFactoryWorkdate] AS [x]
WHERE ([x].[factoryGuid] = @__payload_factoryGuid_0) AND ([x].[workDate] = @__payload_workDate_1)
2020-05-29 17:40:26,631 [78] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 91.9479ms.
2020-05-29 17:40:26,633 [64] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (36ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[factoryGuid], [t].[workCode], [t].[workName], [t].[rate], [t].[isvalid], [t].[credate], [t].[creuser], [t].[moddate], [t].[moduser], [t].[factoryName]
FROM (
    SELECT [a].[Guid], [a].[OrgID], [a].[factoryGuid], [a].[workCode], [a].[workName], [a].[rate], [a].[isvalid], [a].[credate], [a].[creuser], [a].[moddate], [a].[moduser], [b].[name] AS [factoryName], ROW_NUMBER() OVER(ORDER BY [a].[factoryGuid], [a].[workCode]) AS [__RowNumber__]
    FROM [ManWorkProcess] AS [a]
    INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
    WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-05-29 17:40:26,634 [74] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 93.8931ms.
2020-05-29 17:40:26,636 [78] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:40:26,662 [74] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:40:26,665 [78] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 173.4519ms
2020-05-29 17:40:26,669 [74] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) in 194.09ms
2020-05-29 17:40:26,675 [64] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (29ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkProcess] AS [a]
INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
2020-05-29 17:40:26,677 [74] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 235.4631ms 200 application/json; charset=utf-8
2020-05-29 17:40:26,681 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 88.2719ms.
2020-05-29 17:40:26,682 [78] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 240.614ms 200 application/json; charset=utf-8
2020-05-29 17:40:26,690 [64] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:40:26,695 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) in 223.3649ms
2020-05-29 17:40:26,701 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 265.2959ms 200 application/json; charset=utf-8
2020-05-29 17:40:28,330 [58] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 176
2020-05-29 17:40:28,342 [58] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:40:28,348 [58] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:40:28,352 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-05-29 17:40:28,355 [58] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:40:28,375 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:40:28,407 [58] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (28ms) [Parameters=[@p0='?', @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                        from ManWorkshopOut as b
                                        left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        where  b.workProcessGuid=@p1 
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-05-29 17:40:28,436 [58] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (26ms) [Parameters=[@p0='?', @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                    from ManWorkshopOut as b
                                    left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    where  b.workProcessGuid=@p1 
) AS [w]
2020-05-29 17:40:28,439 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 61.1449ms.
2020-05-29 17:40:28,443 [58] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:40:28,447 [58] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 92.2079ms
2020-05-29 17:40:28,451 [58] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 120.279ms 200 application/json; charset=utf-8
2020-05-29 17:40:29,896 [58] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/queryGoodsByOrder?api-version=8  
2020-05-29 17:40:29,900 [58] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:40:29,909 [58] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 10.8536ms 204 
2020-05-29 17:40:29,913 [74] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/queryGoodsByOrder?api-version=8 application/json;charset=UTF-8 18
2020-05-29 17:40:29,917 [74] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:40:29,921 [74] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:40:29,929 [74] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "QueryGoodsByOrder", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult QueryGoodsByOrder(DncZeus.Api.ViewModels.Man.Workshop.QuerySfModel) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-05-29 17:40:29,934 [74] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:40:29,960 [74] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.QueryGoodsByOrder (DncZeus.Api) - Validation state: Valid
2020-05-29 17:40:30,521 [74] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (553ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
select t1.fOrdNo as 'fNo',t4.fGoodsCode,t4.fGoodsName,t3.fOrdQty as 'fQty',t3.fUnitCode
,case when isnull(t3._x_f002,0) = 0 then t3.fUP else t3._x_f002 end * case when charindex('PMC',t1.fordno) = 1 then 1 else 0.97 end   as fUP
from SF.DCF19_MY.dbo.t_copd_ordmst t1
inner join SF.DCF19_MY.dbo.t_COPD_OrdItem t3 on t1.fOrdNo = t3.fOrdNo
inner join SF.DCF19_MY.dbo.t_BOMM_GoodsMst t4 on t3.fGoodsID = t4.fGoodsID
where t1.fOrdNo =@p0
2020-05-29 17:40:30,949 [74] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (422ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select t1.fOrdNo as 'fNo',t4.fGoodsCode,t4.fGoodsName,t3.fOrdQty as 'fQty',t3.fUnitCode
    ,case when isnull(t3._x_f002,0) = 0 then t3.fUP else t3._x_f002 end * case when charindex('PMC',t1.fordno) = 1 then 1 else 0.97 end   as fUP
    from SF.DCF19_MY.dbo.t_copd_ordmst t1
    inner join SF.DCF19_MY.dbo.t_COPD_OrdItem t3 on t1.fOrdNo = t3.fOrdNo
    inner join SF.DCF19_MY.dbo.t_BOMM_GoodsMst t4 on t3.fGoodsID = t4.fGoodsID
    where t1.fOrdNo =@p0 
) AS [s]
2020-05-29 17:40:30,952 [74] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.QueryGoodsByOrder (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 988.0888ms.
2020-05-29 17:40:30,956 [74] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:40:30,960 [74] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.QueryGoodsByOrder (DncZeus.Api) in 1026.7365ms
2020-05-29 17:40:30,964 [74] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 1051.0181ms 200 application/json; charset=utf-8
2020-05-29 17:40:53,516 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:40:53,534 [64] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:40:53,538 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 22.1176ms 204 
2020-05-29 17:40:53,543 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:40:53,560 [64] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:40:53,562 [64] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:40:53,565 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:40:53,568 [64] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:40:53,589 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:40:53,612 [64] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:40:53,615 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.9625ms.
2020-05-29 17:40:53,616 [64] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:40:53,619 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 51.5223ms
2020-05-29 17:40:53,624 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 79.6308ms 200 application/json; charset=utf-8
2020-05-29 17:41:20,216 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/batch?api-version=8&command=delete&ids=dd2fdbdd-f2ec-45e6-bdc8-c376a7b07d6e  
2020-05-29 17:41:20,231 [64] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:41:20,261 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 18.4322ms 204 
2020-05-29 17:41:20,283 [80] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v8/man/workshop/batch?api-version=8&command=delete&ids=dd2fdbdd-f2ec-45e6-bdc8-c376a7b07d6e  
2020-05-29 17:41:20,288 [80] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:41:20,295 [80] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:41:20,300 [80] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Batch", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Batch(System.String, System.String) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-05-29 17:41:20,305 [80] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:41:20,330 [80] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.Batch (DncZeus.Api) - Validation state: Valid
2020-05-29 17:41:20,372 [80] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (36ms) [Parameters=[@p0='?' (Size = 36)], CommandType='Text', CommandTimeout='6000000']
DELETE FROM ManWorkshopOut WHERE Guid IN (@p0)
2020-05-29 17:41:20,396 [80] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@p0='?' (Size = 36)], CommandType='Text', CommandTimeout='6000000']
DELETE FROM ManWorkshopOutLine WHERE workshopOutGuid IN (@p0)
2020-05-29 17:41:20,398 [80] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.Batch (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 65.5554ms.
2020-05-29 17:41:20,399 [80] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:41:20,403 [80] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.Batch (DncZeus.Api) in 100.2082ms
2020-05-29 17:41:20,406 [80] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 128.5871ms 200 application/json; charset=utf-8
2020-05-29 17:41:20,417 [80] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-05-29 17:41:20,422 [80] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:41:20,426 [80] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 7.2589ms 204 
2020-05-29 17:41:20,429 [80] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 176
2020-05-29 17:41:20,432 [80] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:41:20,436 [80] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:41:20,439 [80] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-05-29 17:41:20,443 [80] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:41:20,462 [80] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:41:20,498 [80] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (32ms) [Parameters=[@p0='?', @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                        from ManWorkshopOut as b
                                        left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        where  b.workProcessGuid=@p1 
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-05-29 17:41:20,531 [80] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (29ms) [Parameters=[@p0='?', @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                    from ManWorkshopOut as b
                                    left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    where  b.workProcessGuid=@p1 
) AS [w]
2020-05-29 17:41:20,534 [80] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 68.5563ms.
2020-05-29 17:41:20,536 [80] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:41:20,541 [80] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 97.0034ms
2020-05-29 17:41:20,548 [80] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 117.194ms 200 application/json; charset=utf-8
2020-05-29 17:41:23,512 [80] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:41:23,514 [80] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:41:23,519 [80] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.3853ms 204 
2020-05-29 17:41:23,522 [80] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:41:23,527 [80] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:41:23,531 [80] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:41:23,535 [80] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:41:23,538 [80] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:41:23,559 [80] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:41:23,582 [80] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:41:23,584 [80] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.6282ms.
2020-05-29 17:41:23,588 [80] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:41:23,594 [80] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 52.8892ms
2020-05-29 17:41:23,600 [80] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 75.832ms 200 application/json; charset=utf-8
2020-05-29 17:41:53,512 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:41:53,525 [64] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:41:53,538 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 15.466ms 204 
2020-05-29 17:41:53,540 [82] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:41:53,545 [82] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:41:53,547 [82] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:41:53,550 [82] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:41:53,554 [82] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:41:53,574 [82] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:41:53,603 [82] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:41:53,610 [82] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 28.9289ms.
2020-05-29 17:41:53,612 [82] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:41:53,617 [82] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 62.9841ms
2020-05-29 17:41:53,621 [82] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 79.012ms 200 application/json; charset=utf-8
2020-05-29 17:42:18,370 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v1/account/profile  
2020-05-29 17:42:18,396 [64] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:42:18,403 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 29.9229ms 204 
2020-05-29 17:42:18,408 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v1/account/profile  
2020-05-29 17:42:18,422 [75] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:42:18,424 [75] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:42:18,426 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Profile() on controller DncZeus.Api.Controllers.AccountController (DncZeus.Api).
2020-05-29 17:42:18,429 [75] INFO  Microsoft.AspNetCore.Authorization.DefaultAuthorizationService [(null)]  - Authorization was successful.
2020-05-29 17:42:18,431 [75] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:42:18,448 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) - Validation state: Valid
2020-05-29 17:42:18,476 [85] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[@__Parse_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[ID], [x].[Code], [x].[Name], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser]
FROM [MisOrganization] AS [x]
WHERE [x].[ID] = @__Parse_0
2020-05-29 17:42:18,505 [82] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (27ms) [Parameters=[@__guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[EmpName], [x].[EmpNo], [x].[code], [x].[credate], [x].[creuser], [x].[depname], [x].[depno], [x].[email], [x].[enabled], [x].[jobname], [x].[jobno], [x].[moddate], [x].[moduser], [x].[pwd], [x].[telno], [x].[userLogo], [x].[username], [x].[userno], [x].[utype], [x].[wxAccount], [x].[wxId], [x].[wxMail], [x].[wxName], [x].[wxPhone], [x].[wxPwd]
FROM [Secuser] AS [x]
WHERE [x].[Guid] = @__guid_0
2020-05-29 17:42:18,533 [75] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[Alias], [x].[BeforeCloseFun], [x].[Component], [x].[CreatedByUserGuid], [x].[CreatedByUserName], [x].[CreatedOn], [x].[Description], [x].[HideInMenu], [x].[Icon], [x].[IsDefaultRouter], [x].[IsDeleted], [x].[Level], [x].[ModifiedByUserGuid], [x].[ModifiedByUserName], [x].[ModifiedOn], [x].[Name], [x].[NotCache], [x].[ParentGuid], [x].[ParentName], [x].[Sort], [x].[Status], [x].[Url]
FROM [DncMenu] AS [x]
WHERE ([x].[IsDeleted] = 0) AND ([x].[Status] = 1)
2020-05-29 17:42:18,560 [75] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__user_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secuprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE [x].[userid] = @__user_Guid_0
ORDER BY [b0].[prgno]
2020-05-29 17:42:18,593 [75] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[@__groupid_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secgprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE CONVERT(VARCHAR(36), [x].[groupid]) = @__groupid_0
ORDER BY [b0].[prgno]
2020-05-29 17:42:18,597 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 145.4983ms.
2020-05-29 17:42:18,599 [75] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:42:18,608 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) in 173.564ms
2020-05-29 17:42:18,611 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 202.0988ms 200 application/json; charset=utf-8
2020-05-29 17:42:18,617 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-05-29 17:42:18,621 [64] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:42:18,623 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.9786ms 204 
2020-05-29 17:42:18,626 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-05-29 17:42:18,629 [75] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:42:18,631 [75] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:42:18,632 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "LoadMenuTree", controller = "Uprg"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult LoadMenuTree() on controller DncZeus.Api.Controllers.Api.Sec.UprgController (DncZeus.Api).
2020-05-29 17:42:18,634 [75] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:42:18,656 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) - Validation state: Valid
2020-05-29 17:42:18,677 [75] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[icon], [p].[sysname], [p].[sysno], [p].[sysorder]
FROM [Secsys] AS [p]
ORDER BY [p].[sysorder]
2020-05-29 17:42:18,700 [75] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[funname], [p].[funno], [p].[funorder], [p].[icon], [p].[sysid]
FROM [Secfun] AS [p]
ORDER BY [p].[funorder]
2020-05-29 17:42:18,722 [75] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[enabled], [x].[funid], [x].[icon], [x].[mainid], [x].[prgcomp], [x].[prgname], [x].[prgno], [x].[prgorder], [x].[prgtype], [x].[program], [x].[runtype], [x].[sysid]
FROM [Secprg] AS [x]
WHERE [x].[enabled] = 'Y'
ORDER BY [x].[prgorder]
2020-05-29 17:42:18,745 [75] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[butid], [p].[butname], [p].[butno], [p].[butorder], [p].[funid], [p].[prgid], [p].[sysid]
FROM [Secprgbut] AS [p]
ORDER BY [p].[butorder]
2020-05-29 17:42:18,748 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 90.4638ms.
2020-05-29 17:42:18,751 [75] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:42:18,756 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) in 118.9467ms
2020-05-29 17:42:18,759 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 131.7989ms 200 application/json; charset=utf-8
2020-05-29 17:42:19,328 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-05-29 17:42:19,329 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:42:19,332 [85] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-05-29 17:42:19,334 [75] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:42:19,357 [64] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:42:19,358 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 17.2748ms 204 
2020-05-29 17:42:19,361 [85] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:42:19,385 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 33.827ms 204 
2020-05-29 17:42:19,393 [85] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 55.5991ms 204 
2020-05-29 17:42:19,395 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-05-29 17:42:19,397 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 140
2020-05-29 17:42:19,398 [85] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:42:19,400 [75] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:42:19,402 [64] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:42:19,404 [85] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:42:19,406 [75] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:42:19,407 [64] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:42:19,408 [85] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:42:19,410 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-05-29 17:42:19,411 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-05-29 17:42:19,413 [85] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:42:19,415 [75] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:42:19,417 [64] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:42:19,421 [85] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:42:19,440 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:42:19,469 [85] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:42:19,471 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:42:19,509 [75] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (37ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-05-29 17:42:19,528 [85] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:42:19,550 [85] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 41.285ms.
2020-05-29 17:42:19,554 [64] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (43ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                        from ManWorkshopOut as b
                                        left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        where  b.workProcessGuid=@p1 
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-05-29 17:42:19,556 [75] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-05-29 17:42:19,558 [85] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:42:19,561 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 92.0478ms.
2020-05-29 17:42:19,629 [85] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 206.2997ms
2020-05-29 17:42:19,631 [75] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:42:19,633 [85] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 234.4909ms 200 application/json; charset=utf-8
2020-05-29 17:42:19,637 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 220.5915ms
2020-05-29 17:42:19,641 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 275.3722ms 200 application/json; charset=utf-8
2020-05-29 17:42:19,644 [64] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (80ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                    from ManWorkshopOut as b
                                    left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    where  b.workProcessGuid=@p1 
) AS [w]
2020-05-29 17:42:19,647 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 156.5518ms.
2020-05-29 17:42:19,649 [64] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:42:19,653 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 236.1758ms
2020-05-29 17:42:19,657 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 259.1184ms 200 application/json; charset=utf-8
2020-05-29 17:42:23,532 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8  
2020-05-29 17:42:23,534 [85] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8  
2020-05-29 17:42:23,537 [82] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workprocess/list?api-version=8  
2020-05-29 17:42:23,544 [75] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:42:23,546 [82] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:42:23,548 [85] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:42:23,555 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 21.8101ms 204 
2020-05-29 17:42:23,559 [82] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 17.9609ms 204 
2020-05-29 17:42:23,562 [85] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 22.2053ms 204 
2020-05-29 17:42:23,565 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8 application/json;charset=UTF-8 132
2020-05-29 17:42:23,567 [82] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workprocess/list?api-version=8 application/json;charset=UTF-8 150
2020-05-29 17:42:23,572 [85] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 140
2020-05-29 17:42:23,573 [75] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:42:23,577 [82] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:42:23,580 [85] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:42:23,581 [75] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:42:23,586 [82] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:42:23,592 [85] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:42:23,594 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkDate", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkDate(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-05-29 17:42:23,604 [82] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workprocess"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workprocess.WorkprocessRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkprocessController (DncZeus.Api).
2020-05-29 17:42:23,607 [85] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-05-29 17:42:23,609 [75] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:42:23,611 [82] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:42:23,648 [85] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:42:23,650 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) - Validation state: Valid
2020-05-29 17:42:23,654 [82] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:42:23,690 [75] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (35ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__payload_workDate_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[cadre], [x].[cadreLeave], [x].[cadreRest], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[logistic], [x].[logisticLeave], [x].[logisticRest], [x].[moddate], [x].[moduser], [x].[workDate], [x].[worker], [x].[workerLeave], [x].[workerReste]
FROM [ManFactoryWorkdate] AS [x]
WHERE ([x].[factoryGuid] = @__payload_factoryGuid_0) AND ([x].[workDate] = @__payload_workDate_1)
2020-05-29 17:42:23,691 [85] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-05-29 17:42:23,694 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 39.3002ms.
2020-05-29 17:42:23,730 [82] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (35ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[factoryGuid], [t].[workCode], [t].[workName], [t].[rate], [t].[isvalid], [t].[credate], [t].[creuser], [t].[moddate], [t].[moduser], [t].[factoryName]
FROM (
    SELECT [a].[Guid], [a].[OrgID], [a].[factoryGuid], [a].[workCode], [a].[workName], [a].[rate], [a].[isvalid], [a].[credate], [a].[creuser], [a].[moddate], [a].[moduser], [b].[name] AS [factoryName], ROW_NUMBER() OVER(ORDER BY [a].[factoryGuid], [a].[workCode]) AS [__RowNumber__]
    FROM [ManWorkProcess] AS [a]
    INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
    WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-05-29 17:42:23,733 [75] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:42:23,741 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) in 130.5381ms
2020-05-29 17:42:23,764 [85] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (50ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty'  from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.qty) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=b.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=c.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=d.factoryGuid)
left join (
	select sum(outline.qty) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=e.factoryGuid)
left join (
select sum(outline.qty) as 'todayDoneOutQty',out.factoryGuid,out.Guid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.Guid,out.factoryGuid
) as g on(g.factoryGuid=f.factoryGuid)
2020-05-29 17:42:23,766 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 200.1419ms 200 application/json; charset=utf-8
2020-05-29 17:42:23,769 [82] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (26ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkProcess] AS [a]
INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
2020-05-29 17:42:23,772 [85] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 72.0088ms.
2020-05-29 17:42:23,775 [82] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 99.0496ms.
2020-05-29 17:42:23,778 [85] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:42:23,783 [82] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:42:23,785 [85] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 169.1914ms
2020-05-29 17:42:23,794 [82] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) in 181.097ms
2020-05-29 17:42:23,796 [85] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 222.6328ms 200 application/json; charset=utf-8
2020-05-29 17:42:23,800 [82] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 232.9027ms 200 application/json; charset=utf-8
2020-05-29 17:42:25,568 [82] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-05-29 17:42:25,572 [82] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:42:25,576 [82] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 7.3298ms 204 
2020-05-29 17:42:25,578 [87] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 176
2020-05-29 17:42:25,581 [87] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:42:25,582 [87] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:42:25,585 [87] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-05-29 17:42:25,588 [87] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:42:25,607 [87] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:42:25,639 [87] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (28ms) [Parameters=[@p0='?', @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                        from ManWorkshopOut as b
                                        left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        where  b.workProcessGuid=@p1 
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-05-29 17:42:25,667 [87] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[@p0='?', @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                    from ManWorkshopOut as b
                                    left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    where  b.workProcessGuid=@p1 
) AS [w]
2020-05-29 17:42:25,670 [87] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 59.4375ms.
2020-05-29 17:42:25,673 [87] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:42:25,675 [87] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 88.1611ms
2020-05-29 17:42:25,677 [87] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 99.8304ms 200 application/json; charset=utf-8
2020-05-29 17:42:49,253 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:42:49,262 [75] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:42:49,272 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 11.9676ms 204 
2020-05-29 17:42:49,282 [87] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:42:49,286 [87] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:42:49,288 [87] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:42:49,291 [87] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:42:49,296 [87] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:42:49,319 [87] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:42:49,346 [87] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (23ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:42:49,349 [87] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 27.138ms.
2020-05-29 17:42:49,352 [87] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:42:49,356 [87] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 61.3299ms
2020-05-29 17:42:49,360 [87] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 84.6272ms 200 application/json; charset=utf-8
2020-05-29 17:43:19,223 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:43:19,226 [64] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:43:19,237 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 11.445ms 204 
2020-05-29 17:43:19,251 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:43:19,255 [75] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:43:19,257 [75] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:43:19,260 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:43:19,263 [75] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:43:19,288 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:43:19,313 [75] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:43:19,315 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 25.0041ms.
2020-05-29 17:43:19,320 [75] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:43:19,323 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 59.8689ms
2020-05-29 17:43:19,336 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 77.8541ms 200 application/json; charset=utf-8
2020-05-29 17:43:49,252 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:43:49,262 [64] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:43:49,266 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 12.8625ms 204 
2020-05-29 17:43:49,278 [88] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:43:49,283 [88] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:43:49,286 [88] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:43:49,289 [88] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:43:49,291 [88] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:43:49,319 [88] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:43:49,355 [88] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (33ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:43:49,358 [88] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 36.2066ms.
2020-05-29 17:43:49,360 [88] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:43:49,363 [88] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 71.3366ms
2020-05-29 17:43:49,366 [88] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 94.6842ms 200 application/json; charset=utf-8
2020-05-29 17:44:19,226 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:44:19,238 [75] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:44:19,240 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 14.8743ms 204 
2020-05-29 17:44:19,255 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:44:19,259 [64] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:44:19,262 [64] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:44:19,265 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:44:19,268 [64] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:44:19,292 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:44:19,315 [64] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:44:19,318 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23.3861ms.
2020-05-29 17:44:19,319 [64] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:44:19,321 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 54.2423ms
2020-05-29 17:44:19,325 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 69.1249ms 200 application/json; charset=utf-8
2020-05-29 17:44:35,987 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v1/account/profile  
2020-05-29 17:44:35,998 [75] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:44:36,020 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 13.5494ms 204 
2020-05-29 17:44:36,022 [94] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v1/account/profile  
2020-05-29 17:44:36,071 [94] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:44:36,173 [94] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:44:36,238 [94] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Profile() on controller DncZeus.Api.Controllers.AccountController (DncZeus.Api).
2020-05-29 17:44:36,242 [94] INFO  Microsoft.AspNetCore.Authorization.DefaultAuthorizationService [(null)]  - Authorization was successful.
2020-05-29 17:44:36,248 [94] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:44:36,273 [94] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) - Validation state: Valid
2020-05-29 17:44:36,328 [64] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (51ms) [Parameters=[@__Parse_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[ID], [x].[Code], [x].[Name], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser]
FROM [MisOrganization] AS [x]
WHERE [x].[ID] = @__Parse_0
2020-05-29 17:44:36,391 [64] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (43ms) [Parameters=[@__guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[EmpName], [x].[EmpNo], [x].[code], [x].[credate], [x].[creuser], [x].[depname], [x].[depno], [x].[email], [x].[enabled], [x].[jobname], [x].[jobno], [x].[moddate], [x].[moduser], [x].[pwd], [x].[telno], [x].[userLogo], [x].[username], [x].[userno], [x].[utype], [x].[wxAccount], [x].[wxId], [x].[wxMail], [x].[wxName], [x].[wxPhone], [x].[wxPwd]
FROM [Secuser] AS [x]
WHERE [x].[Guid] = @__guid_0
2020-05-29 17:44:36,443 [94] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (39ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[Alias], [x].[BeforeCloseFun], [x].[Component], [x].[CreatedByUserGuid], [x].[CreatedByUserName], [x].[CreatedOn], [x].[Description], [x].[HideInMenu], [x].[Icon], [x].[IsDefaultRouter], [x].[IsDeleted], [x].[Level], [x].[ModifiedByUserGuid], [x].[ModifiedByUserName], [x].[ModifiedOn], [x].[Name], [x].[NotCache], [x].[ParentGuid], [x].[ParentName], [x].[Sort], [x].[Status], [x].[Url]
FROM [DncMenu] AS [x]
WHERE ([x].[IsDeleted] = 0) AND ([x].[Status] = 1)
2020-05-29 17:44:36,478 [94] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (31ms) [Parameters=[@__user_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secuprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE [x].[userid] = @__user_Guid_0
ORDER BY [b0].[prgno]
2020-05-29 17:44:36,517 [94] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (33ms) [Parameters=[@__groupid_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secgprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE CONVERT(VARCHAR(36), [x].[groupid]) = @__groupid_0
ORDER BY [b0].[prgno]
2020-05-29 17:44:36,519 [94] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 243.8628ms.
2020-05-29 17:44:36,521 [94] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:44:36,524 [94] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) in 283.274ms
2020-05-29 17:44:36,527 [94] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 519.8825ms 200 application/json; charset=utf-8
2020-05-29 17:44:36,534 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-05-29 17:44:36,537 [75] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:44:36,540 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 5.1742ms 204 
2020-05-29 17:44:36,545 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-05-29 17:44:36,548 [75] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:44:36,551 [75] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:44:36,553 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "LoadMenuTree", controller = "Uprg"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult LoadMenuTree() on controller DncZeus.Api.Controllers.Api.Sec.UprgController (DncZeus.Api).
2020-05-29 17:44:36,556 [75] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:44:36,575 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) - Validation state: Valid
2020-05-29 17:44:36,602 [75] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[icon], [p].[sysname], [p].[sysno], [p].[sysorder]
FROM [Secsys] AS [p]
ORDER BY [p].[sysorder]
2020-05-29 17:44:36,642 [75] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (36ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[funname], [p].[funno], [p].[funorder], [p].[icon], [p].[sysid]
FROM [Secfun] AS [p]
ORDER BY [p].[funorder]
2020-05-29 17:44:36,673 [75] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[enabled], [x].[funid], [x].[icon], [x].[mainid], [x].[prgcomp], [x].[prgname], [x].[prgno], [x].[prgorder], [x].[prgtype], [x].[program], [x].[runtype], [x].[sysid]
FROM [Secprg] AS [x]
WHERE [x].[enabled] = 'Y'
ORDER BY [x].[prgorder]
2020-05-29 17:44:36,701 [75] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[butid], [p].[butname], [p].[butno], [p].[butorder], [p].[funid], [p].[prgid], [p].[sysid]
FROM [Secprgbut] AS [p]
ORDER BY [p].[butorder]
2020-05-29 17:44:36,705 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 127.0866ms.
2020-05-29 17:44:36,707 [75] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:44:36,710 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) in 153.7218ms
2020-05-29 17:44:36,713 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 168.6379ms 200 application/json; charset=utf-8
2020-05-29 17:44:37,460 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-05-29 17:44:37,462 [98] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:44:37,475 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-05-29 17:44:37,484 [98] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:44:37,493 [64] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:44:37,496 [96] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:44:37,498 [98] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 31.1686ms 204 
2020-05-29 17:44:37,505 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 40.2605ms 204 
2020-05-29 17:44:37,507 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 48.3936ms 204 
2020-05-29 17:44:37,509 [98] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:44:37,512 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-05-29 17:44:37,519 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 140
2020-05-29 17:44:37,521 [98] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:44:37,525 [75] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:44:37,533 [98] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:44:37,536 [64] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:44:37,541 [98] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:44:37,549 [64] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:44:37,552 [75] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:44:37,556 [98] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:44:37,592 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-05-29 17:44:37,607 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-05-29 17:44:37,611 [98] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:44:37,679 [75] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:44:37,727 [64] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:44:37,787 [98] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (86ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:44:37,789 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:44:37,821 [98] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 176.8228ms.
2020-05-29 17:44:37,840 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:44:37,846 [98] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:44:37,874 [75] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (51ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-05-29 17:44:37,925 [98] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 329.5854ms
2020-05-29 17:44:38,022 [64] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (79ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                        from ManWorkshopOut as b
                                        left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        where  b.workProcessGuid=@p1 
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-05-29 17:44:38,057 [75] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (49ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-05-29 17:44:38,096 [98] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 427.3636ms 200 application/json; charset=utf-8
2020-05-29 17:44:38,101 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 269.1387ms.
2020-05-29 17:44:38,106 [75] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:44:38,114 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 494.9084ms
2020-05-29 17:44:38,122 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 605.929ms 200 application/json; charset=utf-8
2020-05-29 17:44:38,124 [64] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (61ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                    from ManWorkshopOut as b
                                    left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    where  b.workProcessGuid=@p1 
) AS [w]
2020-05-29 17:44:38,135 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 283.8747ms.
2020-05-29 17:44:38,143 [64] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:44:38,151 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 533.2543ms
2020-05-29 17:44:38,163 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 642.9649ms 200 application/json; charset=utf-8
2020-05-29 17:44:39,722 [94] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8  
2020-05-29 17:44:39,724 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8  
2020-05-29 17:44:39,727 [103] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workprocess/list?api-version=8  
2020-05-29 17:44:39,741 [94] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:44:39,752 [64] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:44:39,758 [94] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 23.8104ms 204 
2020-05-29 17:44:39,761 [103] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:44:39,769 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 36.2859ms 204 
2020-05-29 17:44:39,780 [103] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 40.1783ms 204 
2020-05-29 17:44:39,783 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkshopInfo?api-version=8 application/json;charset=UTF-8 140
2020-05-29 17:44:39,787 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factoryworkshop/getFactoryWorkDate?api-version=8 application/json;charset=UTF-8 132
2020-05-29 17:44:39,789 [103] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workprocess/list?api-version=8 application/json;charset=UTF-8 150
2020-05-29 17:44:39,794 [75] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:44:39,796 [64] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:44:39,800 [103] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:44:39,801 [75] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:44:39,806 [64] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:44:39,807 [103] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:44:39,809 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkshopInfo", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkshopInfo(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-05-29 17:44:39,810 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetFactoryWorkDate", controller = "FactoryWorkshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetFactoryWorkDate(DncZeus.Api.RequestPayload.Man.FactoryWorkshop.FactoryWorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController (DncZeus.Api).
2020-05-29 17:44:39,813 [103] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workprocess"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workprocess.WorkprocessRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkprocessController (DncZeus.Api).
2020-05-29 17:44:39,819 [75] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:44:39,821 [103] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:44:39,822 [64] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:44:39,851 [103] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:44:39,923 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) - Validation state: Valid
2020-05-29 17:44:39,926 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) - Validation state: Valid
2020-05-29 17:44:39,932 [103] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (47ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[factoryGuid], [t].[workCode], [t].[workName], [t].[rate], [t].[isvalid], [t].[credate], [t].[creuser], [t].[moddate], [t].[moduser], [t].[factoryName]
FROM (
    SELECT [a].[Guid], [a].[OrgID], [a].[factoryGuid], [a].[workCode], [a].[workName], [a].[rate], [a].[isvalid], [a].[credate], [a].[creuser], [a].[moddate], [a].[moduser], [b].[name] AS [factoryName], ROW_NUMBER() OVER(ORDER BY [a].[factoryGuid], [a].[workCode]) AS [__RowNumber__]
    FROM [ManWorkProcess] AS [a]
    INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
    WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-05-29 17:44:40,001 [75] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (70ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']

select a.factoryGuid,a.yearPlanOutQty,isnull(b.monPlanOutQty,0) as 'monPlanOutQty',isnull(c.monAddDoneOutQty,0) as 'monAddDoneOutQty',isnull(d.sumPeople,0) as 'sumPeople',isnull(e.yearAddPlanOutQty,0) as 'yearAddPlanOutQty',isnull(f.yearAddDoneOutQty,0) as 'yearAddDoneOutQty',isnull(g.todayDoneOutQty,0) as 'todayDoneOutQty'  from(select sum(outqty) as 'yearPlanOutQty',factoryGuid from ManFactoryMonPlan  where factoryGuid in(@p0) and YY=@p1 GROUP BY factoryGuid) as a
left join (
	select outqty as 'monPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and MM=@p2
	) as b on (b.factoryGuid=a.factoryGuid)
left join (
	select sum(outline.qty) as 'monAddDoneOutQty',out.factoryGuid from ManWorkshopOut as out 
	inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
	where out.factoryGuid in(@p0) and outline.workDate BETWEEN (SELECT   DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) and (SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0)))
	group by out.factoryGuid
) as c on (c.factoryGuid=b.factoryGuid)
left join (
	select cadre+logistic+worker as 'sumPeople',Guid as 'factoryGuid' from ManFactory where Guid in(@p0)
) as d on(d.factoryGuid=c.factoryGuid)
left join (
	select sum(outqty) as 'yearAddPlanOutQty',factoryGuid from ManFactoryMonPlan where factoryGuid in(@p0) and YY=@p1 and CONVERT(INT,MM)<=CONVERT(INT,@p2) GROUP BY factoryGuid
) as e on(e.factoryGuid=d.factoryGuid)
left join (
	select sum(outline.qty) as 'yearAddDoneOutQty',factoryGuid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and outline.workDate <=(SELECT   DATEADD(d, - 1, DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+1, 0))) GROUP BY factoryGuid
) as f on(f.factoryGuid=e.factoryGuid)
left join (
select sum(outline.qty) as 'todayDoneOutQty',out.factoryGuid,out.Guid from ManWorkshopOut as out 
inner join ManWorkshopOutLine as outline on (outline.workshopOutGuid=out.Guid)
where out.factoryGuid in(@p0) and  DATEDIFF(day,outline.workDate,@p3)=0 GROUP BY out.Guid,out.factoryGuid
) as g on(g.factoryGuid=f.factoryGuid)
2020-05-29 17:44:40,005 [103] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (64ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManWorkProcess] AS [a]
INNER JOIN [ManFactory] AS [b] ON [a].[factoryGuid] = [b].[Guid]
WHERE [a].[factoryGuid] = @__payload_factoryGuid_0
2020-05-29 17:44:40,004 [64] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (68ms) [Parameters=[@__payload_factoryGuid_0='?' (DbType = Guid), @__payload_workDate_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[OrgID], [x].[cadre], [x].[cadreLeave], [x].[cadreRest], [x].[credate], [x].[creuser], [x].[factoryGuid], [x].[logistic], [x].[logisticLeave], [x].[logisticRest], [x].[moddate], [x].[moduser], [x].[workDate], [x].[worker], [x].[workerLeave], [x].[workerReste]
FROM [ManFactoryWorkdate] AS [x]
WHERE ([x].[factoryGuid] = @__payload_factoryGuid_0) AND ([x].[workDate] = @__payload_workDate_1)
2020-05-29 17:44:40,008 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 77.89ms.
2020-05-29 17:44:40,009 [103] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 130.6933ms.
2020-05-29 17:44:40,015 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 82.4119ms.
2020-05-29 17:44:40,017 [75] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:44:40,018 [103] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:44:40,021 [64] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:44:40,024 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkshopInfo (DncZeus.Api) in 209.68ms
2020-05-29 17:44:40,025 [103] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkprocessController.List (DncZeus.Api) in 206.7695ms
2020-05-29 17:44:40,029 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryWorkshopController.GetFactoryWorkDate (DncZeus.Api) in 210.1711ms
2020-05-29 17:44:40,035 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 257.0993ms 200 application/json; charset=utf-8
2020-05-29 17:44:40,037 [103] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 242.3477ms 200 application/json; charset=utf-8
2020-05-29 17:44:40,039 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 253.1227ms 200 application/json; charset=utf-8
2020-05-29 17:45:04,260 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-05-29 17:45:04,275 [96] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:45:04,279 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 17.9691ms 204 
2020-05-29 17:45:04,282 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 176
2020-05-29 17:45:04,285 [96] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:45:04,295 [96] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:45:04,298 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-05-29 17:45:04,301 [96] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:45:04,323 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:45:04,365 [96] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (37ms) [Parameters=[@p0='?', @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                        from ManWorkshopOut as b
                                        left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        where  b.workProcessGuid=@p1 
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-05-29 17:45:04,400 [96] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (31ms) [Parameters=[@p0='?', @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                    from ManWorkshopOut as b
                                    left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    where  b.workProcessGuid=@p1 
) AS [w]
2020-05-29 17:45:04,403 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 77.1639ms.
2020-05-29 17:45:04,408 [96] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:45:04,412 [96] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 110.0768ms
2020-05-29 17:45:04,418 [96] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 133.0087ms 200 application/json; charset=utf-8
2020-05-29 17:45:07,227 [104] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:45:07,234 [104] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:45:07,239 [104] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 10.7138ms 204 
2020-05-29 17:45:07,243 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:45:07,249 [75] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:45:07,251 [75] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:45:07,253 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:45:07,256 [75] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:45:07,276 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:45:07,302 [75] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:45:07,304 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 25.5081ms.
2020-05-29 17:45:07,306 [75] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:45:07,310 [75] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 53.0383ms
2020-05-29 17:45:07,312 [75] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 69.5567ms 200 application/json; charset=utf-8
2020-05-29 17:45:37,262 [104] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:45:37,269 [104] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:45:37,283 [104] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 13.6156ms 204 
2020-05-29 17:45:37,285 [102] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:45:37,289 [102] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:45:37,292 [102] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:45:37,297 [102] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:45:37,300 [102] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:45:37,323 [102] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:45:37,364 [102] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:45:37,366 [102] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 40.8709ms.
2020-05-29 17:45:37,369 [102] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:45:37,372 [102] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 71.5858ms
2020-05-29 17:45:37,375 [102] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 89.6894ms 200 application/json; charset=utf-8
2020-05-29 17:46:07,228 [104] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:46:07,239 [104] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:46:07,241 [104] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 14.2529ms 204 
2020-05-29 17:46:07,285 [112] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:46:07,288 [112] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:46:07,291 [112] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:46:07,293 [112] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:46:07,299 [112] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:46:07,319 [112] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:46:07,343 [112] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (21ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:46:07,347 [112] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 25.0453ms.
2020-05-29 17:46:07,349 [112] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:46:07,352 [112] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 53.1817ms
2020-05-29 17:46:07,354 [112] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 81.6206ms 200 application/json; charset=utf-8
2020-05-29 17:46:37,234 [102] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:46:37,254 [102] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:46:37,259 [102] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 24.407ms 204 
2020-05-29 17:46:37,275 [102] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:46:37,290 [102] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:46:37,296 [102] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:46:37,300 [102] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:46:37,304 [102] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:46:37,326 [102] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:46:37,353 [102] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (22ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:46:37,355 [102] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 25.0337ms.
2020-05-29 17:46:37,358 [102] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:46:37,363 [102] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 58.0253ms
2020-05-29 17:46:37,367 [102] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 91.0699ms 200 application/json; charset=utf-8
2020-05-29 17:46:38,415 [102] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v1/account/profile  
2020-05-29 17:46:38,417 [102] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:46:38,420 [102] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 4.7536ms 204 
2020-05-29 17:46:38,424 [112] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v1/account/profile  
2020-05-29 17:46:38,427 [112] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:46:38,430 [112] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:46:38,432 [112] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Profile() on controller DncZeus.Api.Controllers.AccountController (DncZeus.Api).
2020-05-29 17:46:38,434 [112] INFO  Microsoft.AspNetCore.Authorization.DefaultAuthorizationService [(null)]  - Authorization was successful.
2020-05-29 17:46:38,436 [112] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:46:38,454 [112] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) - Validation state: Valid
2020-05-29 17:46:38,492 [113] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (33ms) [Parameters=[@__Parse_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[ID], [x].[Code], [x].[Name], [x].[credate], [x].[creuser], [x].[moddate], [x].[moduser]
FROM [MisOrganization] AS [x]
WHERE [x].[ID] = @__Parse_0
2020-05-29 17:46:38,548 [102] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (35ms) [Parameters=[@__guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT TOP(1) [x].[Guid], [x].[EmpName], [x].[EmpNo], [x].[code], [x].[credate], [x].[creuser], [x].[depname], [x].[depno], [x].[email], [x].[enabled], [x].[jobname], [x].[jobno], [x].[moddate], [x].[moduser], [x].[pwd], [x].[telno], [x].[userLogo], [x].[username], [x].[userno], [x].[utype], [x].[wxAccount], [x].[wxId], [x].[wxMail], [x].[wxName], [x].[wxPhone], [x].[wxPwd]
FROM [Secuser] AS [x]
WHERE [x].[Guid] = @__guid_0
2020-05-29 17:46:38,582 [112] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (31ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[Alias], [x].[BeforeCloseFun], [x].[Component], [x].[CreatedByUserGuid], [x].[CreatedByUserName], [x].[CreatedOn], [x].[Description], [x].[HideInMenu], [x].[Icon], [x].[IsDefaultRouter], [x].[IsDeleted], [x].[Level], [x].[ModifiedByUserGuid], [x].[ModifiedByUserName], [x].[ModifiedOn], [x].[Name], [x].[NotCache], [x].[ParentGuid], [x].[ParentName], [x].[Sort], [x].[Status], [x].[Url]
FROM [DncMenu] AS [x]
WHERE ([x].[IsDeleted] = 0) AND ([x].[Status] = 1)
2020-05-29 17:46:38,624 [112] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (34ms) [Parameters=[@__user_Guid_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secuprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE [x].[userid] = @__user_Guid_0
ORDER BY [b0].[prgno]
2020-05-29 17:46:38,659 [112] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (31ms) [Parameters=[@__groupid_0='?' (Size = 4000)], CommandType='Text', CommandTimeout='6000000']
SELECT [b].[butno], [b0].[prgno]
FROM [Secgprg] AS [x]
INNER JOIN [Secbutton] AS [b] ON [x].[butid] = [b].[Guid]
INNER JOIN [Secprg] AS [b0] ON [x].[prgid] = [b0].[Guid]
WHERE CONVERT(VARCHAR(36), [x].[groupid]) = @__groupid_0
ORDER BY [b0].[prgno]
2020-05-29 17:46:38,664 [112] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 206.3725ms.
2020-05-29 17:46:38,667 [112] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:46:38,670 [112] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.AccountController.Profile (DncZeus.Api) in 235.2299ms
2020-05-29 17:46:38,674 [112] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 248.3684ms 200 application/json; charset=utf-8
2020-05-29 17:46:38,681 [104] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-05-29 17:46:38,683 [104] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:46:38,686 [104] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 4.5632ms 204 
2020-05-29 17:46:38,689 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/sec/uprg/LoadMenuTree?api-version=5  
2020-05-29 17:46:38,692 [64] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:46:38,696 [64] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:46:38,701 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "LoadMenuTree", controller = "Uprg"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult LoadMenuTree() on controller DncZeus.Api.Controllers.Api.Sec.UprgController (DncZeus.Api).
2020-05-29 17:46:38,703 [64] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:46:38,722 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) - Validation state: Valid
2020-05-29 17:46:38,750 [64] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[icon], [p].[sysname], [p].[sysno], [p].[sysorder]
FROM [Secsys] AS [p]
ORDER BY [p].[sysorder]
2020-05-29 17:46:38,773 [64] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[enabled], [p].[funname], [p].[funno], [p].[funorder], [p].[icon], [p].[sysid]
FROM [Secfun] AS [p]
ORDER BY [p].[funorder]
2020-05-29 17:46:38,813 [64] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (32ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [x].[Guid], [x].[enabled], [x].[funid], [x].[icon], [x].[mainid], [x].[prgcomp], [x].[prgname], [x].[prgno], [x].[prgorder], [x].[prgtype], [x].[program], [x].[runtype], [x].[sysid]
FROM [Secprg] AS [x]
WHERE [x].[enabled] = 'Y'
ORDER BY [x].[prgorder]
2020-05-29 17:46:38,845 [64] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT [p].[Guid], [p].[butid], [p].[butname], [p].[butno], [p].[butorder], [p].[funid], [p].[prgid], [p].[sysid]
FROM [Secprgbut] AS [p]
ORDER BY [p].[butorder]
2020-05-29 17:46:38,849 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 124.6876ms.
2020-05-29 17:46:38,852 [64] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseModel'.
2020-05-29 17:46:38,856 [64] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Sec.UprgController.LoadMenuTree (DncZeus.Api) in 151.699ms
2020-05-29 17:46:38,864 [64] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 169.431ms 200 application/json; charset=utf-8
2020-05-29 17:46:39,534 [104] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/factory/list?api-version=8  
2020-05-29 17:46:39,537 [102] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 GET http://localhost:54321/api/v5/mis/message/GetUnreadCount?api-version=5&userno=admin  
2020-05-29 17:46:39,543 [116] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 OPTIONS http://localhost:54321/api/v8/man/workshop/list?api-version=8  
2020-05-29 17:46:39,550 [102] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:46:39,555 [104] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:46:39,560 [116] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:46:39,566 [102] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:46:39,581 [104] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 31.2715ms 204 
2020-05-29 17:46:39,586 [116] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 24.2869ms 204 
2020-05-29 17:46:39,589 [102] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "GetUnreadCount", controller = "Message"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUnreadCount(System.String) on controller DncZeus.Api.Controllers.Api.Mis.MessageController (DncZeus.Api).
2020-05-29 17:46:39,592 [104] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/factory/list?api-version=8 application/json;charset=UTF-8 96
2020-05-29 17:46:39,597 [116] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request starting HTTP/1.1 POST http://localhost:54321/api/v8/man/workshop/list?api-version=8 application/json;charset=UTF-8 140
2020-05-29 17:46:39,600 [102] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:46:39,632 [104] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:46:39,637 [116] INFO  Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler [(null)]  - Successfully validated the token.
2020-05-29 17:46:39,641 [102] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) - Validation state: Valid
2020-05-29 17:46:39,656 [104] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:46:39,658 [116] INFO  Microsoft.AspNetCore.Cors.Infrastructure.CorsService [(null)]  - Policy execution successful.
2020-05-29 17:46:39,717 [104] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Factory"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Factory.FactoryRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.FactoryController (DncZeus.Api).
2020-05-29 17:46:39,720 [102] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (60ms) [Parameters=[@__userno_0='?' (Size = 20) (DbType = AnsiString)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [Mismessage] AS [x]
WHERE ([x].[receiveUserno] = @__userno_0) AND ([x].[readStatus] = CAST(1 AS tinyint))
2020-05-29 17:46:39,722 [116] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Route matched with {action = "List", controller = "Workshop"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult List(DncZeus.Api.RequestPayload.Man.Workshop.WorkshopRequestPayload) on controller DncZeus.Api.Controllers.Api.Weixin.WorkshopController (DncZeus.Api).
2020-05-29 17:46:39,725 [104] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:46:39,729 [102] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 70.6465ms.
2020-05-29 17:46:39,733 [116] INFO  Microsoft.EntityFrameworkCore.Infrastructure [(null)]  - Entity Framework Core 2.1.14-servicing-32113 initialized 'DncZeusDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: RowNumberPaging 
2020-05-29 17:46:39,754 [102] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:46:39,758 [104] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:46:39,778 [102] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Mis.MessageController.GetUnreadCount (DncZeus.Api) in 162.893ms
2020-05-29 17:46:39,781 [116] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executing action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) - Validation state: Valid
2020-05-29 17:46:39,784 [102] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 247.622ms 200 application/json; charset=utf-8
2020-05-29 17:46:39,844 [104] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (38ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[OrgID], [t].[cadre], [t].[code], [t].[countType], [t].[credate], [t].[creuser], [t].[logistic], [t].[moddate], [t].[moduser], [t].[name], [t].[pertargetOut], [t].[worker]
FROM (
    SELECT [m].[Guid], [m].[OrgID], [m].[cadre], [m].[code], [m].[countType], [m].[credate], [m].[creuser], [m].[logistic], [m].[moddate], [m].[moduser], [m].[name], [m].[pertargetOut], [m].[worker], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM [ManFactory] AS [m]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_0) AND ([t].[__RowNumber__] <= (@__p_0 + @__p_1))
2020-05-29 17:46:39,847 [116] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (41ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='6000000']
SELECT [t].[Guid], [t].[countType], [t].[credate], [t].[creuser], [t].[factoryGuid], [t].[factoryPrice], [t].[itemCode], [t].[itemName], [t].[lineGuid], [t].[ordCode], [t].[ordQty], [t].[qty], [t].[remark], [t].[sumQty], [t].[workDate]
FROM (
    SELECT [w].[Guid], [w].[countType], [w].[credate], [w].[creuser], [w].[factoryGuid], [w].[factoryPrice], [w].[itemCode], [w].[itemName], [w].[lineGuid], [w].[ordCode], [w].[ordQty], [w].[qty], [w].[remark], [w].[sumQty], [w].[workDate], ROW_NUMBER() OVER(ORDER BY @@RowCount) AS [__RowNumber__]
    FROM (
        select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                        (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                        from ManWorkshopOut as b
                                        left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                        where  b.workProcessGuid=@p1 
    ) AS [w]
) AS [t]
WHERE ([t].[__RowNumber__] > @__p_1) AND ([t].[__RowNumber__] <= (@__p_1 + @__p_2))
2020-05-29 17:46:39,888 [104] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (37ms) [Parameters=[], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM [ManFactory] AS [m]
2020-05-29 17:46:39,891 [104] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 107.8288ms.
2020-05-29 17:46:39,895 [104] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:46:39,898 [116] INFO  Microsoft.EntityFrameworkCore.Database.Command [(null)]  - Executed DbCommand (46ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='6000000']
SELECT COUNT(*)
FROM (
    select b.Guid,b.factoryGuid,b.countType,b.ordCode,b.itemCode,b.itemName,b.factoryPrice,b.ordQty,b.creuser,b.credate,line.remark,line.workDate,isnull(line.qty,0) as qty,line.Guid as lineGuid,
                                    (select sum(qty) from ManWorkshopOutLine as l where l.workshopOutGuid=b.Guid ) as sumqty
                                    from ManWorkshopOut as b
                                    left join (select * from ManWorkshopOutLine where  credate in (select max(credate) from [dbo].[ManWorkshopOutLine] as a where a.workDate=@p2 group by a.workshopOutGuid)) AS line ON (line.workshopOutGuid = b.Guid)
                                    where  b.workProcessGuid=@p1 
) AS [w]
2020-05-29 17:46:39,900 [104] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.FactoryController.List (DncZeus.Api) in 177.3998ms
2020-05-29 17:46:39,903 [116] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action method DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 116.2703ms.
2020-05-29 17:46:39,914 [104] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 320.6048ms 200 application/json; charset=utf-8
2020-05-29 17:46:39,916 [116] INFO  Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor [(null)]  - Executing ObjectResult, writing value of type 'DncZeus.Api.Models.Response.ResponseResultModel'.
2020-05-29 17:46:39,918 [116] INFO  Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker [(null)]  - Executed action DncZeus.Api.Controllers.Api.Weixin.WorkshopController.List (DncZeus.Api) in 190.4354ms
2020-05-29 17:46:39,922 [116] INFO  Microsoft.AspNetCore.Hosting.Internal.WebHost [(null)]  - Request finished in 327.2919ms 200 application/json; charset=utf-8
